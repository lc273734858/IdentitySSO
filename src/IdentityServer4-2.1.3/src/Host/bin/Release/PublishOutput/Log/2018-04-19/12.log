2018-04-19 12:04:46,054 - DEBUG - 【应用名称】 - Hosting shutdown
2018-04-19 12:42:56,805 - INFO  - 【应用名称】 - User profile not available. Using 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-19 12:42:56,837 - DEBUG - 【应用名称】 - Reading data from registry key 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection', value 'key-b01cb4d5-5215-4af1-945c-a28b40b7d4aa'.
2018-04-19 12:42:56,843 - DEBUG - 【应用名称】 - Found key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa}.
2018-04-19 12:42:56,860 - DEBUG - 【应用名称】 - Considering key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with expiration date 2018-07-17 05:33:20Z as default key.
2018-04-19 12:42:56,878 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:42:56,881 - DEBUG - 【应用名称】 - Decrypting secret element using Windows DPAPI.
2018-04-19 12:42:56,885 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:42:56,892 - DEBUG - 【应用名称】 - Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC.
2018-04-19 12:42:56,900 - DEBUG - 【应用名称】 - Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC.
2018-04-19 12:42:56,913 - DEBUG - 【应用名称】 - Using key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} as the default key.
2018-04-19 12:42:56,916 - DEBUG - 【应用名称】 - Key ring with default key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} was loaded during application startup.
2018-04-19 12:42:56,929 - INFO  - 【应用名称】 - You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-19 12:42:56,952 - DEBUG - 【应用名称】 - Using idsrv as default scheme for authentication
2018-04-19 12:42:56,952 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-in
2018-04-19 12:42:56,953 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-out
2018-04-19 12:42:56,953 - DEBUG - 【应用名称】 - Using idsrv as default scheme for challenge
2018-04-19 12:42:56,953 - DEBUG - 【应用名称】 - Using idsrv as default scheme for forbid
2018-04-19 12:42:57,202 - DEBUG - 【应用名称】 - Hosting starting
2018-04-19 12:42:57,327 - DEBUG - 【应用名称】 - Hosting started
2018-04-19 12:42:57,327 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Host
2018-04-19 12:42:57,328 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Microsoft.AspNetCore.Server.IISIntegration
2018-04-19 12:42:57,528 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" started.
2018-04-19 12:42:57,665 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/.well-known/openid-configuration  
2018-04-19 12:42:57,888 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:42:57,901 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:42:57,904 - DEBUG - 【应用名称】 - Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-19 12:42:57,906 - DEBUG - 【应用名称】 - Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-19 12:42:57,907 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-19 12:42:57,910 - INFO  - 【应用名称】 - Processing discovery request.
2018-04-19 12:42:57,910 - DEBUG - 【应用名称】 - Start discovery request
2018-04-19 12:42:57,911 - INFO  - 【应用名称】 - Calling into discovery response generator: IdentityServer4.ResponseHandling.DiscoveryResponseGenerator
2018-04-19 12:42:57,933 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.DiscoveryDocumentResult
2018-04-19 12:42:58,056 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" completed keep alive response.
2018-04-19 12:42:58,063 - INFO  - 【应用名称】 - Request finished in 405.8379ms 200 application/json; charset=UTF-8
2018-04-19 12:42:58,063 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/.well-known/openid-configuration/jwks  
2018-04-19 12:42:58,065 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:42:58,065 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:42:58,065 - DEBUG - 【应用名称】 - Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-19 12:42:58,066 - DEBUG - 【应用名称】 - Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-19 12:42:58,066 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-19 12:42:58,069 - INFO  - 【应用名称】 - Processing discovery request.
2018-04-19 12:42:58,069 - DEBUG - 【应用名称】 - Start key discovery request
2018-04-19 12:42:58,069 - INFO  - 【应用名称】 - Calling into discovery response generator: IdentityServer4.ResponseHandling.DiscoveryResponseGenerator
2018-04-19 12:42:58,078 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.JsonWebKeysResult
2018-04-19 12:42:58,097 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" completed keep alive response.
2018-04-19 12:42:58,098 - INFO  - 【应用名称】 - Request finished in 34.1577ms 200 application/json; charset=UTF-8
2018-04-19 12:42:58,132 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:42:58,135 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" started.
2018-04-19 12:42:58,136 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:42:58,143 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:42:58,143 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:42:58,156 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,156 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,157 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,157 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,158 - DEBUG - 【应用名称】 - Request path /connect/authorize matched to endpoint type Authorize
2018-04-19 12:42:58,158 - DEBUG - 【应用名称】 - Request path /connect/authorize matched to endpoint type Authorize
2018-04-19 12:42:58,162 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-19 12:42:58,162 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-19 12:42:58,162 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-19 12:42:58,162 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-19 12:42:58,166 - DEBUG - 【应用名称】 - Start authorize request
2018-04-19 12:42:58,167 - DEBUG - 【应用名称】 - Start authorize request
2018-04-19 12:42:58,184 - DEBUG - 【应用名称】 - User in authorize request: 1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d
2018-04-19 12:42:58,184 - DEBUG - 【应用名称】 - User in authorize request: 1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d
2018-04-19 12:42:58,190 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:42:58,190 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:42:58,243 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:42:58,243 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:42:58,243 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:42:58,243 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:42:58,257 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg",
  "Nonce": "636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm",
  "SessionId": "09f96e894a472a5e2ee6c438bd4fe2c1",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:42:58,257 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg",
  "Nonce": "636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm",
  "SessionId": "09f96e894a472a5e2ee6c438bd4fe2c1",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:42:58,261 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:42:58,261 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:42:58,266 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:42:58,266 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - Showing login: User is not active
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - Showing login: User is not active
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - End authorize request. result type: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - End authorize request. result type: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:42:58,267 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:42:58,279 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" completed keep alive response.
2018-04-19 12:42:58,279 - INFO  - 【应用名称】 - Request finished in 146.3666ms 302 
2018-04-19 12:42:58,279 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" completed keep alive response.
2018-04-19 12:42:58,279 - INFO  - 【应用名称】 - Request finished in 143.5506ms 302 
2018-04-19 12:42:58,293 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597097781036539.ZDVkYWJhMjItMzc4YS00OGZiLWEzOTMtOTJiNDcyMDlhOWQ0MzY0N2MyZTktNGFjMC00Mjk0LTkzY2ItNDdhYTNiNGI4MThm%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGr6O53W2QzbaPin79mRFQR106Vy8VFkK_KMSpRdNPjnJSh9O8KXdwzyTuwrQUj8nYMZT-0mGcxvI9WTYyoASCQgHYnZDlhBmEczBJiGwnkZWVWwNskUj7AeSU7hdmkM-z61njAF3ZOkRKliGH9DhIN51lU5-nVnGX7ExRhYDu5R7cfmeQWwDfpN3wF_h6DPAnjfXMODFf-x0-E11CSUwfP03UZDBu2SyqAIFH_HnFZdwxaKLnI-oeKGvM_7yiWrFhfdczYORoF4K3l7U-ZdICu2vcOgiRBXogP7dQOhnKvyg%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,294 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:42:58,295 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:42:58,301 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:42:58,301 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:42:58,489 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:42:58,489 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:42:58,516 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id '0f0511ef-4a98-4049-987c-b945aaf10458' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:42:58,516 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id '0f0511ef-4a98-4049-987c-b945aaf10458' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:42:58,593 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:42:58,593 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:42:58,614 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 19.5152ms
2018-04-19 12:42:58,614 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 19.4392ms
2018-04-19 12:42:58,615 - ERROR - 【应用名称】 - An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[Host.ApplicationUser]' while attempting to activate 'IdentityServer4.Quickstart.UI.AccountController'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-19 12:42:58,615 - ERROR - 【应用名称】 - An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[Host.ApplicationUser]' while attempting to activate 'IdentityServer4.Quickstart.UI.AccountController'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-19 12:42:58,836 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" completed keep alive response.
2018-04-19 12:42:58,836 - INFO  - 【应用名称】 - Request finished in 542.6605ms 500 text/html; charset=utf-8
2018-04-19 12:42:58,837 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" completed keep alive response.
2018-04-19 12:42:58,837 - INFO  - 【应用名称】 - Request finished in 543.5186ms 500 text/html; charset=utf-8
2018-04-19 12:44:57,496 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" reset.
2018-04-19 12:44:57,496 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" reset.
2018-04-19 12:44:57,497 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" disconnecting.
2018-04-19 12:44:57,497 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" disconnecting.
2018-04-19 12:44:57,503 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" sending FIN.
2018-04-19 12:44:57,503 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" sending FIN.
2018-04-19 12:44:57,504 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBT" stopped.
2018-04-19 12:44:57,504 - DEBUG - 【应用名称】 - Connection id "0HLD5M02UUQBS" stopped.
2018-04-19 12:46:59,807 - DEBUG - 【应用名称】 - Hosting shutdown
2018-04-19 12:47:34,881 - INFO  - 【应用名称】 - User profile not available. Using 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-19 12:47:34,911 - DEBUG - 【应用名称】 - Reading data from registry key 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection', value 'key-b01cb4d5-5215-4af1-945c-a28b40b7d4aa'.
2018-04-19 12:47:34,917 - DEBUG - 【应用名称】 - Found key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa}.
2018-04-19 12:47:34,930 - DEBUG - 【应用名称】 - Considering key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with expiration date 2018-07-17 05:33:20Z as default key.
2018-04-19 12:47:34,946 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:47:34,949 - DEBUG - 【应用名称】 - Decrypting secret element using Windows DPAPI.
2018-04-19 12:47:34,953 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:47:34,960 - DEBUG - 【应用名称】 - Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC.
2018-04-19 12:47:34,967 - DEBUG - 【应用名称】 - Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC.
2018-04-19 12:47:34,980 - DEBUG - 【应用名称】 - Using key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} as the default key.
2018-04-19 12:47:34,982 - DEBUG - 【应用名称】 - Key ring with default key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} was loaded during application startup.
2018-04-19 12:47:34,996 - INFO  - 【应用名称】 - You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-19 12:47:35,014 - DEBUG - 【应用名称】 - Using idsrv as default scheme for authentication
2018-04-19 12:47:35,014 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-in
2018-04-19 12:47:35,015 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-out
2018-04-19 12:47:35,015 - DEBUG - 【应用名称】 - Using idsrv as default scheme for challenge
2018-04-19 12:47:35,015 - DEBUG - 【应用名称】 - Using idsrv as default scheme for forbid
2018-04-19 12:47:35,241 - DEBUG - 【应用名称】 - Hosting starting
2018-04-19 12:47:35,357 - DEBUG - 【应用名称】 - Hosting started
2018-04-19 12:47:35,357 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Host
2018-04-19 12:47:35,357 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Microsoft.AspNetCore.Server.IISIntegration
2018-04-19 12:47:35,385 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" started.
2018-04-19 12:47:35,504 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:47:35,720 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:47:35,733 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:35,748 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:35,750 - DEBUG - 【应用名称】 - Request path /connect/authorize matched to endpoint type Authorize
2018-04-19 12:47:35,756 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-19 12:47:35,756 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-19 12:47:35,760 - DEBUG - 【应用名称】 - Start authorize request
2018-04-19 12:47:35,776 - DEBUG - 【应用名称】 - User in authorize request: 1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d
2018-04-19 12:47:35,781 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:47:35,827 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:47:35,828 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:47:35,899 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "1e3a16f438da685dd3d802923a1c72f92f00e098d629b7d801f3306ed9d66c5d",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
  "Nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
  "SessionId": "09f96e894a472a5e2ee6c438bd4fe2c1",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:47:35,901 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:47:35,906 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:47:35,907 - INFO  - 【应用名称】 - Showing login: User is not active
2018-04-19 12:47:35,907 - INFO  - 【应用名称】 - End authorize request. result type: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:47:35,907 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:47:35,960 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:47:35,965 - INFO  - 【应用名称】 - Request finished in 468.1943ms 302 
2018-04-19 12:47:35,976 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:47:35,977 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:47:35,977 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:35,978 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:35,978 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:47:35,988 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:47:36,190 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:47:36,222 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id '0e1f86a5-fbe9-4858-910c-0904592a3739' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:47:36,305 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:47:36,415 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:47:36,427 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:47:36,430 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:47:36,431 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:47:36,431 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:47:36,431 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:47:36,432 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:47:36,432 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:47:36,438 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:47:36,469 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Login' in controller 'Account'.
2018-04-19 12:47:36,496 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/Login.cshtml'.
2018-04-19 12:47:36,500 - DEBUG - 【应用名称】 - The view 'Login' was found.
2018-04-19 12:47:36,502 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Login.cshtml.
2018-04-19 12:47:36,582 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Account'.
2018-04-19 12:47:36,582 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:47:36,636 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:47:36,648 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:47:36,652 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:47:36,819 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Account'.
2018-04-19 12:47:36,819 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:47:36,923 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 615.9499ms
2018-04-19 12:47:36,929 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:47:36,929 - INFO  - 【应用名称】 - Request finished in 952.6544ms 200 text/html; charset=utf-8
2018-04-19 12:47:45,963 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLogin?provider=WeChatCompany&returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:47:45,963 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:47:45,963 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:45,963 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:47:45,963 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLogin
2018-04-19 12:47:45,963 - DEBUG - 【应用名称】 - The request path /account/ExternalLogin does not match a supported file type
2018-04-19 12:47:45,964 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:47:45,969 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host)
2018-04-19 12:47:45,971 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) with arguments (WeChatCompany, /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:47:45,977 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host), returned result Microsoft.AspNetCore.Mvc.ChallengeResult.
2018-04-19 12:47:45,981 - INFO  - 【应用名称】 - Executing ChallengeResult with authentication schemes (WeChatCompany).
2018-04-19 12:47:46,014 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:47:46,016 - INFO  - 【应用名称】 - AuthenticationScheme: WeChatCompany was challenged.
2018-04-19 12:47:46,016 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) in 47.2641ms
2018-04-19 12:47:46,017 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:47:46,017 - INFO  - 【应用名称】 - Request finished in 53.9917ms 302 
2018-04-19 12:47:54,728 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/signin-WeChatCompany?code=p7fris3XtwnSMiRX5HczQ0Rxg6O8ZqaPTW4M5agkUXQ&state=CfDJ8NW0HLAVUvFKlFyii0C31Kr7iIx85we7VzooD4w3VdfvTNY2nbSgzAHaqk7nZBKdZswSMgMt_MLD1EJyXthRIcdicozbIJqscNwyajJk_9oSPtf46sRuVJJ-g00B9Qt8l8whFp_LeSwGBafqzVv4nd3QiTu1yFS7pE1DkOmaAKkuFi9hF5AqTGS_YiIjsSNWOpusWXJwHU5gYCZTVIPWO7JycfKi0uEN9SSkWxg6gQI_RBrIOMjHv_3em6u0t2zH92-ya-Z41qU-692AJnzgUr-BKXm2WDLE8cyjvAQDlQCbFTt_1L7kPjWiKyp9v1n7nEVQOT4R5YOOg1D0p58hjo9XK0YPtfLyUzPGkdih6GOWTkDpwi4bWayPTzI3gHgaPtFNKbUNevk0ZAk3TUDiW1tzRwnygVYPk6J2Aklb8fDiGbMaqKp_rKMgjk7tr-vz5ts68U8etB1s0oFVKPR8BsUP_mZwGOYf1LNiClILZnJie24vgJhgnFNKJ7lvcI6D5KD_YGRWq3UoQq4ZJpYDEtz1Gv1l31a1whGWEb3ACNaDVWsXu3wMGLXSPD8Vek9bFX5P29w77j7zZK2mLgLTkNfBDsq7p2uU-AAtiQsVYSehlUeL0EN1V48ozEBe89sp8GqrSNO795ueHYiN8gp9RnztMN26XDm90jQrAHVjpgbresKsuvi775B1wqk5-eD4gbXPlfx-AqxM1f08XYz147obBkPKuHSDKFUcBDmZQ1rdebvUU-kgVhVdJDMlULFa9X-qTfR5ZBnvccs8qhPMsfPwOkTR2Mya0ryGvCZnsCS4d2IY54i9ojyku1kE_9yAeL9vm0-GdUze7PGA1MKWeUtZtpLvqkzRNOAyoesSKprVub6Odx8V_Nz15VUBhSfWrFMZGD76jBYzsfoMFzKJNNHRqtl8g32r7RAWSMD1mDtdMdyP8-ZyzXa0Xr_Tnn6iLEPjLW58VD7wXEtZRX5uAhhZJzCJGwoJqx9gXP_huQatHfIFEiQ5xkfDYuVnY176wZegxF8X30jq1N-Ul5k83zCOQ0LjCouVEdFLc90tloUO96pdgTt1pgVHRhx2_TrGAAO3rCwtQUPnEMwu7SOFsIekGsnB3CzN7sx5hlVLDjdzp0sQQkbeCxbud9ijWwQ6k9MXa1WaUtEpUj9NeJPF7TZFLhMrD4PVlq81P9zLuB2F&appid=ww85a6abac8a4faac6  
2018-04-19 12:47:54,734 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:48:08,760 - DEBUG - 【应用名称】 - payload : {
  "access_token": "U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ",
  "code": "p7fris3XtwnSMiRX5HczQ0Rxg6O8ZqaPTW4M5agkUXQ"
}
2018-04-19 12:48:11,173 - DEBUG - 【应用名称】 - userInformationEndpoint : https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?access_token=U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ&code=p7fris3XtwnSMiRX5HczQ0Rxg6O8ZqaPTW4M5agkUXQ
2018-04-19 12:48:13,586 - DEBUG - 【应用名称】 - {"UserId":"86a827dfa6a9321af89c9b903ddc3a61","DeviceId":"","errcode":0,"errmsg":"ok"}
2018-04-19 12:48:13,588 - DEBUG - 【应用名称】 - success
2018-04-19 12:48:13,592 - DEBUG - 【应用名称】 - success2
2018-04-19 12:48:13,592 - DEBUG - 【应用名称】 - context.Principal:
2018-04-19 12:48:13,596 - DEBUG - 【应用名称】 - context.Properties:
2018-04-19 12:48:13,596 - DEBUG - 【应用名称】 - Scheme.Name:
2018-04-19 12:48:13,616 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:48:13,621 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed in.
2018-04-19 12:48:13,621 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:13,621 - INFO  - 【应用名称】 - Request finished in 18894.4287ms 302 
2018-04-19 12:48:13,632 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLoginCallback  
2018-04-19 12:48:13,632 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:13,633 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,633 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,633 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLoginCallback
2018-04-19 12:48:13,633 - DEBUG - 【应用名称】 - The request path /account/ExternalLoginCallback does not match a supported file type
2018-04-19 12:48:13,633 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:48:13,636 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host)
2018-04-19 12:48:13,636 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) with arguments ((null)) - ModelState is Valid
2018-04-19 12:48:13,640 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:48:13,641 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-19 12:48:13,671 - INFO  - 【应用名称】 - {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "WeChatCompany",
  "ProviderUserId": "86a827dfa6a9321af89c9b903ddc3a61",
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "DisplayName": "86a827dfa6a9321af89c9b903ddc3a61",
  "Endpoint": "UI",
  "ActivityId": "0HLD5M2LOQ1KC:00000005",
  "TimeStamp": "2018-04-19T04:48:13Z",
  "ProcessId": 30588,
  "LocalIpAddress": "127.0.0.1:26562",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:48:13,680 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:48:13,681 - DEBUG - 【应用名称】 - Adding amr claim with value: external
2018-04-19 12:48:13,684 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:13,684 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:48:13,697 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed out.
2018-04-19 12:48:13,698 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:48:13,698 - INFO  - 【应用名称】 - IsValidReturnUrl true
2018-04-19 12:48:13,699 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:48:13,701 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:48:13,702 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) in 65.5856ms
2018-04-19 12:48:13,702 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:13,702 - INFO  - 【应用名称】 - Request finished in 69.6241ms 302 
2018-04-19 12:48:13,709 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:48:13,709 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:13,710 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,710 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,710 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:48:13,710 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:48:13,710 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:48:13,715 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:48:13,719 - DEBUG - 【应用名称】 - User in authorize request: c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462
2018-04-19 12:48:13,719 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:48:13,719 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:48:13,719 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:48:13,719 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
  "Nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
  "SessionId": "59512465eee0c19b483a4c11965a087e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:48:13,720 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:48:13,720 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:48:13,732 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462 not found in store.
2018-04-19 12:48:13,732 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:48:13,732 - INFO  - 【应用名称】 - Showing consent: User has not yet consented
2018-04-19 12:48:13,732 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:48:13,732 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:48:13,733 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:13,733 - INFO  - 【应用名称】 - Request finished in 23.8051ms 302 
2018-04-19 12:48:13,740 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/consent?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:48:13,740 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:13,740 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,741 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:13,741 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:48:13,741 - DEBUG - 【应用名称】 - The request path /consent does not match a supported file type
2018-04-19 12:48:13,741 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:48:13,741 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id '03befc10-18d0-41f3-b275-544039fd7284' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:48:13,745 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:48:13,767 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:48:13,768 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:48:13,774 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:48:13,774 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:48:13,774 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:48:13,774 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:48:13,774 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:48:13,774 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:48:13,774 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:48:13,777 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:48:13,777 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Index' in controller 'Consent'.
2018-04-19 12:48:13,778 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/Index.cshtml'.
2018-04-19 12:48:13,779 - DEBUG - 【应用名称】 - The view 'Index' was found.
2018-04-19 12:48:13,779 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Consent/Index.cshtml.
2018-04-19 12:48:13,784 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Consent'.
2018-04-19 12:48:13,785 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:48:13,789 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:48:13,790 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:48:13,791 - DEBUG - 【应用名称】 - A new antiforgery cookie token was created.
2018-04-19 12:48:13,800 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:48:13,800 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/_ScopeListItem.cshtml'.
2018-04-19 12:48:13,808 - DEBUG - 【应用名称】 - View lookup cache hit for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:48:13,809 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Consent'.
2018-04-19 12:48:13,810 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:48:13,810 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 65.3475ms
2018-04-19 12:48:13,810 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:13,811 - INFO  - 【应用名称】 - Request finished in 70.5297ms 200 text/html; charset=utf-8
2018-04-19 12:48:17,238 - INFO  - 【应用名称】 - Request starting HTTP/1.1 POST http://ilogin.5173.com/consent application/x-www-form-urlencoded 1064
2018-04-19 12:48:17,246 - DEBUG - 【应用名称】 - CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-19 12:48:17,247 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:17,247 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:17,247 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:17,247 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:48:17,247 - DEBUG - 【应用名称】 - POST requests are not supported
2018-04-19 12:48:17,247 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:48:17,248 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id '459c86fa-782e-4db4-98b2-483ea6972431' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:48:17,263 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:48:17,264 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:48:17,305 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC", Request id "0HLD5M2LOQ1KC:00000008": started reading request body.
2018-04-19 12:48:17,316 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC", Request id "0HLD5M2LOQ1KC:00000008": done reading request body.
2018-04-19 12:48:17,320 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:48:17,320 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:48:17,322 - DEBUG - 【应用名称】 - Antiforgery successfully validated a request.
2018-04-19 12:48:17,361 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (IdentityServer4.Quickstart.UI.ConsentInputModel) - ModelState is Valid
2018-04-19 12:48:17,367 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:48:17,367 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:48:17,367 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:48:17,367 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:48:17,367 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:48:17,367 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:48:17,367 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:48:17,387 - INFO  - 【应用名称】 - Protecting message: {"Created":636597100970000000,"Data":{"Granted":true,"ScopesConsented":["openid","profile"],"RememberConsent":true}}
2018-04-19 12:48:17,388 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:48:17,390 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:48:17,390 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:48:17,390 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 127.3309ms
2018-04-19 12:48:17,392 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:17,392 - INFO  - 【应用名称】 - Request finished in 154.1825ms 302 
2018-04-19 12:48:17,401 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw&state=CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:48:17,401 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:17,401 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:17,401 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:48:17,401 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:48:17,401 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:48:17,401 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:48:17,401 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:48:17,404 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:48:17,427 - DEBUG - 【应用名称】 - User in authorize request: c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462
2018-04-19 12:48:17,427 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:48:17,427 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:48:17,427 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:48:17,428 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
  "Nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
  "SessionId": "59512465eee0c19b483a4c11965a087e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:48:17,428 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:48:17,428 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:48:17,428 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462 not found in store.
2018-04-19 12:48:17,428 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:48:17,428 - INFO  - 【应用名称】 - Consent was shown to user
2018-04-19 12:48:17,432 - INFO  - 【应用名称】 - User consented to scopes: openid, profile
2018-04-19 12:48:17,434 - DEBUG - 【应用名称】 - User indicated to remember consent for scopes: openid, profile
2018-04-19 12:48:17,437 - DEBUG - 【应用名称】 - Client allows remembering consent, and consent given. Updating consent store for subject: c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462
2018-04-19 12:48:17,456 - DEBUG - 【应用名称】 - Creating Implicit Flow response.
2018-04-19 12:48:17,463 - INFO  - 【应用名称】 - Creating identity token
2018-04-19 12:48:17,469 - DEBUG - 【应用名称】 - Getting claims for identity token for subject: c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462 and client: mvc.implicit
2018-04-19 12:48:17,475 - DEBUG - 【应用名称】 - Get profile called for subject c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462 from client MVC Implicit with claim types name, family_name, given_name, middle_name, nickname, preferred_username, profile, picture, website, gender, birthdate, zoneinfo, locale, updated_at via ClaimsProviderIdentityToken
2018-04-19 12:48:17,477 - DEBUG - 【应用名称】 - Issued claims: name
2018-04-19 12:48:17,483 - INFO  - 【应用名称】 - Creating JWT identity token
2018-04-19 12:48:17,540 - INFO  - 【应用名称】 - Identity token issued for mvc.implicit (MVC Implicit) / c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462: eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTMyOTcsImV4cCI6MTUyNDExMzU5NywiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAwNTMwNjg2NTM5Lk1ETXlOVFEwTldFdFltTTRNUzAwWkROaExUazVZekV0TTJZelltUXlOR0ptT0RBME1qZzJPREkzTWprdE9EY3lPUzAwTVRGakxXSm1OREl0WkRjeU1XRm1aamcyTXpZdyIsImlhdCI6MTUyNDExMzI5Nywic2lkIjoiNTk1MTI0NjVlZWUwYzE5YjQ4M2E0YzExOTY1YTA4N2UiLCJzdWIiOiJjMGZlY2NhNzU2NzZhOWZkNjIzMTk1OTkwZTdhOGRiMmZmNTY1MDZiYjVmZTNjNzhkNmU1MTZlNWFkZjdmNDYyIiwiYXV0aF90aW1lIjoxNTI0MTEzMjkzLCJpZHAiOiJXZUNoYXRDb21wYW55IiwibmFtZSI6Ijg2YTgyN2RmYTZhOTMyMWFmODljOWI5MDNkZGMzYTYxIiwiYW1yIjpbImV4dGVybmFsIl19.Rpg_xuXNdyh4_RPuE0WMJg5YUa3dCbaJvv5IzJrodlDfxZ82V9hfL5eacudah6wI0Bvu_eAJiaCy3NgzHraWvgvTe3j6KquSMyVRpzURHv1iWLqh4d6kIFgrOBRUX-fGiuQC9439YbnYD48rdzvqugfsv0yIT9vveTxEX__Prf9_xZksIMnagC-URKnSNUQHR0p_RfG5AIX6Ax5gfzLmPeIK_gm0vIq32lO-G27myhab1gtdk3SC8L1gMHHeU4_efxLCfuMGrjWjbiPMMZuAXD-dp8RN7OxqnPl4bOgMLH7SQVFDm7dLphhsCl4NW9YOiJ76CXMvntUNyNOUWujshQ
2018-04-19 12:48:17,551 - INFO  - 【应用名称】 - {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****jshQ"
    }
  ],
  "ActivityId": "0HLD5M2LOQ1KC:00000009",
  "TimeStamp": "2018-04-19T04:48:17Z",
  "ProcessId": 30588,
  "LocalIpAddress": "127.0.0.1:26562",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:48:17,554 - INFO  - 【应用名称】 - Authorize endpoint response
{
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEEWi5xyoosT644LnyD_CqpnzkCjmKvVdqQjrROxDDWGwJJnq9MWpIUUknPqVF3IR8oklswe379cprBE2fIWfP7U9ptDJb1f4QvhoAFynW56oWX1OvdoS-I7WIx3TPSFlhDma8AlsMdezMudg-Zrbv5ORtzveuU13slD_7YAQoeHEULbhS17Ca3iVkXkFrieHzos9yBIwUA8TA3HuCq291RNfimXR8LNFUsmdcAqxnETVa03cZNE5Q_84ex9UG4DL3RdWisBya2oMuxJIVOddUkPRDz93V35jX3gnBpgZyCYA",
  "Scope": "openid profile"
}
2018-04-19 12:48:17,554 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:48:17,555 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:48:17,575 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:48:17,575 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:48:17,575 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:48:17,584 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" completed keep alive response.
2018-04-19 12:48:17,584 - INFO  - 【应用名称】 - Request finished in 183.6187ms 200 text/html; charset=UTF-8
2018-04-19 12:49:35,355 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" reset.
2018-04-19 12:49:35,356 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" disconnecting.
2018-04-19 12:49:35,357 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" sending FIN.
2018-04-19 12:49:35,359 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KC" stopped.
2018-04-19 12:50:15,904 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" started.
2018-04-19 12:50:15,905 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/endsession?post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTMyOTcsImV4cCI6MTUyNDExMzU5NywiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAwNTMwNjg2NTM5Lk1ETXlOVFEwTldFdFltTTRNUzAwWkROaExUazVZekV0TTJZelltUXlOR0ptT0RBME1qZzJPREkzTWprdE9EY3lPUzAwTVRGakxXSm1OREl0WkRjeU1XRm1aamcyTXpZdyIsImlhdCI6MTUyNDExMzI5Nywic2lkIjoiNTk1MTI0NjVlZWUwYzE5YjQ4M2E0YzExOTY1YTA4N2UiLCJzdWIiOiJjMGZlY2NhNzU2NzZhOWZkNjIzMTk1OTkwZTdhOGRiMmZmNTY1MDZiYjVmZTNjNzhkNmU1MTZlNWFkZjdmNDYyIiwiYXV0aF90aW1lIjoxNTI0MTEzMjkzLCJpZHAiOiJXZUNoYXRDb21wYW55IiwibmFtZSI6Ijg2YTgyN2RmYTZhOTMyMWFmODljOWI5MDNkZGMzYTYxIiwiYW1yIjpbImV4dGVybmFsIl19.Rpg_xuXNdyh4_RPuE0WMJg5YUa3dCbaJvv5IzJrodlDfxZ82V9hfL5eacudah6wI0Bvu_eAJiaCy3NgzHraWvgvTe3j6KquSMyVRpzURHv1iWLqh4d6kIFgrOBRUX-fGiuQC9439YbnYD48rdzvqugfsv0yIT9vveTxEX__Prf9_xZksIMnagC-URKnSNUQHR0p_RfG5AIX6Ax5gfzLmPeIK_gm0vIq32lO-G27myhab1gtdk3SC8L1gMHHeU4_efxLCfuMGrjWjbiPMMZuAXD-dp8RN7OxqnPl4bOgMLH7SQVFDm7dLphhsCl4NW9YOiJ76CXMvntUNyNOUWujshQ&state=CfDJ8BcxKkS1QitAtv-9Siq0PiFVp95brcnccZr5Bq2BI4eBqz1-u_c6JC2mkxJSZkHaBnWfkNqzT-vGeuchUUJT8f-b2yreLjs29hFC61JEoYrPHXYJVbNj3Y4pNQeVeXnPj9L8-QXTQHk9c60NUFsYyEVwa4CYEOt7MH80oA8Pw2H4&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:50:15,905 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:50:15,905 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:50:15,905 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:50:15,905 - DEBUG - 【应用名称】 - Request path /connect/endsession matched to endpoint type Endsession
2018-04-19 12:50:15,906 - DEBUG - 【应用名称】 - Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-19 12:50:15,906 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-19 12:50:15,910 - DEBUG - 【应用名称】 - Processing signout request for c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462
2018-04-19 12:50:15,917 - DEBUG - 【应用名称】 - Start end session request validation
2018-04-19 12:50:15,933 - DEBUG - 【应用名称】 - Start identity token validation
2018-04-19 12:50:15,947 - DEBUG - 【应用名称】 - Client found: mvc.implicit / MVC Implicit
2018-04-19 12:50:15,990 - DEBUG - 【应用名称】 - IsActive called from: IdentityTokenValidation
2018-04-19 12:50:15,990 - DEBUG - 【应用名称】 - Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-19 12:50:15,993 - DEBUG - 【应用名称】 - Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524113297,
    "exp": 1524113597,
    "iss": "http://ilogin.5173.com",
    "aud": "mvc.implicit",
    "nonce": "636597100530686539.MDMyNTQ0NWEtYmM4MS00ZDNhLTk5YzEtM2YzYmQyNGJmODA0Mjg2ODI3MjktODcyOS00MTFjLWJmNDItZDcyMWFmZjg2MzYw",
    "iat": 1524113297,
    "sid": "59512465eee0c19b483a4c11965a087e",
    "sub": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
    "auth_time": 1524113293,
    "idp": "WeChatCompany",
    "name": "86a827dfa6a9321af89c9b903ddc3a61",
    "amr": "external"
  }
}
2018-04-19 12:50:15,999 - INFO  - 【应用名称】 - End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFVp95brcnccZr5Bq2BI4eBqz1-u_c6JC2mkxJSZkHaBnWfkNqzT-vGeuchUUJT8f-b2yreLjs29hFC61JEoYrPHXYJVbNj3Y4pNQeVeXnPj9L8-QXTQHk9c60NUFsYyEVwa4CYEOt7MH80oA8Pw2H4",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTMyOTcsImV4cCI6MTUyNDExMzU5NywiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAwNTMwNjg2NTM5Lk1ETXlOVFEwTldFdFltTTRNUzAwWkROaExUazVZekV0TTJZelltUXlOR0ptT0RBME1qZzJPREkzTWprdE9EY3lPUzAwTVRGakxXSm1OREl0WkRjeU1XRm1aamcyTXpZdyIsImlhdCI6MTUyNDExMzI5Nywic2lkIjoiNTk1MTI0NjVlZWUwYzE5YjQ4M2E0YzExOTY1YTA4N2UiLCJzdWIiOiJjMGZlY2NhNzU2NzZhOWZkNjIzMTk1OTkwZTdhOGRiMmZmNTY1MDZiYjVmZTNjNzhkNmU1MTZlNWFkZjdmNDYyIiwiYXV0aF90aW1lIjoxNTI0MTEzMjkzLCJpZHAiOiJXZUNoYXRDb21wYW55IiwibmFtZSI6Ijg2YTgyN2RmYTZhOTMyMWFmODljOWI5MDNkZGMzYTYxIiwiYW1yIjpbImV4dGVybmFsIl19.Rpg_xuXNdyh4_RPuE0WMJg5YUa3dCbaJvv5IzJrodlDfxZ82V9hfL5eacudah6wI0Bvu_eAJiaCy3NgzHraWvgvTe3j6KquSMyVRpzURHv1iWLqh4d6kIFgrOBRUX-fGiuQC9439YbnYD48rdzvqugfsv0yIT9vveTxEX__Prf9_xZksIMnagC-URKnSNUQHR0p_RfG5AIX6Ax5gfzLmPeIK_gm0vIq32lO-G27myhab1gtdk3SC8L1gMHHeU4_efxLCfuMGrjWjbiPMMZuAXD-dp8RN7OxqnPl4bOgMLH7SQVFDm7dLphhsCl4NW9YOiJ76CXMvntUNyNOUWujshQ",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFVp95brcnccZr5Bq2BI4eBqz1-u_c6JC2mkxJSZkHaBnWfkNqzT-vGeuchUUJT8f-b2yreLjs29hFC61JEoYrPHXYJVbNj3Y4pNQeVeXnPj9L8-QXTQHk9c60NUFsYyEVwa4CYEOt7MH80oA8Pw2H4",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:50:15,999 - DEBUG - 【应用名称】 - Success validating end session request from mvc.implicit
2018-04-19 12:50:16,000 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.EndSessionResult
2018-04-19 12:50:16,010 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,010 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" completed keep alive response.
2018-04-19 12:50:16,010 - INFO  - 【应用名称】 - Request finished in 105.2825ms 302 
2018-04-19 12:50:16,016 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/logout?logoutId=CfDJ8NW0HLAVUvFKlFyii0C31KoG7PzPwswk7TMcK5OWY3oIpf03j_P8dDLXPhEQ4EryAvuH6ztgcZtyFYlIq-bJPRIiWMeRqpDa0arH_XNE2sghH7jiXaAWzPHjyJe-AaLs7rQAdIoYvnuFkJzEpIi0bYf93K5Z24LS3bz25BYbLVf4eZmV2qDyRc26Z4531WIxBE-tE8_OWraDOteafdT13ogB1Mgb8SPyfSuVDW7O9DFHVhhQnHwYv_jCir1-rebaDmU8SvNYOwwWIBqxBJrZQ_4XtgOFx4YtDuEUDagwukz1Y2JwQ2kUjmy_jTDWKRFE-lNslQ-77TIb-Pay3IzsFJlUc1028RdhBn3TwlswORY5vckEonxMoOvUR0DotV4C_J9jGOyKpke6BjB9dWWmd7lH6JUTTUCzbgAwd13OAb8hoCm7dcFgBo-R-F0o5SSrAVg_m1CgNv-cS0Bunhlbt3pVpIyeALxijN5irb9dYM5PMigUNk88O-6Bzc5JgZoRyO2QmJT_lmanxfi6C4RzPXMdVqB7skK4GfWe_XG6dwaNL2J34PkMMUMdAbSYyJnQcEpUo21uHwnSMCM-s7xFhV5krrzBl8ol_vTxEfLfkk9txE0v49bF-Rex_CIOajA4g43kzqqC0XsqRvRAmOTgDCoGog3mQlD8OOTYAjTDSSGfal7iFKSuLtGPjAOxVdKKw8Rih31ANl5EcNWUkejN2m68Z2397uPjD5zrkZ_mbrSpkgfnPzCJ62UedxJCxFTwOj40niZw2RuWC_4KO5KA2zULp_jdXxxV9qhmN-ib3mdlPQeDa4ySyFpM1D8Plj2Wv0JDWlQuGQduW_I5xnoDt-0cd5pjTCgvQeZXN0UV3nO4LQ1801w5aOb3-5eViBG7Wx18etEChsoKUol6hLvq2-Q  
2018-04-19 12:50:16,017 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:50:16,017 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:50:16,017 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:50:16,017 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/logout
2018-04-19 12:50:16,017 - DEBUG - 【应用名称】 - The request path /account/logout does not match a supported file type
2018-04-19 12:50:16,017 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:50:16,017 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Logout (Host)' with id 'c414621f-045c-4175-8bf3-2881da5be96d' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:50:16,021 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Logout (Host)
2018-04-19 12:50:16,022 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host) with arguments (CfDJ8NW0HLAVUvFKlFyii0C31KoG7PzPwswk7TMcK5OWY3oIpf03j_P8dDLXPhEQ4EryAvuH6ztgcZtyFYlIq-bJPRIiWMeRqpDa0arH_XNE2sghH7jiXaAWzPHjyJe-AaLs7rQAdIoYvnuFkJzEpIi0bYf93K5Z24LS3bz25BYbLVf4eZmV2qDyRc26Z4531WIxBE-tE8_OWraDOteafdT13ogB1Mgb8SPyfSuVDW7O9DFHVhhQnHwYv_jCir1-rebaDmU8SvNYOwwWIBqxBJrZQ_4XtgOFx4YtDuEUDagwukz1Y2JwQ2kUjmy_jTDWKRFE-lNslQ-77TIb-Pay3IzsFJlUc1028RdhBn3TwlswORY5vckEonxMoOvUR0DotV4C_J9jGOyKpke6BjB9dWWmd7lH6JUTTUCzbgAwd13OAb8hoCm7dcFgBo-R-F0o5SSrAVg_m1CgNv-cS0Bunhlbt3pVpIyeALxijN5irb9dYM5PMigUNk88O-6Bzc5JgZoRyO2QmJT_lmanxfi6C4RzPXMdVqB7skK4GfWe_XG6dwaNL2J34PkMMUMdAbSYyJnQcEpUo21uHwnSMCM-s7xFhV5krrzBl8ol_vTxEfLfkk9txE0v49bF-Rex_CIOajA4g43kzqqC0XsqRvRAmOTgDCoGog3mQlD8OOTYAjTDSSGfal7iFKSuLtGPjAOxVdKKw8Rih31ANl5EcNWUkejN2m68Z2397uPjD5zrkZ_mbrSpkgfnPzCJ62UedxJCxFTwOj40niZw2RuWC_4KO5KA2zULp_jdXxxV9qhmN-ib3mdlPQeDa4ySyFpM1D8Plj2Wv0JDWlQuGQduW_I5xnoDt-0cd5pjTCgvQeZXN0UV3nO4LQ1801w5aOb3-5eViBG7Wx18etEChsoKUol6hLvq2-Q) - ModelState is Valid
2018-04-19 12:50:16,029 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,041 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,050 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,050 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,053 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed out.
2018-04-19 12:50:16,057 - INFO  - 【应用名称】 - {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "c0fecca75676a9fd623195990e7a8db2ff56506bb5fe3c78d6e516e5adf7f462",
  "DisplayName": "86a827dfa6a9321af89c9b903ddc3a61",
  "ActivityId": "0HLD5M2LOQ1KD:00000002",
  "TimeStamp": "2018-04-19T04:50:16Z",
  "ProcessId": 30588,
  "LocalIpAddress": "127.0.0.1:26562",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:50:16,057 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:50:16,057 - DEBUG - 【应用名称】 - View lookup cache miss for view 'LoggedOut' in controller 'Account'.
2018-04-19 12:50:16,058 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/LoggedOut.cshtml'.
2018-04-19 12:50:16,058 - DEBUG - 【应用名称】 - The view 'LoggedOut' was found.
2018-04-19 12:50:16,058 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/LoggedOut.cshtml.
2018-04-19 12:50:16,063 - DEBUG - 【应用名称】 - View lookup cache hit for view '_Layout' in controller 'Account'.
2018-04-19 12:50:16,067 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Logout (Host) in 45.0674ms
2018-04-19 12:50:16,067 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" completed keep alive response.
2018-04-19 12:50:16,067 - INFO  - 【应用名称】 - Request finished in 50.238ms 200 text/html; charset=utf-8
2018-04-19 12:50:16,110 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/endsession/callback?endSessionId=CfDJ8NW0HLAVUvFKlFyii0C31KqxHGz6F1XwM1nOanCLCd1W2YLacjQtnCen_9oiaXBn7CdlxMQSrpC4eipVNbAwq3_xPHaYjZH5AGr3itZCHFLp6GFHe_9xIDVjVclR0cXvCTLs9bZvKSU6kTefgr8GavIHP1tDkJ9Xb_UFuL0yr75oDcB7tEeHnJnZWEScIcI2v0VzgBkh4FWvtT9EMVI7yPujj1oTyY0-a1lKRaKbioBmUaqjsNabTu9Q4UQ7W45gVc7s3efhHSgvV6vd9P7FySr8zQmIv2XVIgTb4ePELRgyQ_7XbL3c4-haesyqVAqVYahcGYdn2vC6u-GBYtzl5eUacT5A9tjfA97TQX613TsjcvAyFVWEUq8l16rmc_rwtw  
2018-04-19 12:50:16,111 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:50:16,111 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:50:16,111 - DEBUG - 【应用名称】 - Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-19 12:50:16,112 - DEBUG - 【应用名称】 - Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-19 12:50:16,112 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-19 12:50:16,116 - DEBUG - 【应用名称】 - Processing signout callback request
2018-04-19 12:50:16,122 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:50:16,129 - DEBUG - 【应用名称】 - Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=59512465eee0c19b483a4c11965a087e&iss=http%3A%2F%2Filogin.5173.com
2018-04-19 12:50:16,129 - DEBUG - 【应用名称】 - No client back-channel logout URLs
2018-04-19 12:50:16,130 - INFO  - 【应用名称】 - Successful signout callback.
2018-04-19 12:50:16,130 - DEBUG - 【应用名称】 - Client front-channel iframe urls: http://localhost:5005/signout-oidc?sid=59512465eee0c19b483a4c11965a087e&iss=http%3A%2F%2Filogin.5173.com
2018-04-19 12:50:16,130 - DEBUG - 【应用名称】 - No client back-channel iframe urls
2018-04-19 12:50:16,132 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.EndSessionCallbackResult
2018-04-19 12:50:16,136 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" completed keep alive response.
2018-04-19 12:50:16,137 - INFO  - 【应用名称】 - Request finished in 26.449ms 200 text/html; charset=UTF-8
2018-04-19 12:50:25,813 - DEBUG - 【应用名称】 - Hosting shutdown
2018-04-19 12:50:25,837 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" disconnecting.
2018-04-19 12:50:25,837 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" sending FIN.
2018-04-19 12:50:25,837 - DEBUG - 【应用名称】 - Connection id "0HLD5M2LOQ1KD" stopped.
2018-04-19 12:51:51,902 - INFO  - 【应用名称】 - User profile not available. Using 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-19 12:51:51,934 - DEBUG - 【应用名称】 - Reading data from registry key 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection', value 'key-b01cb4d5-5215-4af1-945c-a28b40b7d4aa'.
2018-04-19 12:51:51,939 - DEBUG - 【应用名称】 - Found key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa}.
2018-04-19 12:51:51,955 - DEBUG - 【应用名称】 - Considering key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with expiration date 2018-07-17 05:33:20Z as default key.
2018-04-19 12:51:51,974 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:51:51,977 - DEBUG - 【应用名称】 - Decrypting secret element using Windows DPAPI.
2018-04-19 12:51:51,981 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:51:51,989 - DEBUG - 【应用名称】 - Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC.
2018-04-19 12:51:51,996 - DEBUG - 【应用名称】 - Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC.
2018-04-19 12:51:52,010 - DEBUG - 【应用名称】 - Using key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} as the default key.
2018-04-19 12:51:52,013 - DEBUG - 【应用名称】 - Key ring with default key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} was loaded during application startup.
2018-04-19 12:51:52,028 - INFO  - 【应用名称】 - You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-19 12:51:52,048 - DEBUG - 【应用名称】 - Using idsrv as default scheme for authentication
2018-04-19 12:51:52,049 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-in
2018-04-19 12:51:52,049 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-out
2018-04-19 12:51:52,049 - DEBUG - 【应用名称】 - Using idsrv as default scheme for challenge
2018-04-19 12:51:52,049 - DEBUG - 【应用名称】 - Using idsrv as default scheme for forbid
2018-04-19 12:51:52,277 - DEBUG - 【应用名称】 - Hosting starting
2018-04-19 12:51:52,398 - DEBUG - 【应用名称】 - Hosting started
2018-04-19 12:51:52,399 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Host
2018-04-19 12:51:52,399 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Microsoft.AspNetCore.Server.IISIntegration
2018-04-19 12:51:52,637 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" started.
2018-04-19 12:51:52,798 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:51:53,150 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,173 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,177 - DEBUG - 【应用名称】 - Request path /connect/authorize matched to endpoint type Authorize
2018-04-19 12:51:53,185 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-19 12:51:53,185 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-19 12:51:53,193 - DEBUG - 【应用名称】 - Start authorize request
2018-04-19 12:51:53,210 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,218 - DEBUG - 【应用名称】 - No user present in authorize request
2018-04-19 12:51:53,226 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:51:53,307 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:51:53,308 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:51:53,420 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
  "Nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:51:53,425 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:51:53,433 - INFO  - 【应用名称】 - Showing login: User is not authenticated
2018-04-19 12:51:53,433 - INFO  - 【应用名称】 - End authorize request. result type: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:51:53,433 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:51:53,510 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" completed keep alive response.
2018-04-19 12:51:53,520 - INFO  - 【应用名称】 - Request finished in 729.5751ms 302 
2018-04-19 12:51:53,536 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:51:53,536 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,537 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,537 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:51:53,538 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" started.
2018-04-19 12:51:53,545 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:51:53,545 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,545 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:53,546 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:51:53,548 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:51:53,549 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:51:53,852 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:51:53,852 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:51:53,889 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id '479cebea-2d27-41c0-9d04-9276397342f5' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:51:53,889 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id '479cebea-2d27-41c0-9d04-9276397342f5' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:51:54,003 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:51:54,003 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:51:54,160 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:51:54,160 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:51:54,179 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:51:54,179 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:51:54,182 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:51:54,182 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:51:54,184 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:54,184 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:51:54,184 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:51:54,184 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:51:54,184 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:51:54,184 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:54,185 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:51:54,185 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:51:54,186 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:51:54,186 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:51:54,186 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:51:54,186 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:51:54,193 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:51:54,193 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:51:54,241 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Login' in controller 'Account'.
2018-04-19 12:51:54,241 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Login' in controller 'Account'.
2018-04-19 12:51:54,289 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/Login.cshtml'.
2018-04-19 12:51:54,289 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/Login.cshtml'.
2018-04-19 12:51:54,296 - DEBUG - 【应用名称】 - The view 'Login' was found.
2018-04-19 12:51:54,296 - DEBUG - 【应用名称】 - The view 'Login' was found.
2018-04-19 12:51:54,298 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Login.cshtml.
2018-04-19 12:51:54,298 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Login.cshtml.
2018-04-19 12:51:54,404 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Account'.
2018-04-19 12:51:54,404 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Account'.
2018-04-19 12:51:54,405 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:51:54,405 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:51:54,478 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:51:54,478 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:51:54,497 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:51:54,497 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:51:54,502 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:51:54,502 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:51:54,678 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Account'.
2018-04-19 12:51:54,678 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Account'.
2018-04-19 12:51:54,679 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:51:54,679 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:51:54,777 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 771.4659ms
2018-04-19 12:51:54,777 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 771.3632ms
2018-04-19 12:51:54,784 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" completed keep alive response.
2018-04-19 12:51:54,784 - INFO  - 【应用名称】 - Request finished in 1248.2432ms 200 text/html; charset=utf-8
2018-04-19 12:51:54,784 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" completed keep alive response.
2018-04-19 12:51:54,784 - INFO  - 【应用名称】 - Request finished in 1239.3624ms 200 text/html; charset=utf-8
2018-04-19 12:51:57,568 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLogin?provider=WeChatCompany&returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:51:57,569 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:57,569 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:51:57,569 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLogin
2018-04-19 12:51:57,569 - DEBUG - 【应用名称】 - The request path /account/ExternalLogin does not match a supported file type
2018-04-19 12:51:57,570 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:51:57,578 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host)
2018-04-19 12:51:57,580 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) with arguments (WeChatCompany, /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:51:57,585 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host), returned result Microsoft.AspNetCore.Mvc.ChallengeResult.
2018-04-19 12:51:57,590 - INFO  - 【应用名称】 - Executing ChallengeResult with authentication schemes (WeChatCompany).
2018-04-19 12:51:57,633 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:51:57,635 - INFO  - 【应用名称】 - AuthenticationScheme: WeChatCompany was challenged.
2018-04-19 12:51:57,636 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) in 57.4932ms
2018-04-19 12:51:57,636 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" completed keep alive response.
2018-04-19 12:51:57,636 - INFO  - 【应用名称】 - Request finished in 67.2854ms 302 
2018-04-19 12:52:08,391 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/signin-WeChatCompany?code=8YXlNngrroBfVbuIWqmNjpEFGpKZ8LeA6vt8tUyi93k&state=CfDJ8NW0HLAVUvFKlFyii0C31KqFvQ_h9dsQBuf-Qbk_iNlbHZCoirgisrR8bWUKcZAooGhgrB-V1he-t8oVOFTMGFsQvl57IhpVwASLXiHvF-iFK1dTm835Mb_sQLf5yVYiqjI04CDU0njyXSN6cfIVt_4WcYxcO7Sy5CyknVvO74pbVsoEmvPXXGyCQceUnRl0llymnDCdjicY2wHwA2kCc0jM_Cy05LltSqCOtB3mD94o5Aab1_4BSBowcWY_VkfOHHsQ_f8rX1DZoKa3BMhfzXRFRlzsS7Y8gTjLbaUg_OF3KqVNqgEyY3Gd-sLf8Twy2wvaCw5XkTGEoH8ElXchkiQ13HfPO7r3WfXmMiHHuy53VOgX8dNS4npc5x5mm8ACzodWLQhej7DRmIFGHIVl6nZ-ja6RiMixVdzrQN2UoLUa1WJM8VLzknKcb2cE1dP0LfBjS_ULfCetDcxKBh1QMiSRc71P8UCpGyBhcE60e37jyhLBIxFxxalexsIRQwATrb214a_MhFD9qhSqYzz17t9WSmb4EfHbgGmEdy9X7WTNRLfFjErqOmN0pbIjTB8kiCeq3mBc0xOdRGYzUDnGdZR8KUrrzrsdsCxBU0A97cI3xYyFHBvUIfWPRvpbESvXFTIkYK7GtlZltPyvJ3xPG4o6zd2mBnDzuSd4s6F9RWjUKiDAq7XuKpuUwD29MB5UpdvNMeOwYvClXDaFWAi_tjMF-d3xzN5l0API2znipmhhr7vIeiYDSX24a85LlP-Zl5hMl5IVBD7P7aXtjg3rjD0x9N8coqCQXSU-L0DJ18mIdztNFjHyZNiNrfVJYf8yjSdSjb1HVtMSfXjzH6J6vno518QeOUH17ekT6EPkiBuMuKTnXHfuQj8I13OLtVGksGpQ-EvDSr3XYeL6Nv__ZzU9gxcXB0Gnh9Er-H3Bxm7w6yo4h40hpPVghSnfYXtL-01ijhvw1_4AlnjutKZXK7ftDJKOXzHLzgSRRJd7yXBcLdnGkWZGCAORfjf52S_DeEAEINAmzkDtCeuF_fngQVtITEPW7SxO5B_FevDbomQTEsBBoh6U3T3KnvT88ssCc7OiAUuS59sXAbeYwiZmlsOi5AoWPCwF-DnwoWPzoCufDlD8fLf_fur4iSBY9BdpTDrVbOCI0c5tTLqt61xcbjfw0gZG9IoLRERNtHVLUVsk&appid=ww85a6abac8a4faac6  
2018-04-19 12:52:08,405 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:52:22,152 - DEBUG - 【应用名称】 - payload : {
  "access_token": "U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ",
  "code": "8YXlNngrroBfVbuIWqmNjpEFGpKZ8LeA6vt8tUyi93k"
}
2018-04-19 12:52:24,579 - DEBUG - 【应用名称】 - userInformationEndpoint : https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?access_token=U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ&code=8YXlNngrroBfVbuIWqmNjpEFGpKZ8LeA6vt8tUyi93k
2018-04-19 12:52:26,985 - DEBUG - 【应用名称】 - {"UserId":"86a827dfa6a9321af89c9b903ddc3a61","DeviceId":"","errcode":0,"errmsg":"ok"}
2018-04-19 12:52:26,987 - DEBUG - 【应用名称】 - success
2018-04-19 12:52:26,991 - DEBUG - 【应用名称】 - success2
2018-04-19 12:52:26,992 - DEBUG - 【应用名称】 - context.Principal:
2018-04-19 12:52:26,997 - DEBUG - 【应用名称】 - context.Properties:
2018-04-19 12:52:26,997 - DEBUG - 【应用名称】 - Scheme.Name:
2018-04-19 12:52:27,022 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:52:27,031 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed in.
2018-04-19 12:52:27,032 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" completed keep alive response.
2018-04-19 12:52:27,032 - INFO  - 【应用名称】 - Request finished in 18641.7823ms 302 
2018-04-19 12:52:27,043 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLoginCallback  
2018-04-19 12:52:27,043 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:52:27,044 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:52:27,044 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLoginCallback
2018-04-19 12:52:27,044 - DEBUG - 【应用名称】 - The request path /account/ExternalLoginCallback does not match a supported file type
2018-04-19 12:52:27,044 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:52:27,050 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host)
2018-04-19 12:52:27,051 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) with arguments ((null)) - ModelState is Valid
2018-04-19 12:52:27,058 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:52:27,063 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-19 12:52:27,065 - DEBUG - 【应用名称】 - provider:WeChatCompany
2018-04-19 12:52:27,109 - INFO  - 【应用名称】 - {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "WeChatCompany",
  "ProviderUserId": "86a827dfa6a9321af89c9b903ddc3a61",
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "DisplayName": "86a827dfa6a9321af89c9b903ddc3a61",
  "Endpoint": "UI",
  "ActivityId": "0HLD5M52E5DUS:00000004",
  "TimeStamp": "2018-04-19T04:52:27Z",
  "ProcessId": 30636,
  "LocalIpAddress": "127.0.0.1:13887",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:52:27,120 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:52:27,122 - DEBUG - 【应用名称】 - Adding amr claim with value: external
2018-04-19 12:52:27,124 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:52:27,125 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:52:27,125 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:52:27,140 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed out.
2018-04-19 12:52:27,141 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:52:27,141 - INFO  - 【应用名称】 - IsValidReturnUrl true
2018-04-19 12:52:27,143 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:52:27,145 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:52:27,145 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) in 94.8569ms
2018-04-19 12:52:27,145 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" completed keep alive response.
2018-04-19 12:52:27,145 - INFO  - 【应用名称】 - Request finished in 102.303ms 302 
2018-04-19 12:52:27,155 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:52:27,156 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:52:27,156 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:52:27,156 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:52:27,157 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:52:27,157 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:52:27,157 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:52:27,164 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:52:27,168 - DEBUG - 【应用名称】 - User in authorize request: b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379
2018-04-19 12:52:27,168 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:52:27,168 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:52:27,168 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:52:27,169 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
  "Nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
  "SessionId": "7270ef392b38c48966b23697bdc298a6",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:52:27,169 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:52:27,170 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:52:27,188 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379 not found in store.
2018-04-19 12:52:27,189 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:52:27,189 - INFO  - 【应用名称】 - Showing consent: User has not yet consented
2018-04-19 12:52:27,189 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:52:27,189 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:52:27,190 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" completed keep alive response.
2018-04-19 12:52:27,190 - INFO  - 【应用名称】 - Request finished in 35.0096ms 302 
2018-04-19 12:52:27,200 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/consent?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:52:27,200 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:52:27,200 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:52:27,200 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:52:27,200 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:52:27,201 - DEBUG - 【应用名称】 - The request path /consent does not match a supported file type
2018-04-19 12:52:27,201 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:52:27,201 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id 'b168f90a-760f-42b5-9173-429dd361a887' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:52:27,206 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:52:27,234 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:52:27,234 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:52:27,243 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:52:27,243 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:52:27,243 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:52:27,243 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:52:27,243 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:52:27,243 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:52:27,243 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:52:27,247 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:52:27,247 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Index' in controller 'Consent'.
2018-04-19 12:52:27,249 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/Index.cshtml'.
2018-04-19 12:52:27,249 - DEBUG - 【应用名称】 - The view 'Index' was found.
2018-04-19 12:52:27,249 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Consent/Index.cshtml.
2018-04-19 12:52:27,256 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Consent'.
2018-04-19 12:52:27,256 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:52:27,265 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:52:27,266 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:52:27,267 - DEBUG - 【应用名称】 - A new antiforgery cookie token was created.
2018-04-19 12:52:27,278 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:52:27,279 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/_ScopeListItem.cshtml'.
2018-04-19 12:52:27,286 - DEBUG - 【应用名称】 - View lookup cache hit for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:52:27,288 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Consent'.
2018-04-19 12:52:27,289 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:52:27,291 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 84.8553ms
2018-04-19 12:52:27,291 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" completed keep alive response.
2018-04-19 12:52:27,291 - INFO  - 【应用名称】 - Request finished in 90.9313ms 200 text/html; charset=utf-8
2018-04-19 12:53:29,477 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" reset.
2018-04-19 12:53:29,478 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" started.
2018-04-19 12:53:29,479 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" reset.
2018-04-19 12:53:29,479 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" disconnecting.
2018-04-19 12:53:29,479 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" disconnecting.
2018-04-19 12:53:29,481 - INFO  - 【应用名称】 - Request starting HTTP/1.1 POST http://ilogin.5173.com/consent application/x-www-form-urlencoded 1040
2018-04-19 12:53:29,486 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" sending FIN.
2018-04-19 12:53:29,489 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" sending FIN.
2018-04-19 12:53:29,489 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUS" stopped.
2018-04-19 12:53:29,489 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUT" stopped.
2018-04-19 12:53:29,490 - DEBUG - 【应用名称】 - CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-19 12:53:29,490 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:53:29,491 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:53:29,491 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:53:29,491 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:53:29,491 - DEBUG - 【应用名称】 - POST requests are not supported
2018-04-19 12:53:29,491 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:53:29,493 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id '3e037bfa-c261-4df1-968f-e5edb39647f6' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:53:29,516 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:53:29,518 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:53:29,579 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU", Request id "0HLD5M52E5DUU:00000001": started reading request body.
2018-04-19 12:53:29,600 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU", Request id "0HLD5M52E5DUU:00000001": done reading request body.
2018-04-19 12:53:29,607 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:53:29,607 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:53:29,611 - DEBUG - 【应用名称】 - Antiforgery successfully validated a request.
2018-04-19 12:53:29,682 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (IdentityServer4.Quickstart.UI.ConsentInputModel) - ModelState is Valid
2018-04-19 12:53:29,694 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:53:29,694 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:53:29,695 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:53:29,695 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:53:29,695 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:53:29,695 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:53:29,695 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:53:29,721 - INFO  - 【应用名称】 - Protecting message: {"Created":636597104090000000,"Data":{"Granted":true,"ScopesConsented":["openid"],"RememberConsent":true}}
2018-04-19 12:53:29,722 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:53:29,725 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:53:29,725 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:53:29,725 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 208.8885ms
2018-04-19 12:53:29,728 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" completed keep alive response.
2018-04-19 12:53:29,728 - INFO  - 【应用名称】 - Request finished in 246.5238ms 302 
2018-04-19 12:53:29,737 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli&state=CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:53:29,737 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:53:29,737 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:53:29,737 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:53:29,738 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:53:29,738 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:53:29,738 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:53:29,738 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:53:29,741 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - User in authorize request: b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:53:29,775 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:53:29,775 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
  "Nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
  "SessionId": "7270ef392b38c48966b23697bdc298a6",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597103101716539.MDllMjcwMjgtNjRjMS00OGQ3LWFjMTMtYTBkMWRiOTI2NDQ4ODc1OGM3MTktNzhiZC00YmVmLWIzYjAtZWYyYzViMmFkMzli",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:53:29,775 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379 not found in store.
2018-04-19 12:53:29,775 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:53:29,776 - INFO  - 【应用名称】 - Consent was shown to user
2018-04-19 12:53:29,783 - INFO  - 【应用名称】 - User consented to scopes: openid
2018-04-19 12:53:29,784 - DEBUG - 【应用名称】 - User indicated to remember consent for scopes: openid
2018-04-19 12:53:29,789 - DEBUG - 【应用名称】 - Client allows remembering consent, and consent given. Updating consent store for subject: b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379
2018-04-19 12:53:29,813 - DEBUG - 【应用名称】 - Creating Implicit Flow response.
2018-04-19 12:53:29,819 - INFO  - 【应用名称】 - Creating identity token
2018-04-19 12:53:29,824 - DEBUG - 【应用名称】 - Getting claims for identity token for subject: b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379 and client: mvc.implicit
2018-04-19 12:53:29,829 - DEBUG - 【应用名称】 - Get profile called for subject b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379 from client MVC Implicit with claim types  via ClaimsProviderIdentityToken
2018-04-19 12:53:29,831 - DEBUG - 【应用名称】 - Issued claims: 
2018-04-19 12:53:29,836 - INFO  - 【应用名称】 - Creating JWT identity token
2018-04-19 12:53:29,903 - INFO  - 【应用名称】 - Identity token issued for mvc.implicit (MVC Implicit) / b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379: eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTM2MDksImV4cCI6MTUyNDExMzkwOSwiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAzMTAxNzE2NTM5Lk1EbGxNamN3TWpndE5qUmpNUzAwT0dRM0xXRmpNVE10WVRCa01XUmlPVEkyTkRRNE9EYzFPR00zTVRrdE56aGlaQzAwWW1WbUxXSXpZakF0WldZeVl6VmlNbUZrTXpsaSIsImlhdCI6MTUyNDExMzYwOSwic2lkIjoiNzI3MGVmMzkyYjM4YzQ4OTY2YjIzNjk3YmRjMjk4YTYiLCJzdWIiOiJiMTVhYjMwMmU2MmE1NzQyOWQxYTQ0NTAzOWVmODBmZjk5MWQwODVmODg2NTM4NDliOTZjNDgxYjg4Mzk1Mzc5IiwiYXV0aF90aW1lIjoxNTI0MTEzNTQ3LCJpZHAiOiJXZUNoYXRDb21wYW55IiwiYW1yIjpbImV4dGVybmFsIl19.XRI1FQ2fNu8D6Q5_K6-CNmDtXAXUMJDDNpKOewicIT-lVeatyi4cADTv3Er2uQBc1SI3cup5E1gInU6igtc7eFvfs4OzjDMOK4WiJoNaol4cP5KYjhsre9TsmTfrEoXQtqccl5Gmax9kzUjuBxSIWQ-XD3RWaEmhduUA74f5LFNrslZZmjY68r7zfsB51YIElFWCVOMEWSvAQIbqhvne7jGJOev0wopgqXq9KOKJ2NhE5mdSt7NINga7njLlkoPvp95Dj5SiLrBAeEiPjGKrj8imVa_u-0itF_vh9resiYK-h2__opCRtJy-IWOKdS4bzj1YhaSa9yFiJDup74kEpQ
2018-04-19 12:53:29,915 - INFO  - 【应用名称】 - {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "Scopes": "openid",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kEpQ"
    }
  ],
  "ActivityId": "0HLD5M52E5DUU:00000002",
  "TimeStamp": "2018-04-19T04:53:29Z",
  "ProcessId": 30636,
  "LocalIpAddress": "127.0.0.1:13887",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:53:29,920 - INFO  - 【应用名称】 - Authorize endpoint response
{
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGzPBO10W97SOqDrEAER5HCpGcUcBqRLHqULpC6Nd-RxsQ4g0dsQ8j6-uIveHeY3eH6uzkQq7uN-CN-2dl6GUjYUR8rPNfyk7ZJtx9alPolbDCRe2eWw5oA8WDubpBW6LScMCJGyW9BvuPQoy13VrUtc_ANP4wpITt74z549nRyUXksoqok8At_hUYunpKd5rEtDwr7SEnYYe6wevyhBGH9U60qnxYebc8WQELb0pl4_ipGzHj-HgzAUzdxtyjglH3NPsOPPm3CMypNz-P1s6GYLaSB4d8XcOMGYFLLPRW87g",
  "Scope": "openid"
}
2018-04-19 12:53:29,920 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:53:29,922 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:53:29,942 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:53:29,943 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:53:29,943 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:53:29,951 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" completed keep alive response.
2018-04-19 12:53:29,952 - INFO  - 【应用名称】 - Request finished in 214.6274ms 200 text/html; charset=UTF-8
2018-04-19 12:54:22,871 - DEBUG - 【应用名称】 - Hosting shutdown
2018-04-19 12:54:22,893 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" disconnecting.
2018-04-19 12:54:22,894 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" sending FIN.
2018-04-19 12:54:22,895 - DEBUG - 【应用名称】 - Connection id "0HLD5M52E5DUU" stopped.
2018-04-19 12:55:01,313 - INFO  - 【应用名称】 - User profile not available. Using 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection' as key repository and Windows DPAPI to encrypt keys at rest.
2018-04-19 12:55:01,342 - DEBUG - 【应用名称】 - Reading data from registry key 'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\AutoGenKeys\S-1-5-82-3185876732-1663450639-2734485821-1498328541-2570041999\DataProtection', value 'key-b01cb4d5-5215-4af1-945c-a28b40b7d4aa'.
2018-04-19 12:55:01,347 - DEBUG - 【应用名称】 - Found key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa}.
2018-04-19 12:55:01,361 - DEBUG - 【应用名称】 - Considering key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with expiration date 2018-07-17 05:33:20Z as default key.
2018-04-19 12:55:01,378 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:55:01,381 - DEBUG - 【应用名称】 - Decrypting secret element using Windows DPAPI.
2018-04-19 12:55:01,384 - DEBUG - 【应用名称】 - Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=2.0.2.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2018-04-19 12:55:01,391 - DEBUG - 【应用名称】 - Opening CNG algorithm 'AES' from provider '(null)' with chaining mode CBC.
2018-04-19 12:55:01,399 - DEBUG - 【应用名称】 - Opening CNG algorithm 'SHA256' from provider '(null)' with HMAC.
2018-04-19 12:55:01,412 - DEBUG - 【应用名称】 - Using key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} as the default key.
2018-04-19 12:55:01,415 - DEBUG - 【应用名称】 - Key ring with default key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} was loaded during application startup.
2018-04-19 12:55:01,429 - INFO  - 【应用名称】 - You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-19 12:55:01,447 - DEBUG - 【应用名称】 - Using idsrv as default scheme for authentication
2018-04-19 12:55:01,448 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-in
2018-04-19 12:55:01,448 - DEBUG - 【应用名称】 - Using idsrv as default scheme for sign-out
2018-04-19 12:55:01,448 - DEBUG - 【应用名称】 - Using idsrv as default scheme for challenge
2018-04-19 12:55:01,448 - DEBUG - 【应用名称】 - Using idsrv as default scheme for forbid
2018-04-19 12:55:01,679 - DEBUG - 【应用名称】 - Hosting starting
2018-04-19 12:55:01,800 - DEBUG - 【应用名称】 - Hosting started
2018-04-19 12:55:01,800 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Host
2018-04-19 12:55:01,800 - DEBUG - 【应用名称】 - Loaded hosting startup assembly Microsoft.AspNetCore.Server.IISIntegration
2018-04-19 12:55:01,916 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" started.
2018-04-19 12:55:02,083 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/endsession?post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTM2MDksImV4cCI6MTUyNDExMzkwOSwiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAzMTAxNzE2NTM5Lk1EbGxNamN3TWpndE5qUmpNUzAwT0dRM0xXRmpNVE10WVRCa01XUmlPVEkyTkRRNE9EYzFPR00zTVRrdE56aGlaQzAwWW1WbUxXSXpZakF0WldZeVl6VmlNbUZrTXpsaSIsImlhdCI6MTUyNDExMzYwOSwic2lkIjoiNzI3MGVmMzkyYjM4YzQ4OTY2YjIzNjk3YmRjMjk4YTYiLCJzdWIiOiJiMTVhYjMwMmU2MmE1NzQyOWQxYTQ0NTAzOWVmODBmZjk5MWQwODVmODg2NTM4NDliOTZjNDgxYjg4Mzk1Mzc5IiwiYXV0aF90aW1lIjoxNTI0MTEzNTQ3LCJpZHAiOiJXZUNoYXRDb21wYW55IiwiYW1yIjpbImV4dGVybmFsIl19.XRI1FQ2fNu8D6Q5_K6-CNmDtXAXUMJDDNpKOewicIT-lVeatyi4cADTv3Er2uQBc1SI3cup5E1gInU6igtc7eFvfs4OzjDMOK4WiJoNaol4cP5KYjhsre9TsmTfrEoXQtqccl5Gmax9kzUjuBxSIWQ-XD3RWaEmhduUA74f5LFNrslZZmjY68r7zfsB51YIElFWCVOMEWSvAQIbqhvne7jGJOev0wopgqXq9KOKJ2NhE5mdSt7NINga7njLlkoPvp95Dj5SiLrBAeEiPjGKrj8imVa_u-0itF_vh9resiYK-h2__opCRtJy-IWOKdS4bzj1YhaSa9yFiJDup74kEpQ&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHizuSgLK8bq4SUw_hCitN7y3qkTKkzlsO5xI7oouqHLKpJ-wD7K23DRJ7PEJE89rCFlAyXnHqWycBGzwAZ59a1LzTBx-3afvhbc_w9FGguFOvJfGxT65S11xcST57yofxKqdC-hlAGlFr03tbL4kmX&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:55:02,359 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:02,375 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:02,394 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:02,397 - DEBUG - 【应用名称】 - Request path /connect/endsession matched to endpoint type Endsession
2018-04-19 12:55:02,401 - DEBUG - 【应用名称】 - Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-19 12:55:02,401 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-19 12:55:02,421 - DEBUG - 【应用名称】 - Processing signout request for b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379
2018-04-19 12:55:02,428 - DEBUG - 【应用名称】 - Start end session request validation
2018-04-19 12:55:02,439 - DEBUG - 【应用名称】 - Start identity token validation
2018-04-19 12:55:02,514 - DEBUG - 【应用名称】 - Client found: mvc.implicit / MVC Implicit
2018-04-19 12:55:02,614 - DEBUG - 【应用名称】 - IsActive called from: IdentityTokenValidation
2018-04-19 12:55:02,615 - ERROR - 【应用名称】 - User marked as not active: b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379
2018-04-19 12:55:02,653 - INFO  - 【应用名称】 - End session request validation failure: Error validating id token hint
{
  "SubjectId": "unknown",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTM2MDksImV4cCI6MTUyNDExMzkwOSwiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTAzMTAxNzE2NTM5Lk1EbGxNamN3TWpndE5qUmpNUzAwT0dRM0xXRmpNVE10WVRCa01XUmlPVEkyTkRRNE9EYzFPR00zTVRrdE56aGlaQzAwWW1WbUxXSXpZakF0WldZeVl6VmlNbUZrTXpsaSIsImlhdCI6MTUyNDExMzYwOSwic2lkIjoiNzI3MGVmMzkyYjM4YzQ4OTY2YjIzNjk3YmRjMjk4YTYiLCJzdWIiOiJiMTVhYjMwMmU2MmE1NzQyOWQxYTQ0NTAzOWVmODBmZjk5MWQwODVmODg2NTM4NDliOTZjNDgxYjg4Mzk1Mzc5IiwiYXV0aF90aW1lIjoxNTI0MTEzNTQ3LCJpZHAiOiJXZUNoYXRDb21wYW55IiwiYW1yIjpbImV4dGVybmFsIl19.XRI1FQ2fNu8D6Q5_K6-CNmDtXAXUMJDDNpKOewicIT-lVeatyi4cADTv3Er2uQBc1SI3cup5E1gInU6igtc7eFvfs4OzjDMOK4WiJoNaol4cP5KYjhsre9TsmTfrEoXQtqccl5Gmax9kzUjuBxSIWQ-XD3RWaEmhduUA74f5LFNrslZZmjY68r7zfsB51YIElFWCVOMEWSvAQIbqhvne7jGJOev0wopgqXq9KOKJ2NhE5mdSt7NINga7njLlkoPvp95Dj5SiLrBAeEiPjGKrj8imVa_u-0itF_vh9resiYK-h2__opCRtJy-IWOKdS4bzj1YhaSa9yFiJDup74kEpQ",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHizuSgLK8bq4SUw_hCitN7y3qkTKkzlsO5xI7oouqHLKpJ-wD7K23DRJ7PEJE89rCFlAyXnHqWycBGzwAZ59a1LzTBx-3afvhbc_w9FGguFOvJfGxT65S11xcST57yofxKqdC-hlAGlFr03tbL4kmX",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:55:02,653 - ERROR - 【应用名称】 - Error processing end session request Invalid request
2018-04-19 12:55:02,654 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.EndSessionResult
2018-04-19 12:55:02,715 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:02,724 - INFO  - 【应用名称】 - Request finished in 650.4589ms 302 
2018-04-19 12:55:02,735 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/logout  
2018-04-19 12:55:02,735 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:02,736 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:02,736 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:02,736 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/logout
2018-04-19 12:55:02,743 - DEBUG - 【应用名称】 - The request path /account/logout does not match a supported file type
2018-04-19 12:55:02,911 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:02,939 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Logout (Host)' with id 'a3b793a4-99ff-4af5-bbd4-5ec96ec57f14' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:03,015 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Logout (Host)
2018-04-19 12:55:03,091 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host) with arguments () - ModelState is Valid
2018-04-19 12:55:03,132 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:55:03,142 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:55:03,175 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Logout' in controller 'Account'.
2018-04-19 12:55:03,201 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/Logout.cshtml'.
2018-04-19 12:55:03,206 - DEBUG - 【应用名称】 - The view 'Logout' was found.
2018-04-19 12:55:03,207 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Logout.cshtml.
2018-04-19 12:55:03,331 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:03,341 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:03,342 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:55:03,370 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Account'.
2018-04-19 12:55:03,371 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:55:03,456 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Logout (Host) in 439.8264ms
2018-04-19 12:55:03,460 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:03,460 - INFO  - 【应用名称】 - Request finished in 725.8099ms 200 text/html; charset=utf-8
2018-04-19 12:55:05,998 - INFO  - 【应用名称】 - Request starting HTTP/1.1 POST http://ilogin.5173.com/account/Logout application/x-www-form-urlencoded 235
2018-04-19 12:55:06,003 - DEBUG - 【应用名称】 - CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-19 12:55:06,004 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:06,004 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:06,004 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:06,004 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/Logout
2018-04-19 12:55:06,004 - DEBUG - 【应用名称】 - POST requests are not supported
2018-04-19 12:55:06,004 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:06,005 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Logout (Host)' with id '136ab355-244a-446a-aa0d-3347f69ecebe' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:06,034 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Logout (Host)
2018-04-19 12:55:06,071 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C", Request id "0HLD5M6QR865C:00000003": started reading request body.
2018-04-19 12:55:06,084 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C", Request id "0HLD5M6QR865C:00000003": done reading request body.
2018-04-19 12:55:06,088 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:06,088 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:06,090 - DEBUG - 【应用名称】 - Antiforgery successfully validated a request.
2018-04-19 12:55:06,134 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host) with arguments (IdentityServer4.Quickstart.UI.LogoutInputModel) - ModelState is Valid
2018-04-19 12:55:06,143 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:55:06,181 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed out.
2018-04-19 12:55:06,204 - INFO  - 【应用名称】 - {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b15ab302e62a57429d1a445039ef80ff991d085f88653849b96c481b88395379",
  "DisplayName": "86a827dfa6a9321af89c9b903ddc3a61",
  "ActivityId": "0HLD5M6QR865C:00000003",
  "TimeStamp": "2018-04-19T04:55:06Z",
  "ProcessId": 28024,
  "LocalIpAddress": "127.0.0.1:10256",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:55:06,204 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Logout (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:55:06,204 - DEBUG - 【应用名称】 - View lookup cache miss for view 'LoggedOut' in controller 'Account'.
2018-04-19 12:55:06,205 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/LoggedOut.cshtml'.
2018-04-19 12:55:06,205 - DEBUG - 【应用名称】 - The view 'LoggedOut' was found.
2018-04-19 12:55:06,205 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/LoggedOut.cshtml.
2018-04-19 12:55:06,213 - DEBUG - 【应用名称】 - View lookup cache hit for view '_Layout' in controller 'Account'.
2018-04-19 12:55:06,217 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Logout (Host) in 182.6041ms
2018-04-19 12:55:06,217 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:06,219 - INFO  - 【应用名称】 - Request finished in 220.7691ms 200 text/html; charset=utf-8
2018-04-19 12:55:06,251 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/endsession/callback?endSessionId=CfDJ8NW0HLAVUvFKlFyii0C31KplxnmiC0Nbcix07S4bjGG3I3PFz6dbiAcTy7gnOJUo1nE3akeUcce0CxvHa9fWePboTQMGKpcilCNAAXb0cw1zrZ6Bv9R1vrREQszsroAZsLBJtO0h1a8aSUXaiAYsvwoRycOqiy2KT62WE48ppPx8XIoORwSf_h1YwJyXmlchJab7dEh9DLaFFvXSi-X82SUYwIWx5qvKPHMuHDZ_SOD5SyBFiXGC-Xa7zFWe2N8UEVQu9T7fhpq-M8tjy6ZpKQ8D3uhEVfjHBGiIHXIiYNipbwTKYAISNR_wH6m_IZTKuJVAURBosyDmSrw2rfpluajIY0Ql2eVcEfHgw9hZ_3CjBiyIkFhbB9WWYZOzhPlagA  
2018-04-19 12:55:06,251 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:06,251 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:06,251 - DEBUG - 【应用名称】 - Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-19 12:55:06,253 - DEBUG - 【应用名称】 - Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-19 12:55:06,254 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-19 12:55:06,258 - DEBUG - 【应用名称】 - Processing signout callback request
2018-04-19 12:55:06,262 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'IdentityServer4.Stores.ProtectedDataMessageStore').
2018-04-19 12:55:06,291 - DEBUG - 【应用名称】 - Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=7270ef392b38c48966b23697bdc298a6&iss=http%3A%2F%2Filogin.5173.com
2018-04-19 12:55:06,291 - DEBUG - 【应用名称】 - No client back-channel logout URLs
2018-04-19 12:55:06,291 - INFO  - 【应用名称】 - Successful signout callback.
2018-04-19 12:55:06,291 - DEBUG - 【应用名称】 - Client front-channel iframe urls: http://localhost:5005/signout-oidc?sid=7270ef392b38c48966b23697bdc298a6&iss=http%3A%2F%2Filogin.5173.com
2018-04-19 12:55:06,291 - DEBUG - 【应用名称】 - No client back-channel iframe urls
2018-04-19 12:55:06,294 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.EndSessionCallbackResult
2018-04-19 12:55:06,303 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:06,303 - INFO  - 【应用名称】 - Request finished in 52.654ms 200 text/html; charset=UTF-8
2018-04-19 12:55:11,687 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:55:11,687 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,688 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,688 - DEBUG - 【应用名称】 - Request path /connect/authorize matched to endpoint type Authorize
2018-04-19 12:55:11,689 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-19 12:55:11,690 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-19 12:55:11,693 - DEBUG - 【应用名称】 - Start authorize request
2018-04-19 12:55:11,693 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,698 - DEBUG - 【应用名称】 - No user present in authorize request
2018-04-19 12:55:11,703 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:11,752 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:11,752 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:11,762 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
  "Nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:55:11,765 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:55:11,770 - INFO  - 【应用名称】 - Showing login: User is not authenticated
2018-04-19 12:55:11,771 - INFO  - 【应用名称】 - End authorize request. result type: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:55:11,771 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.LoginPageResult
2018-04-19 12:55:11,774 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:11,774 - INFO  - 【应用名称】 - Request finished in 86.9531ms 302 
2018-04-19 12:55:11,781 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:55:11,781 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,781 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,781 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:55:11,781 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:55:11,781 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:11,781 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id 'ae9c0006-f6f6-4b6b-abcc-cd870236765a' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:11,786 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:55:11,787 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:55:11,801 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:11,803 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:11,805 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:11,805 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:11,805 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:11,805 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:11,805 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:11,807 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:11,808 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:55:11,808 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Login' in controller 'Account'.
2018-04-19 12:55:11,809 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Account/Login.cshtml'.
2018-04-19 12:55:11,809 - DEBUG - 【应用名称】 - The view 'Login' was found.
2018-04-19 12:55:11,809 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Login.cshtml.
2018-04-19 12:55:11,826 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Account'.
2018-04-19 12:55:11,827 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:55:11,838 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:11,838 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:11,838 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:55:11,950 - DEBUG - 【应用名称】 - View lookup cache hit for view '_Layout' in controller 'Account'.
2018-04-19 12:55:11,955 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 169.2576ms
2018-04-19 12:55:11,956 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:11,956 - INFO  - 【应用名称】 - Request finished in 175.3694ms 200 text/html; charset=utf-8
2018-04-19 12:55:12,669 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:55:12,670 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:12,670 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:12,670 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/login
2018-04-19 12:55:12,670 - DEBUG - 【应用名称】 - The request path /account/login does not match a supported file type
2018-04-19 12:55:12,670 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:12,670 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.AccountController.Login (Host)' with id 'ae9c0006-f6f6-4b6b-abcc-cd870236765a' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:12,672 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Host)
2018-04-19 12:55:12,673 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:55:12,673 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:12,673 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:12,673 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:12,673 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:12,674 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:12,674 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:12,674 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:12,674 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:12,674 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:55:12,674 - DEBUG - 【应用名称】 - View lookup cache hit for view 'Login' in controller 'Account'.
2018-04-19 12:55:12,674 - DEBUG - 【应用名称】 - The view 'Login' was found.
2018-04-19 12:55:12,674 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Account/Login.cshtml.
2018-04-19 12:55:12,674 - DEBUG - 【应用名称】 - View lookup cache hit for view '_ValidationSummary' in controller 'Account'.
2018-04-19 12:55:12,675 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:12,675 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:12,675 - DEBUG - 【应用名称】 - An antiforgery cookie token was reused.
2018-04-19 12:55:12,676 - DEBUG - 【应用名称】 - View lookup cache hit for view '_Layout' in controller 'Account'.
2018-04-19 12:55:12,677 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Host) in 5.0363ms
2018-04-19 12:55:12,677 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:12,677 - INFO  - 【应用名称】 - Request finished in 7.495ms 200 text/html; charset=utf-8
2018-04-19 12:55:14,647 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLogin?provider=WeChatCompany&returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:55:14,647 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:14,647 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:14,647 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLogin
2018-04-19 12:55:14,648 - DEBUG - 【应用名称】 - The request path /account/ExternalLogin does not match a supported file type
2018-04-19 12:55:14,648 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:14,653 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host)
2018-04-19 12:55:14,653 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) with arguments (WeChatCompany, /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:55:14,657 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host), returned result Microsoft.AspNetCore.Mvc.ChallengeResult.
2018-04-19 12:55:14,660 - INFO  - 【应用名称】 - Executing ChallengeResult with authentication schemes (WeChatCompany).
2018-04-19 12:55:14,674 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:55:14,676 - INFO  - 【应用名称】 - AuthenticationScheme: WeChatCompany was challenged.
2018-04-19 12:55:14,676 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLogin (Host) in 23.5699ms
2018-04-19 12:55:14,677 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:14,677 - INFO  - 【应用名称】 - Request finished in 29.5378ms 302 
2018-04-19 12:55:28,496 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/signin-WeChatCompany?code=VxDxLPT2fkiqzEpe-7aQI-xL1gkyEY8SobLkozZtnWs&state=CfDJ8NW0HLAVUvFKlFyii0C31KoLnSb8GM0q-kVeNyfbvRQQhAUtaJ_jIzdE6q6Dk20XjXBLyfJfPTklcPCzXup-euVGKhQMvlMDlx4XO0Gq-LUKhiP367bTpwcllI4dqOZ-r0FK-CYuIDFwRsrAxiyzRXZ8wt1EFZmOeEDodPu2Z4vYVkpMOco2XIcz9O0WferuWtCZE3-NioffJVDKyHioyiSW0SeLczEtggkH5foKhZAJDiIHtlFsOHrdjdk4nDaxffjZAu6Psq2JhWqwYCT-9mNodr6gb-nSoyhySJkNEWTE9kgVlT5OVnvW61Ve5DmTuLvXjZycYSMzckmnMiIVquY0qFjjYuAwFFqCWm6i-T70S9SWS504i6DWkGCXKm5XOaudt_MvmjyPXN4Z3WN6tGgxF9DNRvxVmtIax4VY0Bveh2gW2zm6gvG6DLXRmYkFzlQAJq9Ip7yOMOwYRrjbINDuWwANt7Fjv2xPvSI4vNMfQlnzkL09cuskjO_U3BHRVdKG1pvTaFA6q-W0pkBJ3fVwto6YWF_1Ar159G9uc3IcByoZZUtbnNjqagewXitcdptYtF9KGsg4wjGWdfX3gM5HDiaDvwy-1OHk0UGrhheGlmXsIv9SbmAjfHvQJITfvo3FrzZNscP4I6ZFHBgJ7f0A2jMXXijgruSXfytRlmeuY16GGbivO0beXDDslwx9bCFJTAV0vth2Y5usLwb3wJtvVVyWJI6ri1Dkt8oMVYrnbRmb6EtP3QQ1U8Vo1VatjQ4XkwPXd6YBVeJbfkRRIMFHM3xxzAyvHLPRTQzsZ0MV5E6fg5jyse5xm6HOeFDmUMwY5XN_ziOupOoX2KV4-WN_F2Xls5VL25sLLYmKNFMeLcaYnNKfE0L0T7NL7V0kkVjKs1dwcmKulaRsMsaNm8RVcYF9Ry8e6t1b_mj1yZxgBNarUwbk0oavvOdDriWCiOJXjBZEFN6_SPt28POoz-XTYnUCKtBAvFEWNMU3GdAd5qIfHYh7wf2J9nigMZAzCY6lfcrbWzKnirRU0BgCWtuEjTXfGskeiAxlCsV0Wk_vxwLnSJPLXUv7WBiQV5nd3Cw9rCM8xVINueGGS2KpFy5XWN7MpVXzidO34a7kLyzh29G2hJg4xYTd9hI6soYsZGGoTfcURsKYgxz4h3QzXFk4A2zwc6SED0N6ICQF_pO6&appid=ww85a6abac8a4faac6  
2018-04-19 12:55:28,506 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.WeChatCompany.WeChatCompanyHandler', 'WeChatCompany', 'v1').
2018-04-19 12:55:42,173 - DEBUG - 【应用名称】 - payload : {
  "access_token": "U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ",
  "code": "VxDxLPT2fkiqzEpe-7aQI-xL1gkyEY8SobLkozZtnWs"
}
2018-04-19 12:55:44,583 - DEBUG - 【应用名称】 - userInformationEndpoint : https://qyapi.weixin.qq.com/cgi-bin/user/getuserinfo?access_token=U4lFQFB9J3cCZftO4B3G6n-u5dYoF102ee6qp4JgeboBurOjMzKR4t-4Wci5xnFjmbqsJzObdQjvfJXYMHyf_EfqczCdK7_dvQYZItIx6d1uPL38p03WeeBcUUVMNZmN3cDZdOQDk2rPOMm0dXLq-k2RIzw4hz-iTTcm7WlXTASEBIETV2w0VBld84kWloSmAGEoKHALFdprOU4mWXohBQ&code=VxDxLPT2fkiqzEpe-7aQI-xL1gkyEY8SobLkozZtnWs
2018-04-19 12:55:47,004 - DEBUG - 【应用名称】 - {"UserId":"86a827dfa6a9321af89c9b903ddc3a61","DeviceId":"","errcode":0,"errmsg":"ok"}
2018-04-19 12:55:47,006 - DEBUG - 【应用名称】 - success
2018-04-19 12:55:47,008 - DEBUG - 【应用名称】 - success2
2018-04-19 12:55:47,008 - DEBUG - 【应用名称】 - context.Principal:
2018-04-19 12:55:47,013 - DEBUG - 【应用名称】 - context.Properties:
2018-04-19 12:55:47,013 - DEBUG - 【应用名称】 - Scheme.Name:
2018-04-19 12:55:47,032 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:55:47,032 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed in.
2018-04-19 12:55:47,033 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:47,033 - INFO  - 【应用名称】 - Request finished in 18537.2396ms 302 
2018-04-19 12:55:47,041 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/account/ExternalLoginCallback  
2018-04-19 12:55:47,041 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:47,041 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:47,041 - INFO  - 【应用名称】 - No endpoint entry found for request path: /account/ExternalLoginCallback
2018-04-19 12:55:47,042 - DEBUG - 【应用名称】 - The request path /account/ExternalLoginCallback does not match a supported file type
2018-04-19 12:55:47,042 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:47,046 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host)
2018-04-19 12:55:47,046 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) with arguments ((null)) - ModelState is Valid
2018-04-19 12:55:47,053 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv.external', 'v2').
2018-04-19 12:55:47,053 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-19 12:55:47,054 - DEBUG - 【应用名称】 - provider:WeChatCompany
2018-04-19 12:55:47,066 - INFO  - 【应用名称】 - {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "WeChatCompany",
  "ProviderUserId": "86a827dfa6a9321af89c9b903ddc3a61",
  "SubjectId": "94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab",
  "DisplayName": "86a827dfa6a9321af89c9b903ddc3a61",
  "Endpoint": "UI",
  "ActivityId": "0HLD5M6QR865C:0000000A",
  "TimeStamp": "2018-04-19T04:55:47Z",
  "ProcessId": 28024,
  "LocalIpAddress": "127.0.0.1:10256",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:55:47,078 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:55:47,081 - DEBUG - 【应用名称】 - Adding amr claim with value: external
2018-04-19 12:55:47,083 - DEBUG - 【应用名称】 - AuthenticationScheme: idsrv was not authenticated.
2018-04-19 12:55:47,084 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:47,084 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:55:47,084 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv.external signed out.
2018-04-19 12:55:47,085 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:47,085 - INFO  - 【应用名称】 - IsValidReturnUrl true
2018-04-19 12:55:47,086 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:55:47,088 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:55:47,089 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback (Host) in 43.2592ms
2018-04-19 12:55:47,089 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:47,089 - INFO  - 【应用名称】 - Request finished in 47.932ms 302 
2018-04-19 12:55:47,098 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:55:47,098 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:47,098 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:47,098 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:47,098 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:55:47,099 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:55:47,099 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:55:47,105 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:55:47,109 - DEBUG - 【应用名称】 - User in authorize request: 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab
2018-04-19 12:55:47,109 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:47,109 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:47,109 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:47,109 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
  "Nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
  "SessionId": "54184a35aa7e9ebb605d2d8a4fad4f7f",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:55:47,109 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:55:47,109 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:55:47,123 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab not found in store.
2018-04-19 12:55:47,123 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:55:47,123 - INFO  - 【应用名称】 - Showing consent: User has not yet consented
2018-04-19 12:55:47,123 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:55:47,124 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.ConsentPageResult
2018-04-19 12:55:47,124 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:47,124 - INFO  - 【应用名称】 - Request finished in 26.6279ms 302 
2018-04-19 12:55:47,133 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/consent?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dmvc.implicit%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A5005%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%26response_mode%3Dform_post%26nonce%3D636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj%26state%3DCfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A%26x-client-SKU%3DID_NET%26x-client-ver%3D2.1.4.0  
2018-04-19 12:55:47,133 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:47,133 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:47,133 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:47,134 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:55:47,134 - DEBUG - 【应用名称】 - The request path /consent does not match a supported file type
2018-04-19 12:55:47,134 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:47,137 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id '7901188f-0bef-42b8-9c95-04de7775e848' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:47,141 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:55:47,171 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:55:47,171 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0) - ModelState is Valid
2018-04-19 12:55:47,179 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:47,179 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:47,179 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:47,179 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:47,179 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:47,179 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:47,179 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:47,183 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.ViewResult.
2018-04-19 12:55:47,183 - DEBUG - 【应用名称】 - View lookup cache miss for view 'Index' in controller 'Consent'.
2018-04-19 12:55:47,184 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/Index.cshtml'.
2018-04-19 12:55:47,184 - DEBUG - 【应用名称】 - The view 'Index' was found.
2018-04-19 12:55:47,184 - INFO  - 【应用名称】 - Executing ViewResult, running view at path /Views/Consent/Index.cshtml.
2018-04-19 12:55:47,190 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ValidationSummary' in controller 'Consent'.
2018-04-19 12:55:47,190 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_ValidationSummary.cshtml'.
2018-04-19 12:55:47,194 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:47,194 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:47,196 - DEBUG - 【应用名称】 - A new antiforgery cookie token was created.
2018-04-19 12:55:47,206 - DEBUG - 【应用名称】 - View lookup cache miss for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:55:47,207 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Consent/_ScopeListItem.cshtml'.
2018-04-19 12:55:47,212 - DEBUG - 【应用名称】 - View lookup cache hit for view '_ScopeListItem' in controller 'Consent'.
2018-04-19 12:55:47,214 - DEBUG - 【应用名称】 - View lookup cache miss for view '_Layout' in controller 'Consent'.
2018-04-19 12:55:47,214 - DEBUG - 【应用名称】 - Using precompiled view for '/Views/Shared/_Layout.cshtml'.
2018-04-19 12:55:47,215 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 73.3753ms
2018-04-19 12:55:47,215 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:47,215 - INFO  - 【应用名称】 - Request finished in 82.067ms 200 text/html; charset=utf-8
2018-04-19 12:55:53,866 - INFO  - 【应用名称】 - Request starting HTTP/1.1 POST http://ilogin.5173.com/consent application/x-www-form-urlencoded 1064
2018-04-19 12:55:53,868 - DEBUG - 【应用名称】 - CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-19 12:55:53,868 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:53,869 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:53,869 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:53,869 - INFO  - 【应用名称】 - No endpoint entry found for request path: /consent
2018-04-19 12:55:53,869 - DEBUG - 【应用名称】 - POST requests are not supported
2018-04-19 12:55:53,869 - DEBUG - 【应用名称】 - Request successfully matched the route with name 'default' and template '{controller=Home}/{action=Index}/{id?}'.
2018-04-19 12:55:53,869 - DEBUG - 【应用名称】 - Action 'IdentityServer4.Quickstart.UI.ConsentController.Index (Host)' with id '789371d2-dc82-4616-8a5e-ba0f6379127f' did not match the constraint 'Microsoft.AspNetCore.Mvc.Internal.HttpMethodActionConstraint'
2018-04-19 12:55:53,877 - DEBUG - 【应用名称】 - Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Host)
2018-04-19 12:55:53,877 - INFO  - 【应用名称】 - Authorization was successful for user: 86a827dfa6a9321af89c9b903ddc3a61.
2018-04-19 12:55:53,877 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C", Request id "0HLD5M6QR865C:0000000D": started reading request body.
2018-04-19 12:55:53,877 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C", Request id "0HLD5M6QR865C:0000000D": done reading request body.
2018-04-19 12:55:53,878 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:53,878 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Antiforgery.AntiforgeryToken.v1').
2018-04-19 12:55:53,878 - DEBUG - 【应用名称】 - Antiforgery successfully validated a request.
2018-04-19 12:55:53,895 - INFO  - 【应用名称】 - Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host) with arguments (IdentityServer4.Quickstart.UI.ConsentInputModel) - ModelState is Valid
2018-04-19 12:55:53,901 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:53,901 - INFO  - 【应用名称】 - returnUrl is valid
2018-04-19 12:55:53,901 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:53,901 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:53,901 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:53,901 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:53,901 - INFO  - 【应用名称】 - AuthorizationRequest being returned
2018-04-19 12:55:53,914 - INFO  - 【应用名称】 - Protecting message: {"Created":636597105530000000,"Data":{"Granted":true,"ScopesConsented":["openid","profile"],"RememberConsent":true}}
2018-04-19 12:55:53,915 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:55:53,917 - DEBUG - 【应用名称】 - Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Host), returned result Microsoft.AspNetCore.Mvc.RedirectResult.
2018-04-19 12:55:53,917 - INFO  - 【应用名称】 - Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0.
2018-04-19 12:55:53,917 - INFO  - 【应用名称】 - Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Host) in 40.4051ms
2018-04-19 12:55:53,917 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:53,917 - INFO  - 【应用名称】 - Request finished in 51.4727ms 302 
2018-04-19 12:55:53,925 - INFO  - 【应用名称】 - Request starting HTTP/1.1 GET http://ilogin.5173.com/connect/authorize/callback?client_id=mvc.implicit&redirect_uri=http%3A%2F%2Flocalhost%3A5005%2Fsignin-oidc&response_type=id_token&scope=openid%20profile&response_mode=form_post&nonce=636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj&state=CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A&x-client-SKU=ID_NET&x-client-ver=2.1.4.0  
2018-04-19 12:55:53,925 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:53,925 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:53,925 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv was successfully authenticated.
2018-04-19 12:55:53,925 - DEBUG - 【应用名称】 - Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-19 12:55:53,925 - DEBUG - 【应用名称】 - Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-19 12:55:53,925 - INFO  - 【应用名称】 - Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-19 12:55:53,926 - DEBUG - 【应用名称】 - Start authorize callback request
2018-04-19 12:55:53,929 - INFO  - 【应用名称】 - Performing unprotect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'ConsentResponse').
2018-04-19 12:55:53,930 - DEBUG - 【应用名称】 - User in authorize request: 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab
2018-04-19 12:55:53,930 - DEBUG - 【应用名称】 - Start authorize request protocol validation
2018-04-19 12:55:53,931 - DEBUG - 【应用名称】 - Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-19 12:55:53,931 - INFO  - 【应用名称】 - Authorize request protocol validation successful
2018-04-19 12:55:53,931 - INFO  - 【应用名称】 - ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
  "Nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
  "SessionId": "54184a35aa7e9ebb605d2d8a4fad4f7f",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636597105116746539.NDU5MWYyNTAtNGFmZi00MWQ0LWE2NTAtOWEwMjdkMzEzNzI1MTBlZWFiNTUtNWJlNi00ZWVjLWE0N2ItYjU1NjA4MDFkYTlj",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-19 12:55:53,931 - INFO  - 【应用名称】 - ProcessInteractionAsync
2018-04-19 12:55:53,931 - DEBUG - 【应用名称】 - IsActive called from: AuthorizeEndpoint
2018-04-19 12:55:53,931 - DEBUG - 【应用名称】 - user_consent grant with value: mvc.implicit|94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab not found in store.
2018-04-19 12:55:53,931 - DEBUG - 【应用名称】 - Found no prior consent from consent store, consent is required
2018-04-19 12:55:53,931 - INFO  - 【应用名称】 - Consent was shown to user
2018-04-19 12:55:53,936 - INFO  - 【应用名称】 - User consented to scopes: openid, profile
2018-04-19 12:55:53,937 - DEBUG - 【应用名称】 - User indicated to remember consent for scopes: openid, profile
2018-04-19 12:55:53,940 - DEBUG - 【应用名称】 - Client allows remembering consent, and consent given. Updating consent store for subject: 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab
2018-04-19 12:55:53,955 - DEBUG - 【应用名称】 - Creating Implicit Flow response.
2018-04-19 12:55:53,959 - INFO  - 【应用名称】 - Creating identity token
2018-04-19 12:55:53,964 - DEBUG - 【应用名称】 - Getting claims for identity token for subject: 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab and client: mvc.implicit
2018-04-19 12:55:53,968 - DEBUG - 【应用名称】 - Get profile called for subject 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab from client MVC Implicit with claim types name, family_name, given_name, middle_name, nickname, preferred_username, profile, picture, website, gender, birthdate, zoneinfo, locale, updated_at via ClaimsProviderIdentityToken
2018-04-19 12:55:53,970 - DEBUG - 【应用名称】 - Issued claims: name
2018-04-19 12:55:53,975 - INFO  - 【应用名称】 - Creating JWT identity token
2018-04-19 12:55:54,010 - INFO  - 【应用名称】 - Identity token issued for mvc.implicit (MVC Implicit) / 94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab: eyJhbGciOiJSUzI1NiIsImtpZCI6IjE0NjNjZTU2NWQ0MjQwM2ExMzIxMTg2ZTI3YTQ5NGU1IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQxMTM3NTMsImV4cCI6MTUyNDExNDA1MywiaXNzIjoiaHR0cDovL2lsb2dpbi41MTczLmNvbSIsImF1ZCI6Im12Yy5pbXBsaWNpdCIsIm5vbmNlIjoiNjM2NTk3MTA1MTE2NzQ2NTM5Lk5EVTVNV1l5TlRBdE5HRm1aaTAwTVdRMExXRTJOVEF0T1dFd01qZGtNekV6TnpJMU1UQmxaV0ZpTlRVdE5XSmxOaTAwWldWakxXRTBOMkl0WWpVMU5qQTRNREZrWVRsaiIsImlhdCI6MTUyNDExMzc1Mywic2lkIjoiNTQxODRhMzVhYTdlOWViYjYwNWQyZDhhNGZhZDRmN2YiLCJzdWIiOiI5NDI2M2QwNDAwYTc2NGFjZTkzZWI2OGU4MjJmOTY4ZmUyY2JjYTg2ODkxMTJjYTM2MGI0OWUzOGIxYWMzY2FiIiwiYXV0aF90aW1lIjoxNTI0MTEzNzQ3LCJpZHAiOiJXZUNoYXRDb21wYW55IiwibmFtZSI6Ijg2YTgyN2RmYTZhOTMyMWFmODljOWI5MDNkZGMzYTYxIiwiYW1yIjpbImV4dGVybmFsIl19.kgSHTk8j5RxM7KD3HXp12bnvKS-sSrJzz8tmmR_V9gVEzpMdMfUzVBaVoLEUSHApHlZa9nisWB5z1nSXhUOb9byNWsW9WVSa07TYy8XbWe6XC7yqWdIVkbMQYGhhZrVqWH7sKbt8hNuDjxiK1pvUl10Al9ZDB0zvR8HAKPOAovjHwcqa0vF4S1cSYMBmBSatN8RcgULMHtf410GSGPyuDE1YNe7-OD9DbUX2JP7IQfp2lOJEti4f-2C_uCsTMC0CNwPYj7n-xyYkOiVt5RN_v-1wO_89qgTAhVl-wnJdK3sjehLq1uo7SzeWLnmOPcCOdx_LL1xcn2ivfJsbxWXbfg
2018-04-19 12:55:54,019 - INFO  - 【应用名称】 - {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Xbfg"
    }
  ],
  "ActivityId": "0HLD5M6QR865C:0000000E",
  "TimeStamp": "2018-04-19T04:55:54Z",
  "ProcessId": 28024,
  "LocalIpAddress": "127.0.0.1:10256",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-19 12:55:54,023 - INFO  - 【应用名称】 - Authorize endpoint response
{
  "SubjectId": "94263d0400a764ace93eb68e822f968fe2cbca8689112ca360b49e38b1ac3cab",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHnb9MXCdcmM5o0MhZKXOjw081KxEz7Y2taVekslAYDmOgSf8nwgXIMmdbYS3s-j2Ma8AW9T1MAvOqgSxortWyUqPEjw7y__6yMY52pYxbqIypSK50gCZURdVhzTqKlz09diBMOtys5FDH347h04bS-u6vAyXxtaO33IF7YryKRnCZcrrPnNKDaw5wbTdYGjOVbzvIQZGpIrMno906GFVWfgsajqnmjExvlCxVfAMx25HWlOqjTC2EO62YYldAYvJwzu3u4JewiyNWj6VAoLFYUodQF38YTRBAoaPWcZG3P0A",
  "Scope": "openid profile"
}
2018-04-19 12:55:54,024 - INFO  - 【应用名称】 - End Authorize Request. Result type: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:55:54,025 - INFO  - 【应用名称】 - Invoking result: IdentityServer4.Endpoints.Results.AuthorizeResult
2018-04-19 12:55:54,036 - DEBUG - 【应用名称】 - Augmenting SignInContext
2018-04-19 12:55:54,036 - INFO  - 【应用名称】 - Performing protect operation to key {b01cb4d5-5215-4af1-945c-a28b40b7d4aa} with purposes ('F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\Host\bin\Release\PublishOutput', 'Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware', 'idsrv', 'v2').
2018-04-19 12:55:54,036 - INFO  - 【应用名称】 - AuthenticationScheme: idsrv signed in.
2018-04-19 12:55:54,041 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" completed keep alive response.
2018-04-19 12:55:54,042 - INFO  - 【应用名称】 - Request finished in 116.9076ms 200 text/html; charset=UTF-8
2018-04-19 12:57:01,883 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" reset.
2018-04-19 12:57:01,884 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" disconnecting.
2018-04-19 12:57:01,885 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" sending FIN.
2018-04-19 12:57:01,887 - DEBUG - 【应用名称】 - Connection id "0HLD5M6QR865C" stopped.
