2018-04-03 09:21:18.665 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 09:21:18.792 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 09:21:18.801 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 09:21:18.802 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 09:21:18.802 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 09:21:18.803 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 09:22:18.933 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 09:22:18.944 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 09:22:18.945 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 09:22:18.948 +08:00 [DBG] Start authorize request
2018-04-03 09:22:18.966 +08:00 [DBG] No user present in authorize request
2018-04-03 09:22:18.969 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:22:19.042 +08:00 [ERR] Invalid redirect_uri: http://localhost:5005/signin-oidc
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:44077/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583153388753727.MmJiZjgyYWMtNjNhNy00ZWRkLTlkNDgtNGQ1NzE1MTE0NzMzZTRhNWZlNzAtYTRhYy00YTFkLTkwZDktYTAxNTRjNWQ1ZWYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGnX7uhmlzGq8_2hzo0FwO8Y6GnlVow0DYMpT0PWzUo-ba_grCBdqStTxR70kDLUWh-iUMRZ1RSSrFgMhPutnp8aeGLQTkyZKZ5xmrecX1yh5YMfnMXM_K6oHstJiz1ct8deYfAYJsuuicXvcS68kN0JNdUgGkzi-snVhUdt-Ct2ConnSacQa-dWurqXjbM3nJZA9czQZeCgB7vDbJrUjRj9V01C2cfL8UXw0b2a6zSlrEpiesYRVJ4cJT0rXV6MmvL6p_L5ou8xGxzQd3tvUuD7ljXyGciRWZw_3dNaE04ZQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:22:19.044 +08:00 [ERR] Request validation failed
2018-04-03 09:22:19.045 +08:00 [INF] {
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:44077/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583153388753727.MmJiZjgyYWMtNjNhNy00ZWRkLTlkNDgtNGQ1NzE1MTE0NzMzZTRhNWZlNzAtYTRhYy00YTFkLTkwZDktYTAxNTRjNWQ1ZWYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGnX7uhmlzGq8_2hzo0FwO8Y6GnlVow0DYMpT0PWzUo-ba_grCBdqStTxR70kDLUWh-iUMRZ1RSSrFgMhPutnp8aeGLQTkyZKZ5xmrecX1yh5YMfnMXM_K6oHstJiz1ct8deYfAYJsuuicXvcS68kN0JNdUgGkzi-snVhUdt-Ct2ConnSacQa-dWurqXjbM3nJZA9czQZeCgB7vDbJrUjRj9V01C2cfL8UXw0b2a6zSlrEpiesYRVJ4cJT0rXV6MmvL6p_L5ou8xGxzQd3tvUuD7ljXyGciRWZw_3dNaE04ZQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:22:19.108 +08:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLCP04Q8FHMG:00000002",
  "TimeStamp": "2018-04-03T01:22:19Z",
  "ProcessId": 50092,
  "LocalIpAddress": "127.0.0.1:29283",
  "RemoteIpAddress": "::1"
}
2018-04-03 09:26:13.413 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 09:26:13.499 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 09:26:13.502 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 09:26:13.503 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 09:26:13.503 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 09:26:13.503 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 09:26:40.844 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 09:26:40.910 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 09:26:40.914 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 09:26:40.915 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 09:26:40.915 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 09:26:40.916 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 09:26:46.485 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 09:26:46.503 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 09:26:46.503 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 09:26:46.509 +08:00 [DBG] Start authorize request
2018-04-03 09:26:46.546 +08:00 [DBG] No user present in authorize request
2018-04-03 09:26:46.550 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:26:46.637 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:26:46.771 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
  "Nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:26:46.779 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 09:26:47.261 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:26:47.264 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:26:53.618 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 09:26:53.676 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 09:26:53.727 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Windows",
  "ProviderUserId": "PC-20160629URQR\\Administrator",
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "Endpoint": "UI",
  "ActivityId": "0HLCP07Q7AOFG:00000004",
  "TimeStamp": "2018-04-03T01:26:53Z",
  "ProcessId": 62644,
  "LocalIpAddress": "127.0.0.1:20195",
  "RemoteIpAddress": "::1"
}
2018-04-03 09:26:53.734 +08:00 [DBG] Augmenting SignInContext
2018-04-03 09:26:53.736 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 09:26:53.740 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 09:26:53.755 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 09:26:53.765 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:26:53.766 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:26:53.766 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 09:26:53.766 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 09:26:53.766 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 09:26:53.770 +08:00 [DBG] Start authorize callback request
2018-04-03 09:26:53.775 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 09:26:53.775 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:26:53.775 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:26:53.776 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
  "Nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
  "SessionId": "7cde6c4fecee1216d84031cfd77aa2ae",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:26:53.777 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 09:26:53.786 +08:00 [DBG] user_consent grant with value: mvc.implicit|e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a not found in store.
2018-04-03 09:26:53.786 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 09:26:53.786 +08:00 [INF] Showing consent: User has not yet consented
2018-04-03 09:26:53.798 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:26:53.798 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:26:53.875 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:26:53.876 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:36:43.981 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 09:36:43.981 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:36:43.981 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:36:44.114 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:36:44.114 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:36:44.150 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:36:44.150 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:36:44.151 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 09:36:44.151 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 09:36:44.151 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 09:36:44.151 +08:00 [DBG] Start authorize callback request
2018-04-03 09:36:44.182 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 09:36:44.182 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:36:44.182 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:36:44.183 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
  "Nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
  "SessionId": "7cde6c4fecee1216d84031cfd77aa2ae",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583156064453727.Y2E3NmY2N2QtYzlmMC00YmI1LWEzYjctYjBhMmQ1OGEyMjYzYmNkZmRkMzUtMTk2MS00N2JlLTkzZjktYzA3ODc1YWU4YzQ1",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:36:44.183 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 09:36:44.183 +08:00 [DBG] user_consent grant with value: mvc.implicit|e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a not found in store.
2018-04-03 09:36:44.183 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 09:36:44.191 +08:00 [INF] User consented to scopes: ["openid","profile"]
2018-04-03 09:36:44.201 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2018-04-03 09:36:44.203 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 09:36:44.219 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 09:36:44.225 +08:00 [DBG] Getting claims for identity token for subject: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a and client: mvc.implicit
2018-04-03 09:36:44.230 +08:00 [DBG] Get profile called for subject e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 09:36:44.232 +08:00 [DBG] Issued claims: ["name"]
2018-04-03 09:36:44.301 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WWAw"
    }
  ],
  "ActivityId": "0HLCP07Q7AOFJ:00000002",
  "TimeStamp": "2018-04-03T01:36:44Z",
  "ProcessId": 62644,
  "LocalIpAddress": "127.0.0.1:20195",
  "RemoteIpAddress": "::1"
}
2018-04-03 09:36:44.306 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3Yf9y9t3usESfsbsbbGWvSxafkxnmfZ27OGrWDVhz_Dy3zsUYXHa8IFrmd8axMr-dT_OQASfqP-LqEc_xf7cImdmjxqfQeuksmd4EdNaVDs31gDQtW93d10Bm_RNLDhh9LjhZLho8fdsdp0MJtwzL9SEJktSSiI99jz1ud_OUkcFzxcJlXyHkR71iatxhiQUCsroAQ8KXH0OjmqWGthj9-NDxjq6SrnqKisrCkRSyrnCLhJXmU2bObeonPVrm8-QvdnyjEZAKHJ9g5_-V9xNGtl9Ka9A16MUSsvN23sFf_A",
  "Scope": "openid profile"
}
2018-04-03 09:36:44.317 +08:00 [DBG] Augmenting SignInContext
2018-04-03 09:36:44.318 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 09:37:13.004 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:37:13.004 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:37:13.024 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:37:13.024 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 09:37:51.928 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 09:37:51.981 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 09:37:51.985 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 09:37:51.986 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 09:37:51.986 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 09:37:51.986 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 09:38:06.990 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-03 09:38:06.995 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-03 09:38:06.996 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-03 09:38:06.997 +08:00 [DBG] Start discovery request
2018-04-03 09:38:07.074 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-03 09:38:07.074 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-03 09:38:07.074 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-03 09:38:07.077 +08:00 [DBG] Start key discovery request
2018-04-03 09:38:07.167 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:38:07.169 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:38:07.169 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 09:38:07.172 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 09:38:07.172 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 09:38:07.176 +08:00 [DBG] Start authorize request
2018-04-03 09:38:07.187 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 09:38:07.189 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 09:38:07.213 +08:00 [ERR] Invalid redirect_uri: http://localhost:5005/signin-oidc
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583162871173727.NDk4Mjk3MTUtZDdkNi00MDRhLWJmOWEtZmFiMWQ1NGQ3MWZhOWQwMWEyMmMtZDhkZS00NWE0LTgyODAtMzc3YTllM2MyOWQw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHDaHpSpSsLjiobGhc0hrJNWBvOR7a88g021eb7j03uOwXv26diL6E5uRqLwxjS77brZV_Xw2WKACgfnOygZSjAsC3NbOOP5My15Aofow78_MXIiJ-64Frr4C7WhKKIbIV0cRKNHws5GBjF9zDzw9wVYdZC60mSaILGWjPxo36akmw_Xu2AjqmJk-buikOEb8OSVpRqqhDN_uAK9b9vLychl1d87phes9xFG8P8HmE1jX_PnHQNj9h2QwrZorP2LT02GGq3ELnrcEBuziiNixKNkrwTFjKmnqjytyvSMOdHzw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:38:07.215 +08:00 [ERR] Request validation failed
2018-04-03 09:38:07.215 +08:00 [INF] {
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583162871173727.NDk4Mjk3MTUtZDdkNi00MDRhLWJmOWEtZmFiMWQ1NGQ3MWZhOWQwMWEyMmMtZDhkZS00NWE0LTgyODAtMzc3YTllM2MyOWQw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHDaHpSpSsLjiobGhc0hrJNWBvOR7a88g021eb7j03uOwXv26diL6E5uRqLwxjS77brZV_Xw2WKACgfnOygZSjAsC3NbOOP5My15Aofow78_MXIiJ-64Frr4C7WhKKIbIV0cRKNHws5GBjF9zDzw9wVYdZC60mSaILGWjPxo36akmw_Xu2AjqmJk-buikOEb8OSVpRqqhDN_uAK9b9vLychl1d87phes9xFG8P8HmE1jX_PnHQNj9h2QwrZorP2LT02GGq3ELnrcEBuziiNixKNkrwTFjKmnqjytyvSMOdHzw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 09:38:07.253 +08:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "Endpoint": "Authorize",
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLCP0E24FTR0:00000005",
  "TimeStamp": "2018-04-03T01:38:07Z",
  "ProcessId": 51980,
  "LocalIpAddress": "127.0.0.1:19430",
  "RemoteIpAddress": "::1"
}
2018-04-03 09:38:07.281 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:38:07.282 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:39:15.093 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:39:15.094 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:39:18.601 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:39:18.601 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:48:28.867 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:48:28.867 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:48:36.134 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:48:36.134 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 09:48:36.134 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 09:48:36.134 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 09:48:36.134 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 09:48:36.135 +08:00 [DBG] Start authorize request
2018-04-03 09:48:36.135 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 09:48:36.135 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:20:31.863 +08:00 [ERR] Invalid redirect_uri: http://localhost:5005/signin-oidc
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583169161233727.YzZjZTljNzUtODdlMy00ZjE5LTg3NTEtNGVjN2YxNDYzMDM3OWM5MWQyZjgtODJhNy00MzRkLWI4NzAtZTE4MWQ5YWEyZmE3",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGD8KD5GXhHbVXkRo3Agwd2vi33RfmMSw1cyXd35GSzcau3KWFYM7N3BMDJpYW9AZjewsRl2ChO2iQG4PwZG7nPFQaTdcXgaceuuaAusgbEbv_5fGixW9gw_6msjUJV88_KPSNahGSVS28mX4eVB3QcXMdEOqIFx3cWyuy8iGrRwKiWrFlrds1i_L_wV2SW_uGSPwWR4SDpnytnmDccRflLVY559MQej-ZPAN9z1Juulq7r6OszqeL9gFR9dl1i0nHpJTq-5nqy2_bmG0MF-mkhBpGKUpi_I1ycZ_mKBNNHvw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:20:31.863 +08:00 [ERR] Request validation failed
2018-04-03 11:20:31.864 +08:00 [INF] {
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/home/logout"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583169161233727.YzZjZTljNzUtODdlMy00ZjE5LTg3NTEtNGVjN2YxNDYzMDM3OWM5MWQyZjgtODJhNy00MzRkLWI4NzAtZTE4MWQ5YWEyZmE3",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGD8KD5GXhHbVXkRo3Agwd2vi33RfmMSw1cyXd35GSzcau3KWFYM7N3BMDJpYW9AZjewsRl2ChO2iQG4PwZG7nPFQaTdcXgaceuuaAusgbEbv_5fGixW9gw_6msjUJV88_KPSNahGSVS28mX4eVB3QcXMdEOqIFx3cWyuy8iGrRwKiWrFlrds1i_L_wV2SW_uGSPwWR4SDpnytnmDccRflLVY559MQej-ZPAN9z1Juulq7r6OszqeL9gFR9dl1i0nHpJTq-5nqy2_bmG0MF-mkhBpGKUpi_I1ycZ_mKBNNHvw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:20:31.864 +08:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "Endpoint": "Authorize",
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLCP0E24FTR4:00000002",
  "TimeStamp": "2018-04-03T03:20:31Z",
  "ProcessId": 51980,
  "LocalIpAddress": "127.0.0.1:19430",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:20:31.950 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:20:31.951 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:20:42.356 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:20:42.356 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:20:42.356 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:20:42.356 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:20:42.357 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:20:42.357 +08:00 [DBG] Start authorize request
2018-04-03 11:20:42.357 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 11:20:42.357 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:30:05.561 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 11:30:05.656 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 11:30:05.661 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 11:30:05.661 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 11:30:05.661 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 11:30:05.661 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 11:33:44.605 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-03 11:33:44.613 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-03 11:33:44.613 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-03 11:33:44.616 +08:00 [DBG] Start discovery request
2018-04-03 11:33:44.994 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-03 11:33:44.995 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-03 11:33:44.995 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-03 11:33:44.998 +08:00 [DBG] Start key discovery request
2018-04-03 11:33:45.181 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:45.182 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:45.183 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:33:45.186 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:33:45.186 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:33:45.188 +08:00 [DBG] Start authorize request
2018-04-03 11:33:45.202 +08:00 [DBG] User in authorize request: e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a
2018-04-03 11:33:45.204 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:33:47.708 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:33:47.725 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "e3f080d6789c09f2ea3fb32778f7ce75287d795884e2138788aafd2a1fef151a",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
  "Nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
  "SessionId": "7cde6c4fecee1216d84031cfd77aa2ae",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:33:47.732 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:33:47.734 +08:00 [INF] Showing login: User is not active
2018-04-03 11:33:47.774 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:47.774 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:47.984 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:33:49.586 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:33:56.639 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.639 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.772 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.773 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.867 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 11:33:56.891 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.892 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:56.925 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 11:33:57.018 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Windows",
  "ProviderUserId": "PC-20160629URQR\\Administrator",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2CP2J1IJ:00000007",
  "TimeStamp": "2018-04-03T03:33:56Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:33:57.030 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:33:57.033 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 11:33:57.038 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:33:57.064 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 11:33:57.079 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:57.080 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:57.080 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:33:57.081 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:33:57.082 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:33:57.087 +08:00 [DBG] Start authorize callback request
2018-04-03 11:33:57.098 +08:00 [DBG] User in authorize request: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:33:57.098 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:33:57.099 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:33:57.099 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
  "Nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
  "SessionId": "a5a95a698b02cb5d1cb3f5ec37460366",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:33:57.100 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:33:57.118 +08:00 [DBG] user_consent grant with value: mvc.implicit|9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 not found in store.
2018-04-03 11:33:57.119 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 11:33:57.119 +08:00 [INF] Showing consent: User has not yet consented
2018-04-03 11:33:57.149 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:57.149 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:33:57.299 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:33:57.299 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:02.387 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 11:34:02.388 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:02.388 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:02.523 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:02.523 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:02.548 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:02.549 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:02.549 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:34:02.549 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:34:02.549 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:34:02.549 +08:00 [DBG] Start authorize callback request
2018-04-03 11:34:02.588 +08:00 [DBG] User in authorize request: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:34:02.588 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:02.589 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:02.589 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
  "Nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
  "SessionId": "a5a95a698b02cb5d1cb3f5ec37460366",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:02.589 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:34:02.590 +08:00 [DBG] user_consent grant with value: mvc.implicit|9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 not found in store.
2018-04-03 11:34:02.590 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 11:34:02.599 +08:00 [INF] User consented to scopes: ["openid","profile"]
2018-04-03 11:34:02.612 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2018-04-03 11:34:02.616 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:34:02.631 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 11:34:02.638 +08:00 [DBG] Getting claims for identity token for subject: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 and client: mvc.implicit
2018-04-03 11:34:02.644 +08:00 [DBG] Get profile called for subject 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 11:34:02.646 +08:00 [DBG] Issued claims: ["name"]
2018-04-03 11:34:02.706 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9v4A"
    }
  ],
  "ActivityId": "0HLCP2CP2J1IJ:0000000B",
  "TimeStamp": "2018-04-03T03:34:02Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:34:02.714 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiE8AZM0eCTVtPz4_dpRyzIhIuXocYFaAu1ETupO7WKpCzKNS_mjcGtSVqR_CzKCpVvobbSlHYl_ZzlBxiu9JQMAGeJZRWXfnq2iK4gnzDFTn8mxNI3zt11d8mCnpYNt68h_geiAfZZzh0QVxLf78nslYZvUEinjN7rCXHZ8YTZlQASyTNFWEJqjPjMOefofYjeC5RHG17z7f2tg8ZzbLn4XVNAnOEc3piV9le7UWw2R-pygh5m308m8DcQN-9nnP4euaIWDOlLRUrNjOcZN_deQXIwjRmEbvNUS-aCmbzGI0Q",
  "Scope": "openid profile"
}
2018-04-03 11:34:02.727 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:34:02.727 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:34:09.415 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:09.416 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:09.416 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 11:34:09.417 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 11:34:09.417 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 11:34:09.420 +08:00 [DBG] Processing signout request for 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:34:09.424 +08:00 [DBG] Start end session request validation
2018-04-03 11:34:09.428 +08:00 [DBG] Start identity token validation
2018-04-03 11:34:09.443 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 11:34:09.516 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 11:34:09.516 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 11:34:09.520 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522726442,
    "exp": 1522726742,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583232250848847.OWNlOTI3NGQtYmNjNy00N2Q3LTlkZjMtYTg2YTVlMzUxYmQyOWI2YWQ4OGEtMjMyMC00NmY2LWE1NGEtMjgzZGVjMGM0NGJk",
    "iat": 1522726442,
    "sid": "a5a95a698b02cb5d1cb3f5ec37460366",
    "sub": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
    "auth_time": 1522726437,
    "idp": "Windows",
    "name": "PC-20160629URQR\\Administrator",
    "amr": "external"
  }
}
2018-04-03 11:34:09.529 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGwcXkHH8UMdk3-mJa2jdiMsXn6h3d7PKCtlkaY5e28IV6hx040WH4o12KfnMydeCfQHBZIH_f5KXgw7VFUdV6wQghe2TZe3phcPANe8J1PPc7xm8rRrmZ5M9l3FH7Oeb5AjG56yEEav5Tlvjt_mNxj",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3MjY0NDIsImV4cCI6MTUyMjcyNjc0MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyMzIyNTA4NDg4NDcuT1dObE9USTNOR1F0WW1Oak55MDBOMlEzTFRsa1pqTXRZVGcyWVRWbE16VXhZbVF5T1dJMllXUTRPR0V0TWpNeU1DMDBObVkyTFdFMU5HRXRNamd6WkdWak1HTTBOR0prIiwiaWF0IjoxNTIyNzI2NDQyLCJzaWQiOiJhNWE5NWE2OThiMDJjYjVkMWNiM2Y1ZWMzNzQ2MDM2NiIsInN1YiI6IjlmZTJhYzk5MGQyZTMwNzViMmZiYzc4NWMyM2JkNDFmOTM0Njg0YjczOGYwYmQ1NmNiZDliZjNmODk4ZTY1YjciLCJhdXRoX3RpbWUiOjE1MjI3MjY0MzcsImlkcCI6IldpbmRvd3MiLCJuYW1lIjoiUEMtMjAxNjA2MjlVUlFSXFxBZG1pbmlzdHJhdG9yIiwiYW1yIjpbImV4dGVybmFsIl19.VkoogzRRBhwj1j12fv_ZoTCzRA8GH61beQIptMrQWcn59FQSsrrbtZSQ3lhwCPqqjtdKTiY4B98nnb1Nd_2IWNHFnU-fg5-rsV_IZ59wlDSIluxweMukfk2rBsn2DLCM21LnJ1J2PaYqRidHSSwwgY585CHQhs-4_Z1mWvzKSaEkvSQnQsHpYjIjupX8pPbp4cD9vHyzXj0DEme5sNRc1GvTUfxNR3JhhpS8XkQv6Y_vFemV9IYqNK5pmGGAWcmRATpn8gNXHWrqGl9cTAakqtGMpvNtlJ1vfPCIYmOLu3ELoFYCPE0XiIldOnEcsgcjYz1hUHU9aXRXIBtJ4L9v4A",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGwcXkHH8UMdk3-mJa2jdiMsXn6h3d7PKCtlkaY5e28IV6hx040WH4o12KfnMydeCfQHBZIH_f5KXgw7VFUdV6wQghe2TZe3phcPANe8J1PPc7xm8rRrmZ5M9l3FH7Oeb5AjG56yEEav5Tlvjt_mNxj",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:09.529 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 11:34:09.549 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:09.549 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:09.607 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 11:34:09.612 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "ActivityId": "0HLCP2CP2J1IJ:0000000D",
  "TimeStamp": "2018-04-03T03:34:09Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:34:09.916 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 11:34:09.918 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 11:34:09.918 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 11:34:09.921 +08:00 [DBG] Processing signout callback request
2018-04-03 11:34:09.930 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=a5a95a698b02cb5d1cb3f5ec37460366&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 11:34:09.930 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 11:34:09.938 +08:00 [INF] Successful signout callback.
2018-04-03 11:34:09.939 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=a5a95a698b02cb5d1cb3f5ec37460366&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 11:34:09.939 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 11:34:13.750 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:34:13.750 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:34:13.750 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:34:13.750 +08:00 [DBG] Start authorize request
2018-04-03 11:34:13.750 +08:00 [DBG] No user present in authorize request
2018-04-03 11:34:13.750 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:13.751 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:13.751 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHEK3XC0KQdKrSwRZdxmCR-06XV0ntn9-kQnzQeYd6CMhoQ7M9x_N9HECfejJgOng3b-KVKj-6436CY7VoxmltafmC7uT4-6SXVXR43xAYwwxwwZBSPFJOh3I-dxP3rcNjB4508hyKUXJ9vmGKEPcFZ7KERsIVfNrvUWkq2LHWYyCf79rPuOwYUuhkPrwnaNliVmMrkeFmiEK0fUZ0wR9YBS6inbN49mNnnSs8trN0MF1yxkqN_an7rpXef-aYRmadmp0oaK2dxTojNef1G224ZzGVz_8DmOOZTKg4UxkuihA",
  "Nonce": "636583232537346135.ZjcxOTkyMzQtZjczZC00Y2M0LTg5ODYtNTUwY2U1ZWIxYjkwZDgzZmQwYzUtZTVhOS00YTJlLWEzNDUtNjI1NDk2OTJlMjM3",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232537346135.ZjcxOTkyMzQtZjczZC00Y2M0LTg5ODYtNTUwY2U1ZWIxYjkwZDgzZmQwYzUtZTVhOS00YTJlLWEzNDUtNjI1NDk2OTJlMjM3",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHEK3XC0KQdKrSwRZdxmCR-06XV0ntn9-kQnzQeYd6CMhoQ7M9x_N9HECfejJgOng3b-KVKj-6436CY7VoxmltafmC7uT4-6SXVXR43xAYwwxwwZBSPFJOh3I-dxP3rcNjB4508hyKUXJ9vmGKEPcFZ7KERsIVfNrvUWkq2LHWYyCf79rPuOwYUuhkPrwnaNliVmMrkeFmiEK0fUZ0wR9YBS6inbN49mNnnSs8trN0MF1yxkqN_an7rpXef-aYRmadmp0oaK2dxTojNef1G224ZzGVz_8DmOOZTKg4UxkuihA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:13.752 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 11:34:13.790 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:13.790 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:15.943 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 11:34:15.977 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 11:34:15.978 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Windows",
  "ProviderUserId": "PC-20160629URQR\\Administrator",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2CP2J1IJ:00000012",
  "TimeStamp": "2018-04-03T03:34:15Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:34:15.978 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:34:15.978 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 11:34:15.979 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:34:15.979 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 11:34:16.005 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:16.005 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:16.006 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:34:16.006 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:34:16.006 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:34:16.006 +08:00 [DBG] Start authorize callback request
2018-04-03 11:34:16.006 +08:00 [DBG] User in authorize request: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:34:16.006 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:16.007 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:16.007 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHEK3XC0KQdKrSwRZdxmCR-06XV0ntn9-kQnzQeYd6CMhoQ7M9x_N9HECfejJgOng3b-KVKj-6436CY7VoxmltafmC7uT4-6SXVXR43xAYwwxwwZBSPFJOh3I-dxP3rcNjB4508hyKUXJ9vmGKEPcFZ7KERsIVfNrvUWkq2LHWYyCf79rPuOwYUuhkPrwnaNliVmMrkeFmiEK0fUZ0wR9YBS6inbN49mNnnSs8trN0MF1yxkqN_an7rpXef-aYRmadmp0oaK2dxTojNef1G224ZzGVz_8DmOOZTKg4UxkuihA",
  "Nonce": "636583232537346135.ZjcxOTkyMzQtZjczZC00Y2M0LTg5ODYtNTUwY2U1ZWIxYjkwZDgzZmQwYzUtZTVhOS00YTJlLWEzNDUtNjI1NDk2OTJlMjM3",
  "SessionId": "9549d04d84eabaa746fc85897db17a3c",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232537346135.ZjcxOTkyMzQtZjczZC00Y2M0LTg5ODYtNTUwY2U1ZWIxYjkwZDgzZmQwYzUtZTVhOS00YTJlLWEzNDUtNjI1NDk2OTJlMjM3",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHEK3XC0KQdKrSwRZdxmCR-06XV0ntn9-kQnzQeYd6CMhoQ7M9x_N9HECfejJgOng3b-KVKj-6436CY7VoxmltafmC7uT4-6SXVXR43xAYwwxwwZBSPFJOh3I-dxP3rcNjB4508hyKUXJ9vmGKEPcFZ7KERsIVfNrvUWkq2LHWYyCf79rPuOwYUuhkPrwnaNliVmMrkeFmiEK0fUZ0wR9YBS6inbN49mNnnSs8trN0MF1yxkqN_an7rpXef-aYRmadmp0oaK2dxTojNef1G224ZzGVz_8DmOOZTKg4UxkuihA",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:16.007 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:34:16.024 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-03 11:34:16.025 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 11:34:16.025 +08:00 [DBG] Getting claims for identity token for subject: 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 and client: mvc.implicit
2018-04-03 11:34:16.025 +08:00 [DBG] Get profile called for subject 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 11:34:16.025 +08:00 [DBG] Issued claims: ["name"]
2018-04-03 11:34:16.036 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****GvXg"
    }
  ],
  "ActivityId": "0HLCP2CP2J1IJ:00000013",
  "TimeStamp": "2018-04-03T03:34:16Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:34:16.036 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHEK3XC0KQdKrSwRZdxmCR-06XV0ntn9-kQnzQeYd6CMhoQ7M9x_N9HECfejJgOng3b-KVKj-6436CY7VoxmltafmC7uT4-6SXVXR43xAYwwxwwZBSPFJOh3I-dxP3rcNjB4508hyKUXJ9vmGKEPcFZ7KERsIVfNrvUWkq2LHWYyCf79rPuOwYUuhkPrwnaNliVmMrkeFmiEK0fUZ0wR9YBS6inbN49mNnnSs8trN0MF1yxkqN_an7rpXef-aYRmadmp0oaK2dxTojNef1G224ZzGVz_8DmOOZTKg4UxkuihA",
  "Scope": "openid profile"
}
2018-04-03 11:34:16.036 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:34:16.037 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:34:19.012 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:19.012 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:19.012 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 11:34:19.012 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 11:34:19.012 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 11:34:19.013 +08:00 [DBG] Processing signout request for 9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7
2018-04-03 11:34:19.013 +08:00 [DBG] Start end session request validation
2018-04-03 11:34:19.013 +08:00 [DBG] Start identity token validation
2018-04-03 11:34:19.014 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 11:34:19.019 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 11:34:19.019 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 11:34:19.020 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522726456,
    "exp": 1522726756,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583232537346135.ZjcxOTkyMzQtZjczZC00Y2M0LTg5ODYtNTUwY2U1ZWIxYjkwZDgzZmQwYzUtZTVhOS00YTJlLWEzNDUtNjI1NDk2OTJlMjM3",
    "iat": 1522726456,
    "sid": "9549d04d84eabaa746fc85897db17a3c",
    "sub": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
    "auth_time": 1522726455,
    "idp": "Windows",
    "name": "PC-20160629URQR\\Administrator",
    "amr": "external"
  }
}
2018-04-03 11:34:19.020 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWnp_QEtTkCh3m0-CUUVIfEfOvp718Hr8YgnGCmsqzAXAmv4OHkaf86SJEN036ujQVRrnuqZZSvgn93-bdl4ccZsSUkwBxGqRPRhY2QgHpkV2Lu4X0NN3i2YLcyJSpBuPLif2Eh17Pxp5W_KFNnMQ8",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3MjY0NTYsImV4cCI6MTUyMjcyNjc1NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyMzI1MzczNDYxMzUuWmpjeE9Ua3lNelF0WmpjelpDMDBZMk0wTFRnNU9EWXROVFV3WTJVMVpXSXhZamt3WkRnelptUXdZelV0WlRWaE9TMDBZVEpsTFdFek5EVXROakkxTkRrMk9USmxNak0zIiwiaWF0IjoxNTIyNzI2NDU2LCJzaWQiOiI5NTQ5ZDA0ZDg0ZWFiYWE3NDZmYzg1ODk3ZGIxN2EzYyIsInN1YiI6IjlmZTJhYzk5MGQyZTMwNzViMmZiYzc4NWMyM2JkNDFmOTM0Njg0YjczOGYwYmQ1NmNiZDliZjNmODk4ZTY1YjciLCJhdXRoX3RpbWUiOjE1MjI3MjY0NTUsImlkcCI6IldpbmRvd3MiLCJuYW1lIjoiUEMtMjAxNjA2MjlVUlFSXFxBZG1pbmlzdHJhdG9yIiwiYW1yIjpbImV4dGVybmFsIl19.T-MReEkWA3Wit_tlFnMAMNXOovUQozkaNL7NI4F1k2Xvd2ccmKGYA1UtA8YNcOTN7APZvPii8E4J13HLesnUiaRl5YBclh2fP5WtTAlNJ8ZiSQNX7LktrhrD5TWLoViuwfqo0Pqx9OagI6AGrDtslogtHgTHg5VcYX8LeaIjNErlkp6mLIlcwNgrbZfr4nR6jO6iWH1r1TJMC-rlExx33cFnzXJv8VtcJWBnpVe73SPg7WPJZvt3W8_LlhR-FrPX0Q_kosCJebYu66OHJLdSLTSjZ2F3KX5UzKFOgdMD6CO-ONRHZkA-QXGDdFjRxesKFLJKcUYdgtPEhXdlzDGvXg",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWnp_QEtTkCh3m0-CUUVIfEfOvp718Hr8YgnGCmsqzAXAmv4OHkaf86SJEN036ujQVRrnuqZZSvgn93-bdl4ccZsSUkwBxGqRPRhY2QgHpkV2Lu4X0NN3i2YLcyJSpBuPLif2Eh17Pxp5W_KFNnMQ8",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:19.020 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 11:34:19.036 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:19.036 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:34:19.061 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 11:34:19.061 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9fe2ac990d2e3075b2fbc785c23bd41f934684b738f0bd56cbd9bf3f898e65b7",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "ActivityId": "0HLCP2CP2J1IJ:00000015",
  "TimeStamp": "2018-04-03T03:34:19Z",
  "ProcessId": 49712,
  "LocalIpAddress": "127.0.0.1:15845",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:34:19.130 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 11:34:19.131 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 11:34:19.131 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 11:34:19.131 +08:00 [DBG] Processing signout callback request
2018-04-03 11:34:19.131 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=9549d04d84eabaa746fc85897db17a3c&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 11:34:19.131 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 11:34:19.132 +08:00 [INF] Successful signout callback.
2018-04-03 11:34:19.132 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=9549d04d84eabaa746fc85897db17a3c&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 11:34:19.132 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 11:34:20.685 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:34:20.685 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:34:20.686 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:34:20.686 +08:00 [DBG] Start authorize request
2018-04-03 11:34:20.686 +08:00 [DBG] No user present in authorize request
2018-04-03 11:34:20.686 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:20.686 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:34:20.687 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
  "Nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:34:20.687 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 11:34:20.721 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:34:20.722 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:07.703 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 11:37:07.790 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 11:37:07.796 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 11:37:07.796 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 11:37:07.797 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 11:37:07.797 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 11:37:18.343 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:37:18.352 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:37:18.352 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:37:18.355 +08:00 [DBG] Start authorize request
2018-04-03 11:37:18.367 +08:00 [DBG] No user present in authorize request
2018-04-03 11:37:18.370 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:18.408 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:18.501 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
  "Nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:18.506 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 11:37:18.690 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:18.692 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:22.410 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 11:37:22.478 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 11:37:22.536 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Windows",
  "ProviderUserId": "PC-20160629URQR\\Administrator",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2GMOQUP5:00000006",
  "TimeStamp": "2018-04-03T03:37:22Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:22.545 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:37:22.548 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 11:37:22.551 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:37:22.569 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 11:37:22.582 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:22.583 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:22.584 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:37:22.584 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:37:22.584 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:37:22.589 +08:00 [DBG] Start authorize callback request
2018-04-03 11:37:22.593 +08:00 [DBG] User in authorize request: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:22.594 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:22.594 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:22.594 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
  "Nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
  "SessionId": "b9c5dfc254292669a9ee157f0ff777d5",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:22.596 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:37:22.608 +08:00 [DBG] user_consent grant with value: mvc.implicit|222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 not found in store.
2018-04-03 11:37:22.609 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 11:37:22.609 +08:00 [INF] Showing consent: User has not yet consented
2018-04-03 11:37:22.628 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:22.628 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:22.695 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:22.695 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:23.250 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:23.250 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:25.968 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:25.968 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:26.122 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:26.122 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:26.153 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:26.153 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:26.153 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:37:26.153 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:37:26.153 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:37:26.153 +08:00 [DBG] Start authorize callback request
2018-04-03 11:37:26.190 +08:00 [DBG] User in authorize request: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:26.190 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:26.190 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:26.191 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
  "Nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
  "SessionId": "b9c5dfc254292669a9ee157f0ff777d5",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:26.191 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:37:26.191 +08:00 [DBG] user_consent grant with value: mvc.implicit|222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 not found in store.
2018-04-03 11:37:26.191 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 11:37:26.201 +08:00 [INF] User consented to scopes: ["openid","profile"]
2018-04-03 11:37:26.214 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2018-04-03 11:37:26.216 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:26.230 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 11:37:26.236 +08:00 [DBG] Getting claims for identity token for subject: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 and client: mvc.implicit
2018-04-03 11:37:26.242 +08:00 [DBG] Get profile called for subject 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 11:37:26.244 +08:00 [DBG] Issued claims: ["name"]
2018-04-03 11:37:26.310 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****EjPw"
    }
  ],
  "ActivityId": "0HLCP2GMOQUP5:0000000B",
  "TimeStamp": "2018-04-03T03:37:26Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:26.314 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFOafDQMDPC9AKeOKATXZW31Q-2wmsMOsuAXwN7DIpBTT1SWrcbsAHITwEkXA-BtspXZq_5AbKayZiP8lWRHwte88klI5mRl2ByIGiuEwiRiCbc3pu0B9haedeh4ZPSgGWNZuGsxVdE4BTKp0AcOGPeysbTSVhQZJJrNX4gq8ZvyqkUAFDrFgvqA584MnPsPcBw22A0pAPIEK0mDFh--PLAgJA3OI1Dnio_dco9ICIt5ZMc7UWtV3_hmfKMBM5Af88K-RpNPQ-PCdS6RmhvkKAgiuq6m6SpNLF1n4ufdSHDWg",
  "Scope": "openid profile"
}
2018-04-03 11:37:26.326 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:37:26.326 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:37:28.455 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:28.455 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:28.455 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 11:37:28.458 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 11:37:28.458 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 11:37:28.460 +08:00 [DBG] Processing signout request for 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:28.464 +08:00 [DBG] Start end session request validation
2018-04-03 11:37:28.467 +08:00 [DBG] Start identity token validation
2018-04-03 11:37:28.485 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 11:37:28.537 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 11:37:28.538 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 11:37:28.542 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522726646,
    "exp": 1522726946,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583234383235239.OWE5NDc3Y2ItOWQxMC00Yjc4LTlhM2EtNWQyMDU2ZjZlMmEyN2I5M2E4M2UtODA1OS00OWNlLWJjNDEtMjViYmMxZjI0ODk5",
    "iat": 1522726646,
    "sid": "b9c5dfc254292669a9ee157f0ff777d5",
    "sub": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
    "auth_time": 1522726642,
    "idp": "Windows",
    "name": "PC-20160629URQR\\Administrator",
    "amr": "external"
  }
}
2018-04-03 11:37:28.551 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGV8lwciKmRE65a7_tr42BmVZFWJM2pJEOmavBlTo_k_0nHQ6haQAK8DOyUHX4W6xZU6v52IxZ-fAV9ZAi8-G8oHoSN4xTXxQj8gdcwZwOa2n2QpRi3XK4cVjdr2Icps2F00-FbizK6XBuq-gvz2D5W",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3MjY2NDYsImV4cCI6MTUyMjcyNjk0NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyMzQzODMyMzUyMzkuT1dFNU5EYzNZMkl0T1dReE1DMDBZamM0TFRsaE0yRXROV1F5TURVMlpqWmxNbUV5TjJJNU0yRTRNMlV0T0RBMU9TMDBPV05sTFdKak5ERXRNalZpWW1NeFpqSTBPRGs1IiwiaWF0IjoxNTIyNzI2NjQ2LCJzaWQiOiJiOWM1ZGZjMjU0MjkyNjY5YTllZTE1N2YwZmY3NzdkNSIsInN1YiI6IjIyMmZiYWY2MTc5MDFkZjIxZTE4NWM0ODkxNWUzZmZiYzg2ZTVmYmJlNDY5MDVkMjU5ZGI5NGJjNWZlNWYyOTciLCJhdXRoX3RpbWUiOjE1MjI3MjY2NDIsImlkcCI6IldpbmRvd3MiLCJuYW1lIjoiUEMtMjAxNjA2MjlVUlFSXFxBZG1pbmlzdHJhdG9yIiwiYW1yIjpbImV4dGVybmFsIl19.BW5SAL7LDpA09vvwLO7e43t-br4eSQLsa16E7DoMTkiDVOAoovFX7h-szHV0rb9A_7cnO7ksA_HIsSqMbR3bbRdD3C7z1_sPMcqeyeuq4upjLbxecGOcVLEUnOW4MYxlfNgiJdh0_j3MTqGyf4wb_D2c0Seba-7AXZXULHt_HnsX4d2Ix7pfsiNdzlkKbe8wZ6n980TAyym8VVGL4SuiZbqXwhDDCZatZdFEC8jRsmnTiHlsZNguY4qiNK6By2urPv9mZo_j8Gac99wwVatiGc2QqC2i0sRE5XD1Mi3S-M4okQxHJFnbcQCY38ZAaHq-SJDrHxJGp3K-pwwWbCEjPw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGV8lwciKmRE65a7_tr42BmVZFWJM2pJEOmavBlTo_k_0nHQ6haQAK8DOyUHX4W6xZU6v52IxZ-fAV9ZAi8-G8oHoSN4xTXxQj8gdcwZwOa2n2QpRi3XK4cVjdr2Icps2F00-FbizK6XBuq-gvz2D5W",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:28.551 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 11:37:28.571 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:28.571 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:28.628 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 11:37:28.633 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "ActivityId": "0HLCP2GMOQUP5:0000000D",
  "TimeStamp": "2018-04-03T03:37:28Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:28.827 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 11:37:28.830 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 11:37:28.830 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 11:37:28.833 +08:00 [DBG] Processing signout callback request
2018-04-03 11:37:28.844 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=b9c5dfc254292669a9ee157f0ff777d5&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 11:37:28.844 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 11:37:28.852 +08:00 [INF] Successful signout callback.
2018-04-03 11:37:28.852 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=b9c5dfc254292669a9ee157f0ff777d5&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 11:37:28.853 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 11:37:30.930 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:37:30.930 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:37:30.930 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:37:30.931 +08:00 [DBG] Start authorize request
2018-04-03 11:37:30.931 +08:00 [DBG] No user present in authorize request
2018-04-03 11:37:30.931 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:30.931 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:30.932 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiG9qcsx6yePO7H6rk0i3tbeHuLyhmcGXZT1q1NT_bdx9YG0z1qGgfJJbhwp5lGVo8AaK4EW7PZDrU8U5HtmEjUsZRHcjuSZqBLiVYY-qnyXxtRrvU5gIeo4q0rZD4GntSCQOAtkXlAHeeZNHhxDEsGROuNqReSkGHbJuxomi1lBGDWEw4P2Q285ScCeRaxwIyBpy_Gen-7WgLqPgRSbcA2k3dQfUlsU1GXaZfZFoSPgsmZiY0sgd4hqg7lthbXxVAONsSQ6ugf0oF0KnOpxkaYQ_pplwgxvJVSIyeto4MVAZQ",
  "Nonce": "636583234509140415.ODJmYzJlMzEtNzMwYS00OGUwLThjODYtOGE0YzIxYWIzYWIxYWQ4Mjk0NWEtOWZmMi00NWY3LWI5MGQtZjhmMDdhMTEyNjZk",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234509140415.ODJmYzJlMzEtNzMwYS00OGUwLThjODYtOGE0YzIxYWIzYWIxYWQ4Mjk0NWEtOWZmMi00NWY3LWI5MGQtZjhmMDdhMTEyNjZk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiG9qcsx6yePO7H6rk0i3tbeHuLyhmcGXZT1q1NT_bdx9YG0z1qGgfJJbhwp5lGVo8AaK4EW7PZDrU8U5HtmEjUsZRHcjuSZqBLiVYY-qnyXxtRrvU5gIeo4q0rZD4GntSCQOAtkXlAHeeZNHhxDEsGROuNqReSkGHbJuxomi1lBGDWEw4P2Q285ScCeRaxwIyBpy_Gen-7WgLqPgRSbcA2k3dQfUlsU1GXaZfZFoSPgsmZiY0sgd4hqg7lthbXxVAONsSQ6ugf0oF0KnOpxkaYQ_pplwgxvJVSIyeto4MVAZQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:30.932 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 11:37:30.984 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:30.985 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:32.064 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 11:37:32.094 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 11:37:32.095 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Windows",
  "ProviderUserId": "PC-20160629URQR\\Administrator",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2GMOQUP5:00000012",
  "TimeStamp": "2018-04-03T03:37:32Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:32.095 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:37:32.095 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 11:37:32.095 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:37:32.095 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 11:37:32.114 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:32.115 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:32.115 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 11:37:32.115 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 11:37:32.115 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 11:37:32.115 +08:00 [DBG] Start authorize callback request
2018-04-03 11:37:32.115 +08:00 [DBG] User in authorize request: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:32.115 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:32.116 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:32.116 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiG9qcsx6yePO7H6rk0i3tbeHuLyhmcGXZT1q1NT_bdx9YG0z1qGgfJJbhwp5lGVo8AaK4EW7PZDrU8U5HtmEjUsZRHcjuSZqBLiVYY-qnyXxtRrvU5gIeo4q0rZD4GntSCQOAtkXlAHeeZNHhxDEsGROuNqReSkGHbJuxomi1lBGDWEw4P2Q285ScCeRaxwIyBpy_Gen-7WgLqPgRSbcA2k3dQfUlsU1GXaZfZFoSPgsmZiY0sgd4hqg7lthbXxVAONsSQ6ugf0oF0KnOpxkaYQ_pplwgxvJVSIyeto4MVAZQ",
  "Nonce": "636583234509140415.ODJmYzJlMzEtNzMwYS00OGUwLThjODYtOGE0YzIxYWIzYWIxYWQ4Mjk0NWEtOWZmMi00NWY3LWI5MGQtZjhmMDdhMTEyNjZk",
  "SessionId": "10f76fc1449d437139e184b9beb15dc9",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234509140415.ODJmYzJlMzEtNzMwYS00OGUwLThjODYtOGE0YzIxYWIzYWIxYWQ4Mjk0NWEtOWZmMi00NWY3LWI5MGQtZjhmMDdhMTEyNjZk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiG9qcsx6yePO7H6rk0i3tbeHuLyhmcGXZT1q1NT_bdx9YG0z1qGgfJJbhwp5lGVo8AaK4EW7PZDrU8U5HtmEjUsZRHcjuSZqBLiVYY-qnyXxtRrvU5gIeo4q0rZD4GntSCQOAtkXlAHeeZNHhxDEsGROuNqReSkGHbJuxomi1lBGDWEw4P2Q285ScCeRaxwIyBpy_Gen-7WgLqPgRSbcA2k3dQfUlsU1GXaZfZFoSPgsmZiY0sgd4hqg7lthbXxVAONsSQ6ugf0oF0KnOpxkaYQ_pplwgxvJVSIyeto4MVAZQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:32.116 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 11:37:32.130 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-03 11:37:32.131 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 11:37:32.131 +08:00 [DBG] Getting claims for identity token for subject: 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 and client: mvc.implicit
2018-04-03 11:37:32.131 +08:00 [DBG] Get profile called for subject 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 11:37:32.131 +08:00 [DBG] Issued claims: ["name"]
2018-04-03 11:37:32.139 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yv2w"
    }
  ],
  "ActivityId": "0HLCP2GMOQUP5:00000013",
  "TimeStamp": "2018-04-03T03:37:32Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:32.139 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiG9qcsx6yePO7H6rk0i3tbeHuLyhmcGXZT1q1NT_bdx9YG0z1qGgfJJbhwp5lGVo8AaK4EW7PZDrU8U5HtmEjUsZRHcjuSZqBLiVYY-qnyXxtRrvU5gIeo4q0rZD4GntSCQOAtkXlAHeeZNHhxDEsGROuNqReSkGHbJuxomi1lBGDWEw4P2Q285ScCeRaxwIyBpy_Gen-7WgLqPgRSbcA2k3dQfUlsU1GXaZfZFoSPgsmZiY0sgd4hqg7lthbXxVAONsSQ6ugf0oF0KnOpxkaYQ_pplwgxvJVSIyeto4MVAZQ",
  "Scope": "openid profile"
}
2018-04-03 11:37:32.140 +08:00 [DBG] Augmenting SignInContext
2018-04-03 11:37:32.140 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 11:37:33.994 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:33.994 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:33.994 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 11:37:33.995 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 11:37:33.995 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 11:37:33.995 +08:00 [DBG] Processing signout request for 222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297
2018-04-03 11:37:33.995 +08:00 [DBG] Start end session request validation
2018-04-03 11:37:33.995 +08:00 [DBG] Start identity token validation
2018-04-03 11:37:33.996 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 11:37:34.000 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 11:37:34.000 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 11:37:34.000 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522726652,
    "exp": 1522726952,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583234509140415.ODJmYzJlMzEtNzMwYS00OGUwLThjODYtOGE0YzIxYWIzYWIxYWQ4Mjk0NWEtOWZmMi00NWY3LWI5MGQtZjhmMDdhMTEyNjZk",
    "iat": 1522726652,
    "sid": "10f76fc1449d437139e184b9beb15dc9",
    "sub": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
    "auth_time": 1522726652,
    "idp": "Windows",
    "name": "PC-20160629URQR\\Administrator",
    "amr": "external"
  }
}
2018-04-03 11:37:34.000 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHlErWzfhMUPRoAGY1286VV0W1l6VEfCQb3uGtcsm1dLf0cgO66QWB91zAvfNLdDzy3Ase0-5UeAmCqrnL3rfwDkLc2aVv7hm19H87m4r191NiR5QQ8pDOZXggGuzN1NZ28ZVhSbEjTTdm4cB2kfVHV",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3MjY2NTIsImV4cCI6MTUyMjcyNjk1MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyMzQ1MDkxNDA0MTUuT0RKbVl6SmxNekV0TnpNd1lTMDBPR1V3TFRoak9EWXRPR0UwWXpJeFlXSXpZV0l4WVdRNE1qazBOV0V0T1dabU1pMDBOV1kzTFdJNU1HUXRaamhtTURkaE1URXlOalprIiwiaWF0IjoxNTIyNzI2NjUyLCJzaWQiOiIxMGY3NmZjMTQ0OWQ0MzcxMzllMTg0YjliZWIxNWRjOSIsInN1YiI6IjIyMmZiYWY2MTc5MDFkZjIxZTE4NWM0ODkxNWUzZmZiYzg2ZTVmYmJlNDY5MDVkMjU5ZGI5NGJjNWZlNWYyOTciLCJhdXRoX3RpbWUiOjE1MjI3MjY2NTIsImlkcCI6IldpbmRvd3MiLCJuYW1lIjoiUEMtMjAxNjA2MjlVUlFSXFxBZG1pbmlzdHJhdG9yIiwiYW1yIjpbImV4dGVybmFsIl19.Y9pWCdQ6jUKmZbreGUDu7MG_9XlAZqbwaspjczlAtyD_uxt83lWHP8gnXP0aBtqzBb3iopjsteV_dHSHMmcKUvsWK5MIWGKjDEi-m1RmyZxWOAEI7JIsCA5lPjkP-Sx_HF8g5dog4suYa7WpvR7GssLEsfeVaxPrx9gyryE1m47L5wlR1G9W5B9IVso6cyc5R8vbQdijhofGKHv8YJrdiwGIuoChpvqAlkCD0VK5gQWFFhovaWeXWpNdmDW7DqW-7UeWjWsah-5iByDSKa1CpP_vbkz5z4p_JiADzOyxiwa6ZKvFX7n7kRY70p2kQE_7ZERkbciKr2h8sZ8SzLyv2w",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHlErWzfhMUPRoAGY1286VV0W1l6VEfCQb3uGtcsm1dLf0cgO66QWB91zAvfNLdDzy3Ase0-5UeAmCqrnL3rfwDkLc2aVv7hm19H87m4r191NiR5QQ8pDOZXggGuzN1NZ28ZVhSbEjTTdm4cB2kfVHV",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:34.001 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 11:37:34.017 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:34.017 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 11:37:34.035 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 11:37:34.036 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "222fbaf617901df21e185c48915e3ffbc86e5fbbe46905d259db94bc5fe5f297",
  "DisplayName": "PC-20160629URQR\\Administrator",
  "ActivityId": "0HLCP2GMOQUP5:00000015",
  "TimeStamp": "2018-04-03T03:37:34Z",
  "ProcessId": 40848,
  "LocalIpAddress": "127.0.0.1:17862",
  "RemoteIpAddress": "::1"
}
2018-04-03 11:37:34.091 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 11:37:34.091 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 11:37:34.091 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 11:37:34.091 +08:00 [DBG] Processing signout callback request
2018-04-03 11:37:34.091 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=10f76fc1449d437139e184b9beb15dc9&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 11:37:34.092 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 11:37:34.092 +08:00 [INF] Successful signout callback.
2018-04-03 11:37:34.092 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=10f76fc1449d437139e184b9beb15dc9&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 11:37:34.092 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 11:37:35.634 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 11:37:35.634 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 11:37:35.634 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 11:37:35.634 +08:00 [DBG] Start authorize request
2018-04-03 11:37:35.634 +08:00 [DBG] No user present in authorize request
2018-04-03 11:37:35.634 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:35.634 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:37:35.635 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiE2vZACllfsvOiMejQ4bXOFFbl24LV0CYGiv5UfZggvq5MlCBIBaOPtp9JMxzTxhX6ki3-qGIjhedmpAwqZV8vkK1KH1oHFSNW7YNrT-GcLZTk_7yn0cECwtb_eF7sDtYcPjlW8mdmlGdlTlg6Ny6EtC0542EoeZDvgIy8q1I87lL8U1R0h1_EX_aefofji0VYAvQdHrmDdJLZPJ469UxAKSLDjRB9w1iM5NS_xJl95Y3kCNIKGv0DtHDNQPPvpjFSPQNEbeiktkJdx30dg30h60cslDf6li0PdNIESxpsnfw",
  "Nonce": "636583234556229831.NWJhMmIwYTUtNzE0ZS00MTUwLWIxZjMtNDk5MDhmMzUwYzVlY2IwODFhYWEtYzJjZC00YWVjLWJjYjgtYTVlOTQyODQwMjYw",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583234556229831.NWJhMmIwYTUtNzE0ZS00MTUwLWIxZjMtNDk5MDhmMzUwYzVlY2IwODFhYWEtYzJjZC00YWVjLWJjYjgtYTVlOTQyODQwMjYw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiE2vZACllfsvOiMejQ4bXOFFbl24LV0CYGiv5UfZggvq5MlCBIBaOPtp9JMxzTxhX6ki3-qGIjhedmpAwqZV8vkK1KH1oHFSNW7YNrT-GcLZTk_7yn0cECwtb_eF7sDtYcPjlW8mdmlGdlTlg6Ny6EtC0542EoeZDvgIy8q1I87lL8U1R0h1_EX_aefofji0VYAvQdHrmDdJLZPJ469UxAKSLDjRB9w1iM5NS_xJl95Y3kCNIKGv0DtHDNQPPvpjFSPQNEbeiktkJdx30dg30h60cslDf6li0PdNIESxpsnfw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 11:37:35.635 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 11:37:35.680 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:37:35.681 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:43:56.877 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:43:56.877 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:56:09.524 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-03 11:56:09.583 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-03 11:56:09.589 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-03 11:56:09.589 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-03 11:56:09.590 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-03 11:56:09.590 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-03 11:56:29.404 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:56:29.463 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 11:58:04.091 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 11:58:04.092 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:09.046 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:09.046 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:09.978 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:09.978 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:10.918 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:10.919 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:11.506 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:11.507 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:12.187 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:12.187 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:36.258 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:36.258 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:44.235 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:00:44.236 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:00:58.381 +08:00 [INF] AuthenticationScheme: demoidsrv was challenged.
2018-04-03 12:01:07.024 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:01:07.025 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:25:58.957 +08:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 12:25:59.133 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2RB15N0I:00000001",
  "TimeStamp": "2018-04-03T04:25:59Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:25:59.145 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:25:59.147 +08:00 [DBG] Adding idp claim with value: local
2018-04-03 12:25:59.147 +08:00 [DBG] Adding amr claim with value: pwd
2018-04-03 12:25:59.179 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:25:59.201 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:25:59.202 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:25:59.202 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 12:25:59.208 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 12:25:59.208 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 12:25:59.211 +08:00 [DBG] Start authorize callback request
2018-04-03 12:25:59.220 +08:00 [DBG] User in authorize request: 88421113
2018-04-03 12:25:59.220 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:25:59.221 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:25:59.242 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
  "Nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
  "SessionId": "59d792c77f40f47fb7746212e6aa374e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:25:59.250 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:25:59.261 +08:00 [DBG] user_consent grant with value: mvc.implicit|88421113 not found in store.
2018-04-03 12:25:59.261 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 12:25:59.262 +08:00 [INF] Showing consent: User has not yet consented
2018-04-03 12:25:59.274 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:25:59.275 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:25:59.348 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:25:59.348 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:01.880 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 12:26:01.881 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:01.881 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:01.934 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:01.935 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:01.956 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:01.956 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:01.956 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 12:26:01.956 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 12:26:01.956 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 12:26:01.956 +08:00 [DBG] Start authorize callback request
2018-04-03 12:26:01.984 +08:00 [DBG] User in authorize request: 88421113
2018-04-03 12:26:01.985 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:01.985 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:01.985 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
  "Nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
  "SessionId": "59d792c77f40f47fb7746212e6aa374e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583232606700003.NWQ2Yzk5ZWQtOGRiZC00MWQwLWI3MjEtOGM5M2JhYjlkMmUwMTQzM2NiZDAtODE0Zi00YjIwLTliNWItMDA3OTljNDY0ODhi",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:01.985 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:26:01.986 +08:00 [DBG] user_consent grant with value: mvc.implicit|88421113 not found in store.
2018-04-03 12:26:01.986 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 12:26:01.999 +08:00 [INF] User consented to scopes: ["openid","profile"]
2018-04-03 12:26:02.011 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2018-04-03 12:26:02.014 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 88421113
2018-04-03 12:26:02.029 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 12:26:02.036 +08:00 [DBG] Getting claims for identity token for subject: 88421113 and client: mvc.implicit
2018-04-03 12:26:02.041 +08:00 [DBG] Get profile called for subject 88421113 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 12:26:02.043 +08:00 [DBG] Issued claims: ["name","given_name","family_name","website"]
2018-04-03 12:26:02.159 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "88421113",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MhcQ"
    }
  ],
  "ActivityId": "0HLCP2RB15N0I:00000005",
  "TimeStamp": "2018-04-03T04:26:02Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:02.166 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "88421113",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEgla1-zSHwheG-Ac7SQRFtIMNBr12SdwgjcNG-JiIMVWsNmY4tlpRJ3OsXsQ5uR7LZS1-ufNVsr19lvRu1dAAz46OEjVhJFJNDxUUXouLj2GyHSqfxXUCOU52S4lcVG73KkCEQ7S5h5mo-66LPXzT_E6FncXQQQTHqsLGuQv0aYEKtEgg8p2MdNloTcE2P18gHRnROhPLjSbXYCYSPoGdV0JvOUG1Hcgi5acZsiGwuqVZMvEv01Gi99ZH9ojkTNchAPxQqwbNnabBIFOyd1SHPkUClAn4lBsLUC1EZ7ENUwQ",
  "Scope": "openid profile"
}
2018-04-03 12:26:02.183 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:26:02.184 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:26:28.919 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:28.919 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:28.919 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 12:26:28.920 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 12:26:28.920 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 12:26:28.923 +08:00 [DBG] Start authorize request
2018-04-03 12:26:28.923 +08:00 [DBG] User in authorize request: 88421113
2018-04-03 12:26:28.923 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:28.924 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:28.924 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
  "Nonce": "636583263888813659.NGU2ZDdiMDQtZjY5NC00YmYzLTllNzAtNTIwNDkyMWVjMzk1YTQ4ZjJkMzUtNDk1Zi00NTY5LTk5ODYtNTNjYjE4MzNkYzUx",
  "SessionId": "59d792c77f40f47fb7746212e6aa374e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583263888813659.NGU2ZDdiMDQtZjY5NC00YmYzLTllNzAtNTIwNDkyMWVjMzk1YTQ4ZjJkMzUtNDk1Zi00NTY5LTk5ODYtNTNjYjE4MzNkYzUx",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:28.924 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:26:28.937 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-03 12:26:28.937 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 12:26:28.937 +08:00 [DBG] Getting claims for identity token for subject: 88421113 and client: mvc.implicit
2018-04-03 12:26:28.938 +08:00 [DBG] Get profile called for subject 88421113 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 12:26:28.940 +08:00 [DBG] Issued claims: ["name","given_name","family_name","website"]
2018-04-03 12:26:28.953 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "88421113",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kPvg"
    }
  ],
  "ActivityId": "0HLCP2RB15N0I:00000006",
  "TimeStamp": "2018-04-03T04:26:28Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:28.954 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "88421113",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
  "Scope": "openid profile"
}
2018-04-03 12:26:29.208 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:29.208 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:29.208 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 12:26:29.209 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 12:26:29.209 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 12:26:29.209 +08:00 [DBG] Start authorize request
2018-04-03 12:26:29.209 +08:00 [DBG] User in authorize request: 88421113
2018-04-03 12:26:29.209 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:29.210 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:29.210 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
  "Nonce": "636583263888813659.NGU2ZDdiMDQtZjY5NC00YmYzLTllNzAtNTIwNDkyMWVjMzk1YTQ4ZjJkMzUtNDk1Zi00NTY5LTk5ODYtNTNjYjE4MzNkYzUx",
  "SessionId": "59d792c77f40f47fb7746212e6aa374e",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583263888813659.NGU2ZDdiMDQtZjY5NC00YmYzLTllNzAtNTIwNDkyMWVjMzk1YTQ4ZjJkMzUtNDk1Zi00NTY5LTk5ODYtNTNjYjE4MzNkYzUx",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:29.210 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:26:29.216 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-03 12:26:29.216 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 12:26:29.216 +08:00 [DBG] Getting claims for identity token for subject: 88421113 and client: mvc.implicit
2018-04-03 12:26:29.216 +08:00 [DBG] Get profile called for subject 88421113 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 12:26:29.216 +08:00 [DBG] Issued claims: ["name","given_name","family_name","website"]
2018-04-03 12:26:29.227 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "88421113",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****R6HA"
    }
  ],
  "ActivityId": "0HLCP2RB15N0I:00000007",
  "TimeStamp": "2018-04-03T04:26:29Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:29.227 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "88421113",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEwg1E3jCT76NE6Sr7uShXIsHubtLRofo3x5EQLhK5qqR9CHPjGiSKcwiAg6tEsu2XBuLv6onPoaH45ORQqw1WmeYL8hKHidECABANqz11RmGFYy5iTmiMtJTRydT3Us1PvTOPZG4HfMxu-Gzv0HxeED5hpV7At3PtoAJ_2rT_yo-JSkOxw9hMcBfhDbtiXgqPT2nJ0HWpakE0qy4c_fQjQGOt5yHzzMIUuzEP0j_33MjIJmFcSvCuk6M2qNqWTDtaeimG8VPlHhUcC2uvpV7d-eKAdR6hSww-RX0ogYVbwaQ",
  "Scope": "openid profile"
}
2018-04-03 12:26:35.052 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:35.052 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:35.052 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 12:26:35.054 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 12:26:35.055 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 12:26:35.059 +08:00 [DBG] Processing signout request for 88421113
2018-04-03 12:26:35.062 +08:00 [DBG] Start end session request validation
2018-04-03 12:26:35.067 +08:00 [DBG] Start identity token validation
2018-04-03 12:26:35.077 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 12:26:35.145 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 12:26:35.145 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 12:26:35.152 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522729589,
    "exp": 1522729889,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583263888813659.NGU2ZDdiMDQtZjY5NC00YmYzLTllNzAtNTIwNDkyMWVjMzk1YTQ4ZjJkMzUtNDk1Zi00NTY5LTk5ODYtNTNjYjE4MzNkYzUx",
    "iat": 1522729589,
    "sid": "59d792c77f40f47fb7746212e6aa374e",
    "sub": "88421113",
    "auth_time": 1522729559,
    "idp": "local",
    "name": "Bob Smith",
    "given_name": "Bob",
    "family_name": "Smith",
    "website": "http://bob.com",
    "amr": "pwd"
  }
}
2018-04-03 12:26:35.160 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "88421113",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFxEiPjx-IlJ6B6igMqoMx1RbhW8KYMyoxc4-3zFrpKFOStidAZUGw7qeLTR9NHp7DHuGdkyhouKW0NB_0o2oHwRE9EG7As8LE2bG58hFTqfrCcwBpXKXiQNjb0dKxgkSvkBLb2Vay9LFjUzw25ipZS",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3Mjk1ODksImV4cCI6MTUyMjcyOTg4OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyNjM4ODg4MTM2NTkuTkdVMlpEZGlNRFF0WmpZNU5DMDBZbVl6TFRsbE56QXROVEl3TkRreU1XVmpNemsxWVRRNFpqSmtNelV0TkRrMVppMDBOVFk1TFRrNU9EWXROVE5qWWpFNE16TmtZelV4IiwiaWF0IjoxNTIyNzI5NTg5LCJzaWQiOiI1OWQ3OTJjNzdmNDBmNDdmYjc3NDYyMTJlNmFhMzc0ZSIsInN1YiI6Ijg4NDIxMTEzIiwiYXV0aF90aW1lIjoxNTIyNzI5NTU5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJCb2IgU21pdGgiLCJnaXZlbl9uYW1lIjoiQm9iIiwiZmFtaWx5X25hbWUiOiJTbWl0aCIsIndlYnNpdGUiOiJodHRwOi8vYm9iLmNvbSIsImFtciI6WyJwd2QiXX0.foKu3mX0oi6FPH4d5nroZRWkD90lMt27-p2TizVyS0q0MuoxC8bE8NkBCYdMI5DlZ9OlwjjlQrJOP6IjDBAqoaZd_DvEgENXXeVqwh7WKBGeZPSSrVU6cc1BkQUO7cBWthIHm9Q-9FK8o5n7ClQgwXVeuujLF0b7Cgz_yrMgJ6j9yoYSVdaaXEILw-lHXgEuUlVbcO_4fjI5bU6gZMLsX0oW5zfqFItGZtPCERndzdVPtpj1I3CKLk9T3wSL6dGgrm2VOv_ZkNQNtio-i5RibAh82V1awn96C3hXQZIeARHJMHzJLUgoCZaY_fNmUqXkCj5TsOsny3uhIvmrUhR6HA",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFxEiPjx-IlJ6B6igMqoMx1RbhW8KYMyoxc4-3zFrpKFOStidAZUGw7qeLTR9NHp7DHuGdkyhouKW0NB_0o2oHwRE9EG7As8LE2bG58hFTqfrCcwBpXKXiQNjb0dKxgkSvkBLb2Vay9LFjUzw25ipZS",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:35.160 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 12:26:35.193 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:35.193 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:35.258 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 12:26:35.264 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "ActivityId": "0HLCP2RB15N0I:00000009",
  "TimeStamp": "2018-04-03T04:26:35Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:35.564 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 12:26:35.566 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 12:26:35.566 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 12:26:35.571 +08:00 [DBG] Processing signout callback request
2018-04-03 12:26:35.582 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=59d792c77f40f47fb7746212e6aa374e&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 12:26:35.583 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 12:26:35.590 +08:00 [INF] Successful signout callback.
2018-04-03 12:26:35.590 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=59d792c77f40f47fb7746212e6aa374e&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 12:26:35.590 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 12:26:36.974 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 12:26:36.974 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 12:26:36.974 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 12:26:36.974 +08:00 [DBG] Start authorize request
2018-04-03 12:26:36.975 +08:00 [DBG] No user present in authorize request
2018-04-03 12:26:36.975 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:36.975 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:36.975 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
  "Nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:36.975 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 12:26:37.041 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:37.042 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:41.229 +08:00 [INF] AuthenticationScheme: demoidsrv was challenged.
2018-04-03 12:26:47.648 +08:00 [DBG] CORS request made for path: /signin-idsrv from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 12:26:47.713 +08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-04-03 12:26:47.811 +08:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-04-03 12:26:47.818 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "demoidsrv",
  "ProviderUserId": "818727",
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "DisplayName": "Alice Smith",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2RB15N0I:0000000F",
  "TimeStamp": "2018-04-03T04:26:47Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:47.820 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:26:47.820 +08:00 [DBG] Adding amr claim with value: external
2018-04-03 12:26:47.820 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:26:47.821 +08:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-04-03 12:26:47.857 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:47.857 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:47.857 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 12:26:47.858 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 12:26:47.858 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 12:26:47.858 +08:00 [DBG] Start authorize callback request
2018-04-03 12:26:47.859 +08:00 [DBG] User in authorize request: f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50
2018-04-03 12:26:47.859 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:47.859 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:47.859 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
  "Nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
  "SessionId": "2688571cc9858f92506acf172f3e6118",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:47.860 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:26:47.860 +08:00 [DBG] user_consent grant with value: mvc.implicit|f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50 not found in store.
2018-04-03 12:26:47.860 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 12:26:47.860 +08:00 [INF] Showing consent: User has not yet consented
2018-04-03 12:26:47.909 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:47.909 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:47.928 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:47.928 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:50.941 +08:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 12:26:50.942 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:50.942 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:50.959 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:50.960 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:50.986 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:50.986 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:50.986 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 12:26:50.988 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 12:26:50.988 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 12:26:50.988 +08:00 [DBG] Start authorize callback request
2018-04-03 12:26:50.988 +08:00 [DBG] User in authorize request: f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50
2018-04-03 12:26:50.988 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:26:50.989 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:26:50.989 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
  "Nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
  "SessionId": "2688571cc9858f92506acf172f3e6118",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:50.990 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:26:50.990 +08:00 [DBG] user_consent grant with value: mvc.implicit|f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50 not found in store.
2018-04-03 12:26:50.990 +08:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-03 12:26:50.990 +08:00 [INF] User consented to scopes: ["openid","profile"]
2018-04-03 12:26:50.998 +08:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2018-04-03 12:26:50.998 +08:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50
2018-04-03 12:26:51.001 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 12:26:51.001 +08:00 [DBG] Getting claims for identity token for subject: f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50 and client: mvc.implicit
2018-04-03 12:26:51.001 +08:00 [DBG] Get profile called for subject f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 12:26:51.001 +08:00 [DBG] Issued claims: ["name","given_name","family_name","website"]
2018-04-03 12:26:51.008 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7-hQ"
    }
  ],
  "ActivityId": "0HLCP2RB15N0I:00000013",
  "TimeStamp": "2018-04-03T04:26:51Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:51.008 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiEatk_KRKKM5rQ0SO3AyF7-RzCmY2hIG_RT0c9MFvvHc4lA4kHbbRDlIc5zg7uo6BbnfOMQ6Xa-t1wDt2c9ZSBIU0LXhGRS9Iwz0uYBR2J-5W3gEgsCEUFgYKzYCnTpNplGf0Lx_nVzxziWrSecKq8P0FF6Xtk_PxVWzUSuimq4x8QSDaKYcj42xPgePQtM-oQ3y8wOQRvvk2WyiNCAJz6aA__sgwLDltxteN7Seyumtxy4v2eDncRYbKs-QLntt0pk18a35wsY5s0QFoXjzuRsU9I-eY6Zd4XC_lXnmt-7kg",
  "Scope": "openid profile"
}
2018-04-03 12:26:51.010 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:26:51.010 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:26:56.776 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:56.776 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:56.776 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 12:26:56.777 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 12:26:56.777 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 12:26:56.777 +08:00 [DBG] Processing signout request for f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50
2018-04-03 12:26:56.777 +08:00 [DBG] Start end session request validation
2018-04-03 12:26:56.777 +08:00 [DBG] Start identity token validation
2018-04-03 12:26:56.778 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 12:26:56.787 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 12:26:56.788 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 12:26:56.788 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522729611,
    "exp": 1522729911,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583263969003659.ODAzMWZhNzctYmIyNy00ZDI4LTk3ZTAtZTMzZmYyNDRiNThiOGQxMTljYmEtODI0ZC00YzQxLTk0OTUtZDlhYWVmYThlMWQx",
    "iat": 1522729611,
    "sid": "2688571cc9858f92506acf172f3e6118",
    "sub": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
    "auth_time": 1522729607,
    "idp": "demoidsrv",
    "name": "Alice Smith",
    "given_name": "Alice",
    "family_name": "Smith",
    "website": "http://alice.com",
    "amr": "external"
  }
}
2018-04-03 12:26:56.788 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFcftLg0tGOMAXm3rSui92UYWJU4gYZowjJUKdP4fXy_fS4z7yJXGBcd47iTCMaI6iMC3rc5Lh81Bl0CYGpvktbwiD0PkIzqc43zCakbgCtbKdlwVyFg7JPhyaVwIkeMW5ZdEtzbVIU1q7osgPCq08s",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3Mjk2MTEsImV4cCI6MTUyMjcyOTkxMSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyNjM5NjkwMDM2NTkuT0RBek1XWmhOemN0WW1JeU55MDBaREk0TFRrM1pUQXRaVE16Wm1ZeU5EUmlOVGhpT0dReE1UbGpZbUV0T0RJMFpDMDBZelF4TFRrME9UVXRaRGxoWVdWbVlUaGxNV1F4IiwiaWF0IjoxNTIyNzI5NjExLCJzaWQiOiIyNjg4NTcxY2M5ODU4ZjkyNTA2YWNmMTcyZjNlNjExOCIsInN1YiI6ImYzZWRkMWIxOTJmY2U0M2JmMWUwZjc1NDZjMDE5YTFkMzBiOGU1ZmFiODMzOGM4NzI0Nzc1NjNlNGFiY2ZjNTAiLCJhdXRoX3RpbWUiOjE1MjI3Mjk2MDcsImlkcCI6ImRlbW9pZHNydiIsIm5hbWUiOiJBbGljZSBTbWl0aCIsImdpdmVuX25hbWUiOiJBbGljZSIsImZhbWlseV9uYW1lIjoiU21pdGgiLCJ3ZWJzaXRlIjoiaHR0cDovL2FsaWNlLmNvbSIsImFtciI6WyJleHRlcm5hbCJdfQ.dquuebCRdSzvn8gechmYzBvXXSqnFMor8P1P2-kE9o7Kfr4M12NiH09OUVOWwKlq8UhYoYieEjLWuCmuI1_Zxa2YE24t4XSo-1qhnxfMMXiRIoPfBhVJ5zsfeUuYKvbVr0Jlv1XiioCbScqXYzQXBH269LWgQqbiuJ9JPrSgIJzZhmM_68UxRRTkR5NfCOk9ZG2Y33lO7nj_6uoSX8ceNuSFCDP5fjk-hgs9CvhZBXH8ohiueIlqIWk_O1U26YybXD8o0y6YKl3EzNTcswM4pupnth-l9iu9ZvWSvTyGiVRipVZ2A_OlFBO05XLU5rX9lpNI6OU__HmAbS3yPl7-hQ",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFcftLg0tGOMAXm3rSui92UYWJU4gYZowjJUKdP4fXy_fS4z7yJXGBcd47iTCMaI6iMC3rc5Lh81Bl0CYGpvktbwiD0PkIzqc43zCakbgCtbKdlwVyFg7JPhyaVwIkeMW5ZdEtzbVIU1q7osgPCq08s",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:26:56.789 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 12:26:56.807 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:56.807 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:56.846 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 12:26:56.846 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "f3edd1b192fce43bf1e0f7546c019a1d30b8e5fab8338c872477563e4abcfc50",
  "DisplayName": "Alice Smith",
  "ActivityId": "0HLCP2RB15N0I:00000015",
  "TimeStamp": "2018-04-03T04:26:56Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:26:56.885 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:26:56.886 +08:00 [INF] AuthenticationScheme: demoidsrv signed out.
2018-04-03 12:26:59.535 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 12:26:59.536 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 12:26:59.536 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 12:26:59.536 +08:00 [DBG] Processing signout callback request
2018-04-03 12:26:59.536 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=2688571cc9858f92506acf172f3e6118&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 12:26:59.536 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 12:26:59.536 +08:00 [INF] Successful signout callback.
2018-04-03 12:26:59.536 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=2688571cc9858f92506acf172f3e6118&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 12:26:59.537 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 12:27:01.417 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 12:27:01.418 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 12:27:01.418 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 12:27:01.418 +08:00 [DBG] Start authorize request
2018-04-03 12:27:01.418 +08:00 [DBG] No user present in authorize request
2018-04-03 12:27:01.418 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:27:01.418 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:27:01.419 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWTZhxXzptbgtWExjY0abKqkatD6XkLA2bcyCK7D1aSSV8cM_RXT7MAA7qZur2un5Q6G_LxvWCecxeIDYDR-Dqd5F1DOZtMaa5DQ-rqAS7z9RmqY2ku5G3XxN9ubE86_YAClGOtpYEChZk0FPK6EL8TzW1ebyPjhJoRuKUg9ilRRUgop8pT0hAK0VB0dFkvk4Db2amx-lBsKeY7fJw_DLHSF91maAsgL7t7iO2P5Xk_wZPFQNl-Qu9Eiz_cL60jzFV9dnVbUFG6Gbc-WnfjH7sYcAFMzPey5Lye0jmasO7hw",
  "Nonce": "636583264214063659.ZWU4ZmFkZDUtYzI5MC00MTMwLWEzZmItZThkMjI0ZjUyYWY1NWU2NTlkN2YtMjQzNy00YTNmLWFiOWYtMGMxMmI0NTM2MmU2",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583264214063659.ZWU4ZmFkZDUtYzI5MC00MTMwLWEzZmItZThkMjI0ZjUyYWY1NWU2NTlkN2YtMjQzNy00YTNmLWFiOWYtMGMxMmI0NTM2MmU2",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWTZhxXzptbgtWExjY0abKqkatD6XkLA2bcyCK7D1aSSV8cM_RXT7MAA7qZur2un5Q6G_LxvWCecxeIDYDR-Dqd5F1DOZtMaa5DQ-rqAS7z9RmqY2ku5G3XxN9ubE86_YAClGOtpYEChZk0FPK6EL8TzW1ebyPjhJoRuKUg9ilRRUgop8pT0hAK0VB0dFkvk4Db2amx-lBsKeY7fJw_DLHSF91maAsgL7t7iO2P5Xk_wZPFQNl-Qu9Eiz_cL60jzFV9dnVbUFG6Gbc-WnfjH7sYcAFMzPey5Lye0jmasO7hw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:27:01.419 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 12:27:01.456 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:27:01.456 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:27:05.657 +08:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-03 12:27:05.685 +08:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLCP2RB15N0I:0000001B",
  "TimeStamp": "2018-04-03T04:27:05Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:27:05.685 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:27:05.685 +08:00 [DBG] Adding idp claim with value: local
2018-04-03 12:27:05.685 +08:00 [DBG] Adding amr claim with value: pwd
2018-04-03 12:27:05.686 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:27:05.698 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:27:05.699 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:27:05.699 +08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-03 12:27:05.699 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-03 12:27:05.699 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-03 12:27:05.699 +08:00 [DBG] Start authorize callback request
2018-04-03 12:27:05.699 +08:00 [DBG] User in authorize request: 88421113
2018-04-03 12:27:05.699 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:27:05.700 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:27:05.700 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWTZhxXzptbgtWExjY0abKqkatD6XkLA2bcyCK7D1aSSV8cM_RXT7MAA7qZur2un5Q6G_LxvWCecxeIDYDR-Dqd5F1DOZtMaa5DQ-rqAS7z9RmqY2ku5G3XxN9ubE86_YAClGOtpYEChZk0FPK6EL8TzW1ebyPjhJoRuKUg9ilRRUgop8pT0hAK0VB0dFkvk4Db2amx-lBsKeY7fJw_DLHSF91maAsgL7t7iO2P5Xk_wZPFQNl-Qu9Eiz_cL60jzFV9dnVbUFG6Gbc-WnfjH7sYcAFMzPey5Lye0jmasO7hw",
  "Nonce": "636583264214063659.ZWU4ZmFkZDUtYzI5MC00MTMwLWEzZmItZThkMjI0ZjUyYWY1NWU2NTlkN2YtMjQzNy00YTNmLWFiOWYtMGMxMmI0NTM2MmU2",
  "SessionId": "d31fb6388e32829dfccb9534f61fd4c1",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583264214063659.ZWU4ZmFkZDUtYzI5MC00MTMwLWEzZmItZThkMjI0ZjUyYWY1NWU2NTlkN2YtMjQzNy00YTNmLWFiOWYtMGMxMmI0NTM2MmU2",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWTZhxXzptbgtWExjY0abKqkatD6XkLA2bcyCK7D1aSSV8cM_RXT7MAA7qZur2un5Q6G_LxvWCecxeIDYDR-Dqd5F1DOZtMaa5DQ-rqAS7z9RmqY2ku5G3XxN9ubE86_YAClGOtpYEChZk0FPK6EL8TzW1ebyPjhJoRuKUg9ilRRUgop8pT0hAK0VB0dFkvk4Db2amx-lBsKeY7fJw_DLHSF91maAsgL7t7iO2P5Xk_wZPFQNl-Qu9Eiz_cL60jzFV9dnVbUFG6Gbc-WnfjH7sYcAFMzPey5Lye0jmasO7hw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:27:05.700 +08:00 [DBG] IsActive called from: AuthorizeEndpoint
2018-04-03 12:27:05.704 +08:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-03 12:27:05.704 +08:00 [DBG] Creating Implicit Flow response.
2018-04-03 12:27:05.704 +08:00 [DBG] Getting claims for identity token for subject: 88421113 and client: mvc.implicit
2018-04-03 12:27:05.704 +08:00 [DBG] Get profile called for subject 88421113 from client MVC Implicit with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2018-04-03 12:27:05.704 +08:00 [DBG] Issued claims: ["name","given_name","family_name","website"]
2018-04-03 12:27:05.709 +08:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "88421113",
  "Scopes": "openid profile",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TL6A"
    }
  ],
  "ActivityId": "0HLCP2RB15N0I:0000001C",
  "TimeStamp": "2018-04-03T04:27:05Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:27:05.709 +08:00 [INF] Authorize endpoint response
{
  "SubjectId": "88421113",
  "ClientId": "mvc.implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFWTZhxXzptbgtWExjY0abKqkatD6XkLA2bcyCK7D1aSSV8cM_RXT7MAA7qZur2un5Q6G_LxvWCecxeIDYDR-Dqd5F1DOZtMaa5DQ-rqAS7z9RmqY2ku5G3XxN9ubE86_YAClGOtpYEChZk0FPK6EL8TzW1ebyPjhJoRuKUg9ilRRUgop8pT0hAK0VB0dFkvk4Db2amx-lBsKeY7fJw_DLHSF91maAsgL7t7iO2P5Xk_wZPFQNl-Qu9Eiz_cL60jzFV9dnVbUFG6Gbc-WnfjH7sYcAFMzPey5Lye0jmasO7hw",
  "Scope": "openid profile"
}
2018-04-03 12:27:05.710 +08:00 [DBG] Augmenting SignInContext
2018-04-03 12:27:05.710 +08:00 [INF] AuthenticationScheme: idsrv signed in.
2018-04-03 12:28:33.153 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:28:33.153 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:28:33.153 +08:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-03 12:28:33.153 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-03 12:28:33.154 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-03 12:28:33.154 +08:00 [DBG] Processing signout request for 88421113
2018-04-03 12:28:33.154 +08:00 [DBG] Start end session request validation
2018-04-03 12:28:33.154 +08:00 [DBG] Start identity token validation
2018-04-03 12:28:33.154 +08:00 [DBG] Client found: mvc.implicit / MVC Implicit
2018-04-03 12:28:33.160 +08:00 [DBG] IsActive called from: IdentityTokenValidation
2018-04-03 12:28:33.160 +08:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-03 12:28:33.160 +08:00 [DBG] Token validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1522729625,
    "exp": 1522729925,
    "iss": "http://localhost:5000",
    "aud": "mvc.implicit",
    "nonce": "636583264214063659.ZWU4ZmFkZDUtYzI5MC00MTMwLWEzZmItZThkMjI0ZjUyYWY1NWU2NTlkN2YtMjQzNy00YTNmLWFiOWYtMGMxMmI0NTM2MmU2",
    "iat": 1522729625,
    "sid": "d31fb6388e32829dfccb9534f61fd4c1",
    "sub": "88421113",
    "auth_time": 1522729625,
    "idp": "local",
    "name": "Bob Smith",
    "given_name": "Bob",
    "family_name": "Smith",
    "website": "http://bob.com",
    "amr": "pwd"
  }
}
2018-04-03 12:28:33.160 +08:00 [INF] End session request validation success
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "SubjectId": "88421113",
  "PostLogOutUri": "http://localhost:5005/signout-callback-oidc",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHVDMfCTTj6puwkrHuQTXCKkbkm52PloMJNZ1_ISi-r5jP0UiIuZzpNsR0PvIqoPIgdp7l70R7lXlMCDquMHhKPxp3GRf0a7qn5xtkWqqasFQc3fHhVI1Z5s4pVkhp8h4dsauWQwuCLM3mJklfzUiyV",
  "Raw": {
    "post_logout_redirect_uri": "http://localhost:5005/signout-callback-oidc",
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJjYWQ1YWU1NDBjNTNkNGRjODE1ZDM2OGZlNmIwZjgzIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjI3Mjk2MjUsImV4cCI6MTUyMjcyOTkyNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjLmltcGxpY2l0Iiwibm9uY2UiOiI2MzY1ODMyNjQyMTQwNjM2NTkuWldVNFptRmtaRFV0WXpJNU1DMDBNVE13TFdFelptSXRaVGhrTWpJMFpqVXlZV1kxTldVMk5UbGtOMll0TWpRek55MDBZVE5tTFdGaU9XWXRNR014TW1JME5UTTJNbVUyIiwiaWF0IjoxNTIyNzI5NjI1LCJzaWQiOiJkMzFmYjYzODhlMzI4MjlkZmNjYjk1MzRmNjFmZDRjMSIsInN1YiI6Ijg4NDIxMTEzIiwiYXV0aF90aW1lIjoxNTIyNzI5NjI1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOiJCb2IgU21pdGgiLCJnaXZlbl9uYW1lIjoiQm9iIiwiZmFtaWx5X25hbWUiOiJTbWl0aCIsIndlYnNpdGUiOiJodHRwOi8vYm9iLmNvbSIsImFtciI6WyJwd2QiXX0.Ajoi8TjLS7n2KbxzWAEpWy7jA9uou1rhVJnvqO1NQkAVT8GtcPHDNI7KKtTiGjZV-VXzAJIoHHx_JuY2JOq33UiRr188XLbhMJSMPvQgaq5cUmeA8UUoTVGICISS5_JqtpTQwyWN0sqFBEN8SsNzQo8nEnBD0qOI4WeTz-8pevKU1tuIyLWdBlUYWqqFf0HuaaJmfAiEvElq_s4-ZJF83embIv5dpb8XgVXb169PA2DRhObG6KXgkP-MNxajCxfaChMpatjv7MWhN0xwH_1H_x4HsBnO-boCX0WEX28yNxETBqRyBsC_CeO24OXhGyrCuHLTdGZ_8vfZ8abD0YTL6A",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHVDMfCTTj6puwkrHuQTXCKkbkm52PloMJNZ1_ISi-r5jP0UiIuZzpNsR0PvIqoPIgdp7l70R7lXlMCDquMHhKPxp3GRf0a7qn5xtkWqqasFQc3fHhVI1Z5s4pVkhp8h4dsauWQwuCLM3mJklfzUiyV",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:28:33.160 +08:00 [DBG] Success validating end session request from mvc.implicit
2018-04-03 12:28:33.175 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:28:33.175 +08:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-04-03 12:28:33.195 +08:00 [INF] AuthenticationScheme: idsrv signed out.
2018-04-03 12:28:33.195 +08:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "ActivityId": "0HLCP2RB15N0J:00000002",
  "TimeStamp": "2018-04-03T04:28:33Z",
  "ProcessId": 87388,
  "LocalIpAddress": "127.0.0.1:13146",
  "RemoteIpAddress": "::1"
}
2018-04-03 12:28:33.256 +08:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-03 12:28:33.256 +08:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-03 12:28:33.257 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-03 12:28:33.257 +08:00 [DBG] Processing signout callback request
2018-04-03 12:28:33.257 +08:00 [DBG] Client front-channel logout URLs: http://localhost:5005/signout-oidc?sid=d31fb6388e32829dfccb9534f61fd4c1&iss=http%3A%2F%2Flocalhost%3A5000
2018-04-03 12:28:33.257 +08:00 [DBG] No client back-channel logout URLs
2018-04-03 12:28:33.257 +08:00 [INF] Successful signout callback.
2018-04-03 12:28:33.257 +08:00 [DBG] Client front-channel iframe urls: ["http://localhost:5005/signout-oidc?sid=d31fb6388e32829dfccb9534f61fd4c1&iss=http%3A%2F%2Flocalhost%3A5000"]
2018-04-03 12:28:33.258 +08:00 [DBG] No client back-channel iframe urls
2018-04-03 12:28:34.793 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-03 12:28:34.794 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-03 12:28:34.794 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-03 12:28:34.794 +08:00 [DBG] Start authorize request
2018-04-03 12:28:34.794 +08:00 [DBG] No user present in authorize request
2018-04-03 12:28:34.794 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:28:34.794 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-03 12:28:34.795 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHBN3arwGXiA3ARn-qdPJ2Ka8SY1OB1YUPYwKwh23R7X0MpY3qM3zA3R46a9LH27TXAvNh_pfkVbMbZNu2Qe6Y-MADwCJY4jPrALtk_wQiIaH8laAeI4yKTeAKin0zCeaZAJMO_Lnt9euHFOLD7WGA3mdr1IPeLTk3t3xxN0Uw23Q1FaQWlfK69U04CjxZhYrukD0GgSrZz_u-Eg0yXJVWQN_dasWTSi43qkTcQ0HoCE0L6VkqD6ll_0Wd4cTA__ux5WB0KlcRAuu2D6U03iyFHaT2HSQ5g2B0sMC9ggH9hRQ",
  "Nonce": "636583265147813659.NTcyYzE4YjktYzA4NC00NzFiLWEyYjItMzFkNDg2N2RlMWY3NDI5MzUwODUtZjRkOS00OWRhLThkNzQtOWM0ZTQxYmIxMGQ4",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636583265147813659.NTcyYzE4YjktYzA4NC00NzFiLWEyYjItMzFkNDg2N2RlMWY3NDI5MzUwODUtZjRkOS00OWRhLThkNzQtOWM0ZTQxYmIxMGQ4",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHBN3arwGXiA3ARn-qdPJ2Ka8SY1OB1YUPYwKwh23R7X0MpY3qM3zA3R46a9LH27TXAvNh_pfkVbMbZNu2Qe6Y-MADwCJY4jPrALtk_wQiIaH8laAeI4yKTeAKin0zCeaZAJMO_Lnt9euHFOLD7WGA3mdr1IPeLTk3t3xxN0Uw23Q1FaQWlfK69U04CjxZhYrukD0GgSrZz_u-Eg0yXJVWQN_dasWTSi43qkTcQ0HoCE0L6VkqD6ll_0Wd4cTA__ux5WB0KlcRAuu2D6U03iyFHaT2HSQ5g2B0sMC9ggH9hRQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-03 12:28:34.795 +08:00 [INF] Showing login: User is not authenticated
2018-04-03 12:28:34.827 +08:00 [DBG] Start authorize request protocol validation
2018-04-03 12:28:34.828 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-04 08:36:58.277 +08:00 [DBG] Start authorize request protocol validation
2018-04-04 08:36:58.284 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 11:29:42.123 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 11:29:42.186 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 11:29:42.189 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 11:29:42.189 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 11:29:42.190 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 11:29:42.190 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 11:30:08.529 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'ClientSecret' option must be provided.
Parameter name: ClientSecret
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 11:30:09.590 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'ClientSecret' option must be provided.
Parameter name: ClientSecret
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 11:39:22.081 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 11:39:22.182 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 11:39:22.191 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 11:39:22.191 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 11:39:22.192 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 11:39:22.193 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 11:40:31.392 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T03:40:25.1088998+00:00"".
2018-04-18 11:44:39.164 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-18 11:44:39.177 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-18 11:44:39.178 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-18 11:44:39.190 +08:00 [DBG] Start discovery request
2018-04-18 11:44:39.664 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 11:44:39.665 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 11:44:39.665 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 11:44:39.669 +08:00 [DBG] Start key discovery request
2018-04-18 11:44:39.857 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 11:44:39.862 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 11:44:39.862 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 11:44:39.865 +08:00 [DBG] Start authorize request
2018-04-18 11:44:39.883 +08:00 [DBG] No user present in authorize request
2018-04-18 11:44:39.887 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 11:44:39.931 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 11:44:39.952 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiFNu0bZMG2yXV3EIzN7XMQ28_DugCkN8CGucGWVJvRi6w8vhjjesDvlblduWwCCKzrAGvGkOWv2G8HEykUoUjW50olXFAhgbIRL4WXOCSU34mNfKHECaoHldF4waC47prQ3v_IL_zwSdCUPhksmA8-N6eYpqLA_yq-BS8EwtLKfFeM6rHmIS-9txwgrKNv_JlULK3VDj_8-I0UPakbXcR1DK3RHb5Uj5aTEHdZBugr_-znQqxpu4Hm9or0OJc1EPmn9DNJRx4fifeOHU87shv2kxj-qQKKVgBlVSQgC0WnRBw",
  "Nonce": "636596198797768998.ZGQ0ZjkwZTgtNjQ4ZS00OWIxLTkxNDgtZWMwNDRhMTZhOGU3YjMxOWQ0OTYtNmE0OC00YzZlLTg3ZGYtZmI1ZTJlZDVmY2Ji",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596198797768998.ZGQ0ZjkwZTgtNjQ4ZS00OWIxLTkxNDgtZWMwNDRhMTZhOGU3YjMxOWQ0OTYtNmE0OC00YzZlLTg3ZGYtZmI1ZTJlZDVmY2Ji",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiFNu0bZMG2yXV3EIzN7XMQ28_DugCkN8CGucGWVJvRi6w8vhjjesDvlblduWwCCKzrAGvGkOWv2G8HEykUoUjW50olXFAhgbIRL4WXOCSU34mNfKHECaoHldF4waC47prQ3v_IL_zwSdCUPhksmA8-N6eYpqLA_yq-BS8EwtLKfFeM6rHmIS-9txwgrKNv_JlULK3VDj_8-I0UPakbXcR1DK3RHb5Uj5aTEHdZBugr_-znQqxpu4Hm9or0OJc1EPmn9DNJRx4fifeOHU87shv2kxj-qQKKVgBlVSQgC0WnRBw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 11:44:39.957 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 11:44:40.173 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 11:44:40.175 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 11:44:49.120 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:03:55.045 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:03:55.105 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:03:55.109 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:03:55.109 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:03:55.110 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:03:55.110 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:04:01.888 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T04:04:00.2208998+00:00"".
2018-04-18 12:04:12.982 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:04:13.030 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:04:16.949 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:04:21.950 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:04:21.950 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:04:23.451 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:04:23.452 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:05:58.314 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:08:36.144 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:08:36.211 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:08:36.218 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:08:36.218 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:08:36.219 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:08:36.219 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:08:47.035 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T04:08:43.1608998+00:00"".
2018-04-18 12:08:47.035 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T04:08:43.5448998+00:00"".
2018-04-18 12:08:47.036 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T04:08:47.0328998+00:00"".
2018-04-18 12:08:47.037 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T04:08:47.0378998+00:00"".
2018-04-18 12:08:57.968 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:08:58.010 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:09:06.867 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:10:54.790 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:10:54.856 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:10:54.861 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:10:54.862 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:10:54.862 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:10:54.862 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:11:10.542 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:11:10.583 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:16:32.762 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:16:32.809 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:16:32.813 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:16:32.813 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:16:32.813 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:16:32.813 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:17:34.059 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 12:17:34.068 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 12:17:34.068 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 12:17:34.071 +08:00 [DBG] Start authorize request
2018-04-18 12:17:34.082 +08:00 [DBG] No user present in authorize request
2018-04-18 12:17:34.085 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:17:34.121 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:17:34.208 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiElZhFlVEAm_rzKekvLk7MriFKlqMxMyUaFDmEsrQWkbbh5_x457kZUVr-auDmaf-8Ra8M1MAteMBiNaVo86mloXTY6KoaTJeHOC7dPqJBc9drFBCw73wr5u-3k1HlFSTmKvcVscVU-TiO7lRaT_tQrGo-HyxLFZP5Ye9ws-KPlaTGocCquJwfoY4FR4PRv2k56fl3IKhkxj8Y3w-P7nNJVi4d-Rz8NyV_gBY2tdoGFfIsaZlnvCUjsVL-RCKUQ-szXXrYxHbZ9AwpwzTrODCk2H-5x4p1LNaYf_WWAF1j5zw",
  "Nonce": "636596218540378998.OGRlZmQwY2UtYjYzZS00NDI3LWFjMjAtMTkzZTg5ZTZkMTdhZmZmOWFiZmYtYTU1Yi00M2I2LWI2YjQtMDIzNmM3NDc1ZGQw",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596218540378998.OGRlZmQwY2UtYjYzZS00NDI3LWFjMjAtMTkzZTg5ZTZkMTdhZmZmOWFiZmYtYTU1Yi00M2I2LWI2YjQtMDIzNmM3NDc1ZGQw",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiElZhFlVEAm_rzKekvLk7MriFKlqMxMyUaFDmEsrQWkbbh5_x457kZUVr-auDmaf-8Ra8M1MAteMBiNaVo86mloXTY6KoaTJeHOC7dPqJBc9drFBCw73wr5u-3k1HlFSTmKvcVscVU-TiO7lRaT_tQrGo-HyxLFZP5Ye9ws-KPlaTGocCquJwfoY4FR4PRv2k56fl3IKhkxj8Y3w-P7nNJVi4d-Rz8NyV_gBY2tdoGFfIsaZlnvCUjsVL-RCKUQ-szXXrYxHbZ9AwpwzTrODCk2H-5x4p1LNaYf_WWAF1j5zw",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 12:17:34.213 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 12:17:34.457 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:17:34.460 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:17:38.590 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentNullException: Value cannot be null.
Parameter name: value
   at Microsoft.AspNetCore.WebUtilities.QueryHelpers.AddQueryString(String uri, String name, String value)
   at Microsoft.AspNetCore.Authentication.WeChatCompany.QQHandler.BuildChallengeUrl(AuthenticationProperties properties, String redirectUri) in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\Microsoft.AspNetCore.Authentication.WeChatCompany\WeChatCompanyHandler.cs:line 61
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthHandler`1.<HandleChallengeAsync>d__11.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<ChallengeAsync>d__53.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.<ChallengeAsync>d__11.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.ChallengeResult.<ExecuteResultAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeResultAsync>d__19.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResultFilterAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 12:18:30.237 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:18:30.294 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:18:30.298 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:18:30.299 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:18:30.299 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:18:30.299 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:18:46.976 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 12:18:46.986 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 12:18:46.987 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 12:18:46.990 +08:00 [DBG] Start authorize request
2018-04-18 12:18:47.007 +08:00 [DBG] No user present in authorize request
2018-04-18 12:18:47.009 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:18:47.059 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:18:47.192 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3bB37o39pnu1bEg3--P0SgK5i2fzB96HeCfYJit7_2SreF7CsNUN_TBfi0Hd_f0ejLHaQeSQoG4wUSUJVLXDy3hqALXlntFR1L_W8d2Jm-8yA81fNKY0oKoCLKw7PL1i06q4hY6mguqpS19raRE1s1N5K_h6HHH0JvO3qwvUBSHHUMph3PzZDNnUzZcNE96arLVgHVYJZz4VTuVelDXo0N1eHUH4w-EUxXM3pAw6tqxbbvlUfJlzJJj3f9sRtXxTeOXax8-31hM2ACcis6rRkX3Qz55gZ7Yhr38NZpy6aDQ",
  "Nonce": "636596219269428998.Yzk5ZDAyMGMtZjdkOS00YmEwLWIwZDgtZmQ1ZmRkMTRhY2U0YzI0MmM3NmEtYzAzZi00MzZhLTg5NTMtMWY0ODE2NTg4NTY3",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596219269428998.Yzk5ZDAyMGMtZjdkOS00YmEwLWIwZDgtZmQ1ZmRkMTRhY2U0YzI0MmM3NmEtYzAzZi00MzZhLTg5NTMtMWY0ODE2NTg4NTY3",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiF3bB37o39pnu1bEg3--P0SgK5i2fzB96HeCfYJit7_2SreF7CsNUN_TBfi0Hd_f0ejLHaQeSQoG4wUSUJVLXDy3hqALXlntFR1L_W8d2Jm-8yA81fNKY0oKoCLKw7PL1i06q4hY6mguqpS19raRE1s1N5K_h6HHH0JvO3qwvUBSHHUMph3PzZDNnUzZcNE96arLVgHVYJZz4VTuVelDXo0N1eHUH4w-EUxXM3pAw6tqxbbvlUfJlzJJj3f9sRtXxTeOXax8-31hM2ACcis6rRkX3Qz55gZ7Yhr38NZpy6aDQ",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 12:18:47.200 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 12:18:47.459 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:18:47.461 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:18:57.183 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:21:16.791 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:21:16.848 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:21:16.853 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:21:16.854 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:21:16.854 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:21:16.854 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:21:38.301 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 12:21:38.314 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 12:21:38.315 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 12:21:38.318 +08:00 [DBG] Start authorize request
2018-04-18 12:21:38.334 +08:00 [DBG] No user present in authorize request
2018-04-18 12:21:38.337 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:21:38.392 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:21:38.502 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiHd3dZFZZk0_OnoLanwdV0Ci7yo1TRk4RkExlONoWB7tfQdGmuVN71hrzkFgBsOW6BHnRo_DNLpTc8kDv-AgPyVMSPddxUj0pvzZ9q4mMFo8w5QaYoFyKgc-NaVuNk1KB_2caH54I6F24eJ9kSdV0Z5l0h5UBV50i2pdqwi15I6ZeqG8qBi1uxRdwXqPAKhulgQGgyhkQKp0nfjyt-3NafL8k9BuBpB8z3a-uA45A3NCk8GL3yRWoSfmK8izg-dw0YQr32tVZV4_D3XwrW96VaRO2y-6mijmZl4B99RSWxm5Q",
  "Nonce": "636596220982758998.NzNlYjVmYTktZDJjZi00Y2ZlLWFkNzItOWJmYWIyYmE3YjI5MWVjZDk0NjMtYTE3Mi00Njk2LWEyNWMtNjAyM2ZiNDAyYTI5",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596220982758998.NzNlYjVmYTktZDJjZi00Y2ZlLWFkNzItOWJmYWIyYmE3YjI5MWVjZDk0NjMtYTE3Mi00Njk2LWEyNWMtNjAyM2ZiNDAyYTI5",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiHd3dZFZZk0_OnoLanwdV0Ci7yo1TRk4RkExlONoWB7tfQdGmuVN71hrzkFgBsOW6BHnRo_DNLpTc8kDv-AgPyVMSPddxUj0pvzZ9q4mMFo8w5QaYoFyKgc-NaVuNk1KB_2caH54I6F24eJ9kSdV0Z5l0h5UBV50i2pdqwi15I6ZeqG8qBi1uxRdwXqPAKhulgQGgyhkQKp0nfjyt-3NafL8k9BuBpB8z3a-uA45A3NCk8GL3yRWoSfmK8izg-dw0YQr32tVZV4_D3XwrW96VaRO2y-6mijmZl4B99RSWxm5Q",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 12:21:38.508 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 12:21:38.716 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:21:38.718 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:21:41.616 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:23:35.917 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:23:35.966 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:23:35.970 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:23:35.970 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:23:35.971 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:23:35.971 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:23:45.972 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 12:23:45.980 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 12:23:45.981 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 12:23:45.983 +08:00 [DBG] Start authorize request
2018-04-18 12:23:45.996 +08:00 [DBG] No user present in authorize request
2018-04-18 12:23:45.998 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:23:46.035 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:23:46.118 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGpV-t5KsDmqT60n1DD--onoVv0lMJkjNecwe8oNzMon8YDO-9E6U4ds_tCccFbCuw1c5MfdcMVL0Ae8qWGcE_xoI-hsGbiMU-Yahfdn3NdH8NFmYR2ahSqxqKvguobMtXpWFQ0rMef-Ur6IIB5dO-9qIIrihXBUGpljEgEIpKf0q1gh151rmd65ixLb3SzfpZltuQAwLFWs6MZ2jz31qAWZqP_mEOq-GWoLnLmOJ2Mc4i1WrTtaXznhpm0qITQnKWZKfUREGqo9g7cmbgFLIIcM-P94heCMxCG6m3gIdUx0g",
  "Nonce": "636596222259598998.MThmZTNkZWMtYTQzOC00MGQ5LTk3OGMtMDJjNjVlNTk0ZGUzMGRhNTdjZmQtODQ0Ni00N2Q0LWJlMTEtMWQ3ODc4MzYwMWJm",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596222259598998.MThmZTNkZWMtYTQzOC00MGQ5LTk3OGMtMDJjNjVlNTk0ZGUzMGRhNTdjZmQtODQ0Ni00N2Q0LWJlMTEtMWQ3ODc4MzYwMWJm",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGpV-t5KsDmqT60n1DD--onoVv0lMJkjNecwe8oNzMon8YDO-9E6U4ds_tCccFbCuw1c5MfdcMVL0Ae8qWGcE_xoI-hsGbiMU-Yahfdn3NdH8NFmYR2ahSqxqKvguobMtXpWFQ0rMef-Ur6IIB5dO-9qIIrihXBUGpljEgEIpKf0q1gh151rmd65ixLb3SzfpZltuQAwLFWs6MZ2jz31qAWZqP_mEOq-GWoLnLmOJ2Mc4i1WrTtaXznhpm0qITQnKWZKfUREGqo9g7cmbgFLIIcM-P94heCMxCG6m3gIdUx0g",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 12:23:46.123 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 12:23:46.305 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:23:46.307 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:25:24.738 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 12:25:24.787 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 12:25:24.791 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 12:25:24.792 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 12:25:24.792 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 12:25:24.792 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 12:25:26.797 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 12:25:33.231 +08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 12:25:33.236 +08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 12:25:33.236 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 12:25:33.238 +08:00 [DBG] Start authorize request
2018-04-18 12:25:33.243 +08:00 [DBG] No user present in authorize request
2018-04-18 12:25:33.245 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:25:33.281 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:25:33.361 +08:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "mvc.implicit",
  "ClientName": "MVC Implicit",
  "RedirectUri": "http://localhost:5005/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5005/home",
    "http://localhost:5005/signin-oidc",
    "http://localhost:5005/signout-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token",
  "ResponseMode": "form_post",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile",
  "State": "CfDJ8BcxKkS1QitAtv-9Siq0PiGqiJV7zpQio1OZ3DADUhaMon-hFRpbaEqBq6SGY54j5c3hIQnVDc6DJAfGriDsiFxYFpsSgtNYGvFmwkyooOXMa1xBL8rDq2b_yL_XhBh3MzBX4nKNbmOu2FYmv4oTGou3G99KglnBCGnDa2Tlb-L0yCbUa-QLV1aeFJXHgXfLvl58z7oIgoMtuyfTTyC_rJkR6aF-YX6Ct8VlA2v9phweyH2nVN4CuqOlYvdcQDF4Ev8KzE4hUJdUYHTlb0FKlncMzGVDYhfMUjsRkkayjzQ6NSd74GMEKiOG22PjrD6H1Q",
  "Nonce": "636596223332148998.NTg1NmU0Y2ItZjJlYi00YzM4LWEyMTEtOWU3NjExZWJjNDgxY2JiNzE3ZDQtYjBjNC00MjhjLThlYmUtZDZkZTIyNWE0YmZk",
  "Raw": {
    "client_id": "mvc.implicit",
    "redirect_uri": "http://localhost:5005/signin-oidc",
    "response_type": "id_token",
    "scope": "openid profile",
    "response_mode": "form_post",
    "nonce": "636596223332148998.NTg1NmU0Y2ItZjJlYi00YzM4LWEyMTEtOWU3NjExZWJjNDgxY2JiNzE3ZDQtYjBjNC00MjhjLThlYmUtZDZkZTIyNWE0YmZk",
    "state": "CfDJ8BcxKkS1QitAtv-9Siq0PiGqiJV7zpQio1OZ3DADUhaMon-hFRpbaEqBq6SGY54j5c3hIQnVDc6DJAfGriDsiFxYFpsSgtNYGvFmwkyooOXMa1xBL8rDq2b_yL_XhBh3MzBX4nKNbmOu2FYmv4oTGou3G99KglnBCGnDa2Tlb-L0yCbUa-QLV1aeFJXHgXfLvl58z7oIgoMtuyfTTyC_rJkR6aF-YX6Ct8VlA2v9phweyH2nVN4CuqOlYvdcQDF4Ev8KzE4hUJdUYHTlb0FKlncMzGVDYhfMUjsRkkayjzQ6NSd74GMEKiOG22PjrD6H1Q",
    "x-client-SKU": "ID_NET",
    "x-client-ver": "2.1.4.0"
  }
}
2018-04-18 12:25:33.366 +08:00 [INF] Showing login: User is not authenticated
2018-04-18 12:25:33.414 +08:00 [DBG] Start authorize request protocol validation
2018-04-18 12:25:33.415 +08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 12:25:37.040 +08:00 [INF] AuthenticationScheme: WeChatCompany was challenged.
2018-04-18 14:20:16.979 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 14:20:17.201 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 14:20:17.208 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 14:20:17.209 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 14:20:17.209 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 14:20:17.210 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 14:20:55.910 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 14:21:23.768 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 14:22:06.402 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 14:22:06.466 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 14:22:06.472 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 14:22:06.473 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 14:22:06.473 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 14:22:06.473 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 14:22:13.357 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T06:22:13.2958964+00:00"".
2018-04-18 14:22:13.360 +08:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-04-18T06:22:13.3028964+00:00"".
2018-04-18 14:22:13.456 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 14:23:13.128 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 14:24:37.437 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 14:24:56.650 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 14:25:21.398 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 14:25:24.257 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 14:30:33.122 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 14:30:33.178 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 14:30:33.182 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 14:30:33.183 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 14:30:33.183 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 14:30:33.183 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 14:33:30.476 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 14:33:30.575 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 14:33:30.581 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 14:33:30.581 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 14:33:30.582 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 14:33:30.582 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 14:33:56.425 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 14:33:59.192 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 15:46:57.145 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 15:46:57.415 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 15:46:57.423 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 15:46:57.424 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 15:46:57.425 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 15:46:57.426 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 15:47:06.554 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 15:47:06.741 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 17:56:14.483 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 17:56:14.721 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 17:56:14.727 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 17:56:14.727 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 17:56:14.728 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 17:56:14.728 +08:00 [DBG] Using idsrv as default scheme for forbid
2018-04-18 17:56:32.063 +08:00 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2018-04-18 17:56:32.200 +08:00 [ERR] An unhandled exception has occurred while executing the request
System.Exception: The oauth state was missing or invalid.
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.<HandleRequestAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.<HandleRequestAsync>d__6.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in F:\netcore\IdentityServer4_20\netcore\IdentityServer4-2.1.3\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 17:57:45.842 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 17:57:45.952 +08:00 [DBG] Using idsrv as default scheme for authentication
2018-04-18 17:57:45.959 +08:00 [DBG] Using idsrv as default scheme for sign-in
2018-04-18 17:57:45.960 +08:00 [DBG] Using idsrv as default scheme for sign-out
2018-04-18 17:57:45.961 +08:00 [DBG] Using idsrv as default scheme for challenge
2018-04-18 17:57:45.962 +08:00 [DBG] Using idsrv as default scheme for forbid
